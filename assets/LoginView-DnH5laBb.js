import{d as M,s as j,O as z,c5 as G,q as c,P as b,bj as K,R as _,o as m,i as a,w as o,e as s,bJ as N,bK as W,E as i,bL as q,ad as A,k as t,V as L,b0 as P,bv as S,cr as V,J as h,cs as H,b as F,ct as U,cu as D,aS as J,$ as O,L as Q,ac as T,t as f,aQ as k}from"./index-BXLJyS8L.js";import{_ as X}from"./CardFooter.vue_vue_type_script_setup_true_lang-B7djHw9P.js";import{M as Y}from"./mail-C4j5mTMZ.js";const Z={class:"flex items-center justify-center min-h-[calc(100vh-3.5rem)] px-4 py-12"},ee={class:"space-y-2"},se={class:"relative"},ae={key:0,class:"text-sm text-red-500"},te={class:"space-y-2"},le={class:"flex items-center justify-between"},re={class:"relative"},oe={key:0,class:"text-sm text-red-500"},ne={class:"flex items-center space-x-2"},ie={class:"text-sm text-center text-muted-foreground"},ve=M({__name:"LoginView",setup(ue){const y=j(),$=z(),C=G(),l=c(""),u=c(""),v=c(!1),p=c(!1),n=c(!1),g=b(()=>l.value?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.value):!0),w=b(()=>u.value?u.value.length>=6:!0),E=b(()=>l.value&&u.value&&g.value&&w.value),x=async()=>{if(!E.value){f("Please fill in all fields correctly",{description:"Invalid Form"});return}n.value=!0;try{if(await y.loginWithEmail({email:l.value,password:u.value})){v.value?localStorage.setItem("rememberedEmail",l.value):localStorage.removeItem("rememberedEmail"),f("Login successful!",{description:"Welcome back!"});const e=C.query.redirect||"/";$.push(e)}}catch(r){k.error("Login error:",r)}finally{n.value=!1}},I=async()=>{n.value=!0;try{if(await y.loginWithGoogle()){f("Google login successful!",{description:"Welcome back!"});const e=C.query.redirect||"/";$.push(e)}}catch(r){k.error("Google login error:",r)}finally{n.value=!1}},R=async()=>{if(!l.value||!g.value){f("Please enter a valid email address",{description:"Invalid Email"});return}n.value=!0;try{await y.resetPassword(l.value),f("Password reset email sent!",{description:"Check your email for reset instructions"})}catch(r){k.error("Password reset error:",r)}finally{n.value=!1}};return(()=>{const r=localStorage.getItem("rememberedEmail");r&&(l.value=r,v.value=!0)})(),(r,e)=>{const B=K("RouterLink");return m(),_("div",Z,[a(s(T),{class:"w-full max-w-md mx-auto"},{default:o(()=>[a(s(N),{class:"space-y-1"},{default:o(()=>[a(s(W),{class:"text-2xl font-bold text-center"},{default:o(()=>e[4]||(e[4]=[i("Login")])),_:1}),a(s(q),{class:"text-center"},{default:o(()=>e[5]||(e[5]=[i(" Enter your email and password to sign in to your account ")])),_:1})]),_:1}),a(s(A),{class:"space-y-4"},{default:o(()=>[t("div",ee,[a(s(P),{for:"email"},{default:o(()=>e[6]||(e[6]=[i("Email")])),_:1}),t("div",se,[a(s(Y),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a(s(S),{id:"email",value:l.value,type:"email","class-name":`pl-10 ${l.value&&!g.value?"border-red-500":""}`,placeholder:"email@example.com",onInput:e[0]||(e[0]=d=>l.value=d.target.value),onKeyup:V(x,["enter"])},null,8,["value","class-name"])]),l.value&&!g.value?(m(),_("p",ae," Please enter a valid email address ")):L("",!0)]),t("div",te,[t("div",le,[a(s(P),{for:"password"},{default:o(()=>e[7]||(e[7]=[i("Password")])),_:1}),a(s(h),{variant:"link",class:"px-0 font-normal h-auto text-xs",onClick:R},{default:o(()=>e[8]||(e[8]=[i(" Forgot password? ")])),_:1})]),t("div",re,[a(s(H),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a(s(S),{id:"password",value:u.value,type:p.value?"text":"password","class-name":`pl-10 ${u.value&&!w.value?"border-red-500":""}`,placeholder:"••••••••",onInput:e[1]||(e[1]=d=>u.value=d.target.value),onKeyup:V(x,["enter"])},null,8,["value","type","class-name"]),t("button",{type:"button",class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",onClick:e[2]||(e[2]=d=>p.value=!p.value)},[p.value?(m(),F(s(U),{key:0,class:"h-4 w-4"})):(m(),F(s(D),{key:1,class:"h-4 w-4"}))])]),u.value&&!w.value?(m(),_("p",oe," Password must be at least 6 characters long ")):L("",!0)]),t("div",ne,[a(s(J),{id:"remember",checked:v.value,"onUpdate:checked":e[3]||(e[3]=d=>v.value=d)},null,8,["checked"]),e[9]||(e[9]=t("label",{for:"remember",class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Remember me ",-1))]),a(s(h),{class:O(["w-full",{"opacity-70 cursor-not-allowed":n.value}]),disabled:!E.value||n.value,onClick:x},{default:o(()=>[i(Q(n.value?"Logging in...":"Sign In"),1)]),_:1},8,["disabled","class"]),e[11]||(e[11]=t("div",{class:"relative flex items-center justify-center"},[t("div",{class:"absolute border-t border-gray-300 dark:border-gray-700 w-full"}),t("div",{class:"relative px-4 bg-card text-sm"},"or continue with")],-1)),a(s(h),{variant:"outline",class:"w-full",disabled:n.value,onClick:I},{default:o(()=>e[10]||(e[10]=[t("svg",{class:"h-4 w-4 mr-2",viewBox:"0 0 24 24"},[t("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),t("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),t("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),t("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})],-1),i(" Sign in with Google ")])),_:1},8,["disabled"])]),_:1}),a(s(X),{class:"flex justify-center"},{default:o(()=>[t("div",ie,[e[13]||(e[13]=i(" Don't have an account? ")),a(B,{to:"/register",class:"text-primary font-medium hover:underline ml-1"},{default:o(()=>e[12]||(e[12]=[i(" Sign up ")])),_:1})])]),_:1})]),_:1})])}}});export{ve as default};
