import{d as B,a7 as P,q as p,P as j,R as J,o as L,i as t,w as l,e as a,bJ as m,bK as g,E as o,bl as S,bL as y,ad as x,k as s,J as v,L as w,ac as b,dC as k,b0 as M,bv as O,aX as _,d_ as z,aP as C,t as i}from"./index-BqzSlmqz.js";const R={class:"space-y-6 max-w-2xl"},V={class:"space-y-2"},K={class:"space-y-4"},U={class:"space-y-2"},q={class:"p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-md"},G={class:"flex items-start gap-2"},W={class:"grid grid-cols-2 gap-4 p-4 bg-muted/30 rounded-lg"},X={class:"space-y-1"},Z={class:"font-medium"},H={class:"space-y-2"},Q={class:"space-y-2"},Y={class:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md"},ee={class:"flex items-start gap-2"},se=B({__name:"DataManagementSettings",setup(te,{expose:I}){const D=P(),c=p(!1),u=p(!1),f=p(!1),d=p(null),A=j(()=>{try{let r=0;for(let n in localStorage)localStorage.hasOwnProperty(n)&&(r+=localStorage[n].length+n.length);return`${(r/(1024*1024)).toFixed(1)} MB`}catch{return"Unknown"}}),F=async()=>{c.value=!0;try{await D.exportAllNotas(),i({title:"Export Successful",description:"All data has been exported successfully",variant:"default"})}catch{i({title:"Export Failed",description:"Failed to export data. Please try again.",variant:"destructive"})}finally{c.value=!1}},N=r=>{var h;const n=(h=r.target.files)==null?void 0:h[0];n&&(d.value=n)},T=async()=>{if(!d.value){i({title:"No File Selected",description:"Please select a file to import",variant:"destructive"});return}u.value=!0;try{const r=await d.value.text(),e=JSON.parse(r);if(!e.notas||!Array.isArray(e.notas))throw new Error("Invalid data format");i({title:"Import Successful",description:`Imported ${e.notas.length} notas successfully`,variant:"default"}),d.value=null;const n=document.getElementById("import-file");n&&(n.value="")}catch{i({title:"Import Failed",description:"Failed to import data. Please check the file format.",variant:"destructive"})}finally{u.value=!1}},E=()=>{if(confirm("Are you sure you want to clear all cached data? This action cannot be undone.")){f.value=!0;try{localStorage.removeItem("recent-searches"),localStorage.removeItem("temp-data"),localStorage.removeItem("cache-data"),Object.keys(localStorage).filter(e=>e.includes("cache")||e.includes("temp")).forEach(e=>localStorage.removeItem(e)),i({title:"Cache Cleared",description:"Application cache has been cleared",variant:"default"})}catch{i({title:"Clear Failed",description:"Failed to clear cache. Please try again.",variant:"destructive"})}finally{f.value=!1}}},$=()=>{if(confirm("⚠️ WARNING: This will delete ALL your data including notas, settings, and cache. This action cannot be undone. Are you sure?")&&confirm("This is your final warning. All data will be permanently deleted. Continue?"))try{localStorage.clear(),window.location.reload(),i({title:"All Data Cleared",description:"Application has been reset to factory defaults",variant:"default"})}catch{i({title:"Clear Failed",description:"Failed to clear all data. Please try again.",variant:"destructive"})}};return I({resetToDefaults:()=>{i({title:"No Settings to Reset",description:"Data management has no settings to reset",variant:"default"})}}),(r,e)=>(L(),J("div",R,[t(a(b),null,{default:l(()=>[t(a(m),null,{default:l(()=>[t(a(g),{class:"flex items-center gap-2"},{default:l(()=>[t(a(S),{class:"h-5 w-5"}),e[0]||(e[0]=o(" Export Data "))]),_:1}),t(a(y),null,{default:l(()=>e[1]||(e[1]=[o("Create a backup of all your notas and settings")])),_:1})]),_:1}),t(a(x),{class:"space-y-4"},{default:l(()=>[s("div",V,[e[2]||(e[2]=s("p",{class:"text-sm text-muted-foreground"}," Export all your notas, settings, and user data as a JSON file. This creates a complete backup that can be imported later. ",-1)),t(a(v),{onClick:F,disabled:c.value,class:"w-full flex items-center justify-center gap-2"},{default:l(()=>[t(a(S),{class:"h-4 w-4"}),o(" "+w(c.value?"Exporting...":"Export All Data"),1)]),_:1},8,["disabled"])])]),_:1})]),_:1}),t(a(b),null,{default:l(()=>[t(a(m),null,{default:l(()=>[t(a(g),{class:"flex items-center gap-2"},{default:l(()=>[t(a(k),{class:"h-5 w-5"}),e[3]||(e[3]=o(" Import Data "))]),_:1}),t(a(y),null,{default:l(()=>e[4]||(e[4]=[o("Restore data from a previously exported backup")])),_:1})]),_:1}),t(a(x),{class:"space-y-4"},{default:l(()=>[s("div",K,[s("div",U,[t(a(M),{for:"import-file"},{default:l(()=>e[5]||(e[5]=[o("Select Backup File")])),_:1}),t(a(O),{id:"import-file",type:"file",accept:".json",onChange:N}),e[6]||(e[6]=s("p",{class:"text-xs text-muted-foreground"}," Select a JSON backup file exported from BashNota ",-1))]),t(a(v),{onClick:T,disabled:u.value||!d.value,class:"w-full flex items-center justify-center gap-2",variant:"outline"},{default:l(()=>[t(a(k),{class:"h-4 w-4"}),o(" "+w(u.value?"Importing...":"Import Data"),1)]),_:1},8,["disabled"]),s("div",q,[s("div",G,[t(a(_),{class:"h-4 w-4 text-yellow-600 dark:text-yellow-400 mt-0.5 flex-shrink-0"}),e[7]||(e[7]=s("p",{class:"text-xs text-yellow-800 dark:text-yellow-200"}," Importing data will merge with existing data. Duplicate items may be created. ",-1))])])])]),_:1})]),_:1}),t(a(b),null,{default:l(()=>[t(a(m),null,{default:l(()=>[t(a(g),{class:"flex items-center gap-2"},{default:l(()=>[t(a(z),{class:"h-5 w-5"}),e[8]||(e[8]=o(" Storage Information "))]),_:1}),t(a(y),null,{default:l(()=>e[9]||(e[9]=[o("View current storage usage and manage cached data")])),_:1})]),_:1}),t(a(x),{class:"space-y-4"},{default:l(()=>[s("div",W,[s("div",X,[e[10]||(e[10]=s("p",{class:"text-sm text-muted-foreground"},"Storage Used",-1)),s("p",Z,w(A.value),1)]),e[11]||(e[11]=s("div",{class:"space-y-1"},[s("p",{class:"text-sm text-muted-foreground"},"Data Type"),s("p",{class:"font-medium"},"Local Storage")],-1))]),s("div",H,[t(a(v),{onClick:E,disabled:f.value,variant:"outline",class:"w-full flex items-center justify-center gap-2"},{default:l(()=>[t(a(C),{class:"h-4 w-4"}),o(" "+w(f.value?"Clearing...":"Clear Cache"),1)]),_:1},8,["disabled"]),e[12]||(e[12]=s("p",{class:"text-xs text-muted-foreground"}," Clears temporary files and cached data to free up space ",-1))])]),_:1})]),_:1}),t(a(b),{class:"border-destructive"},{default:l(()=>[t(a(m),null,{default:l(()=>[t(a(g),{class:"flex items-center gap-2 text-destructive"},{default:l(()=>[t(a(_),{class:"h-5 w-5"}),e[13]||(e[13]=o(" Danger Zone "))]),_:1}),t(a(y),null,{default:l(()=>e[14]||(e[14]=[o("Irreversible actions that will delete your data")])),_:1})]),_:1}),t(a(x),{class:"space-y-4"},{default:l(()=>[s("div",Q,[e[16]||(e[16]=s("p",{class:"text-sm text-muted-foreground"}," This will permanently delete all your notas, settings, and cached data. This action cannot be undone. ",-1)),t(a(v),{onClick:$,variant:"destructive",class:"w-full flex items-center justify-center gap-2"},{default:l(()=>[t(a(C),{class:"h-4 w-4"}),e[15]||(e[15]=o(" Delete All Data "))]),_:1})]),s("div",Y,[s("div",ee,[t(a(_),{class:"h-4 w-4 text-red-600 dark:text-red-400 mt-0.5 flex-shrink-0"}),e[17]||(e[17]=s("p",{class:"text-xs text-red-800 dark:text-red-200"}," Make sure to export your data before performing this action. All data will be permanently lost. ",-1))])])]),_:1})]),_:1})]))}});export{se as default};
