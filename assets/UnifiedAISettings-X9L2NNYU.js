import{d as j,dl as X,by as ee,q as T,P as b,Q as te,b as v,o as r,w as l,i as t,e,bJ as ue,k as s,V as w,aU as Y,bK as me,E as i,L as p,F,aV as Ce,aW as Pe,bL as ce,J as I,Z as ke,ad as ve,R as S,b0 as B,a3 as Le,bv as we,ct as $e,cu as Ie,aC as Te,aA as qe,S as R,ap as pe,a$ as re,$ as E,ac as fe,t as C,ab as he,N as Ue,A as ze,B as Ne,D as Ke,cd as W,bl as ie,ag as Ve,G as De,cj as Be,dm as xe,dn as Fe,l as H,dp as V,bk as Ge,dq as Ee,_ as K,dr as Me,b$ as Re,bY as _e,cf as We,cW as ne,ae as je,b1 as Oe,ds as Qe,bS as He,dt as Ze,bV as Je,bW as se,du as le,bZ as ae,bo as be,bU as Ye}from"./index-B6K4lM3_.js";import{_ as Z,a as J}from"./SettingGroup.vue_vue_type_script_setup_true_lang-DS8vxKSe.js";import{_ as oe,a as Xe}from"./SettingSlider.vue_vue_type_script_setup_true_lang-BDJ7qojM.js";import{S as de}from"./settings-2-DCCdlvRA.js";import"./Slider.vue_vue_type_script_setup_true_lang-DdAnwOqt.js";const et={class:"flex items-start justify-between"},tt={class:"flex items-center gap-3"},st={class:"p-2 rounded-lg bg-muted"},lt={key:0,class:"space-y-3"},at={class:"flex items-center justify-between"},ot={class:"relative"},rt={class:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1"},it={class:"space-y-2"},nt={class:"flex flex-wrap gap-1"},dt={class:"flex items-center justify-between pt-2 border-t"},ut={class:"text-sm text-muted-foreground"},mt={key:0},ct={key:1},vt=j({__name:"ProviderSettings",props:{providerId:{},providerName:{},icon:{},description:{},requiresApiKey:{type:Boolean},setupUrl:{},features:{}},emits:["select","update-api-key"],setup(D,{emit:g}){const m=D,_=g,{checkProviderAvailability:q,availableProviders:h}=X(),P=ee(),k=T(""),d=T(!1),y=T(!1),M=T(!1),U=T(null),L=b(()=>P.settings.preferredProviderId===m.providerId),z=b(()=>!!k.value),n=b(()=>!m.requiresApiKey||z.value),o=f=>{k.value=f,_("update-api-key",m.providerId,f),f&&m.requiresApiKey&&u()},u=async()=>{if(n.value){y.value=!0;try{M.value=await q(m.providerId),U.value=new Date,M.value?C.success(`${m.providerName} is available and ready to use`):C.error(`${m.providerName} is not available. Check your configuration.`)}catch(f){console.error("Error checking provider availability:",f),M.value=!1,C.error(`Failed to check ${m.providerName} availability`)}finally{y.value=!1}}},G=()=>{if(m.requiresApiKey&&!z.value){C.error("Please enter an API key first");return}_("select",m.providerId)},A=()=>{m.setupUrl&&window.open(m.setupUrl,"_blank")};return te(()=>{k.value=P.getApiKey(m.providerId),M.value=h.value.includes(m.providerId)}),(f,$)=>(r(),v(e(fe),{class:E(["transition-all duration-200 cursor-pointer border-2",L.value?"border-primary bg-primary/5 shadow-md":"border-border hover:border-primary/50 hover:shadow-sm"])},{default:l(()=>[t(e(ue),{class:"pb-4"},{default:l(()=>[s("div",et,[s("div",tt,[s("div",st,[(r(),v(Y(f.icon),{class:"h-6 w-6"}))]),s("div",null,[t(e(me),{class:"flex items-center gap-2"},{default:l(()=>[i(p(f.providerName)+" ",1),L.value?(r(),v(e(F),{key:0,variant:"default",class:"text-xs"},{default:l(()=>$[3]||($[3]=[i(" Selected ")])),_:1})):w("",!0),U.value?(r(),v(e(F),{key:1,variant:M.value?"default":"destructive",class:"text-xs"},{default:l(()=>[M.value?(r(),v(e(Ce),{key:0,class:"w-3 h-3 mr-1"})):(r(),v(e(Pe),{key:1,class:"w-3 h-3 mr-1"})),i(" "+p(M.value?"Available":"Unavailable"),1)]),_:1},8,["variant"])):w("",!0)]),_:1}),t(e(ce),null,{default:l(()=>[i(p(f.description),1)]),_:1})])]),n.value?(r(),v(e(I),{key:0,variant:"outline",size:"sm",onClick:G,disabled:!M.value&&f.requiresApiKey},{default:l(()=>[t(e(ke),{class:"w-4 h-4 mr-1"}),i(" "+p(L.value?"Selected":"Select"),1)]),_:1},8,["disabled"])):w("",!0)])]),_:1}),t(e(ve),{class:"space-y-4"},{default:l(()=>[f.requiresApiKey?(r(),S("div",lt,[s("div",at,[t(e(B),null,{default:l(()=>$[4]||($[4]=[i("API Key")])),_:1}),f.setupUrl?(r(),v(e(I),{key:0,variant:"ghost",size:"sm",onClick:A,class:"text-xs"},{default:l(()=>[t(e(Le),{class:"w-3 h-3 mr-1"}),$[5]||($[5]=i(" Get API Key "))]),_:1})):w("",!0)]),s("div",ot,[t(e(we),{modelValue:k.value,"onUpdate:modelValue":[$[0]||($[0]=N=>k.value=N),$[1]||($[1]=N=>o(String(N)))],type:d.value?"text":"password",placeholder:"Enter your API key",class:"pr-20"},null,8,["modelValue","type"]),s("div",rt,[t(e(I),{variant:"ghost",size:"sm",onClick:$[2]||($[2]=N=>d.value=!d.value),class:"h-6 w-6 p-0"},{default:l(()=>[d.value?(r(),v(e(Ie),{key:1,class:"h-3 w-3"})):(r(),v(e($e),{key:0,class:"h-3 w-3"}))]),_:1})])]),f.requiresApiKey&&!z.value?(r(),v(e(Te),{key:0,class:"border-amber-200 bg-amber-50 dark:bg-amber-950"},{default:l(()=>[t(e(qe),{class:"text-sm"},{default:l(()=>[i(" An API key is required to use "+p(f.providerName)+". ",1),f.setupUrl?(r(),v(e(I),{key:0,variant:"link",size:"sm",onClick:A,class:"p-0 h-auto text-sm underline"},{default:l(()=>$[6]||($[6]=[i(" Get one here ")])),_:1})):w("",!0)]),_:1})]),_:1})):w("",!0)])):w("",!0),s("div",it,[t(e(B),{class:"text-sm font-medium"},{default:l(()=>$[7]||($[7]=[i("Features")])),_:1}),s("div",nt,[(r(!0),S(R,null,pe(f.features,N=>(r(),v(e(F),{key:N,variant:"secondary",class:"text-xs"},{default:l(()=>[i(p(N),1)]),_:2},1024))),128))])]),s("div",dt,[s("div",ut,[U.value?(r(),S("span",mt," Last checked: "+p(U.value.toLocaleTimeString()),1)):(r(),S("span",ct,"Not checked yet"))]),t(e(I),{variant:"outline",size:"sm",onClick:u,disabled:!n.value||y.value},{default:l(()=>[y.value?(r(),v(e(re),{key:0,class:"w-3 h-3 mr-1 animate-spin"})):w("",!0),i(" "+p(y.value?"Checking...":"Check Status"),1)]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["class"]))}}),pt={class:"flex-1 flex flex-col space-y-4 overflow-hidden"},ft={class:"flex items-center gap-4"},gt={class:"relative flex-1"},yt={key:0,class:"flex gap-1"},xt={class:"flex-1 border rounded-lg overflow-hidden flex flex-col"},_t={class:"border-b bg-muted/50"},bt={class:"flex items-center justify-center gap-2"},kt={class:"space-y-1"},wt={class:"font-medium"},$t={class:"text-xs text-muted-foreground"},ht={class:"flex items-center gap-1"},Mt={class:"text-sm"},St={class:"flex gap-1"},At={class:"text-sm text-muted-foreground"},Ct={key:1,class:"text-sm text-muted-foreground"},Pt={key:0,class:"flex items-center gap-1 text-green-600 dark:text-green-400"},Lt={key:1,class:"text-xs text-muted-foreground"},It={class:"flex items-center justify-between pt-4 border-t"},Tt={class:"text-sm text-muted-foreground"},qt={class:"flex gap-2"},Ut=j({__name:"ModelSelectionDialog",props:{providerId:{},providerName:{},open:{type:Boolean}},emits:["update:open","model-selected"],setup(D,{emit:g}){const m=D,_=g,{geminiModels:q,webLLMModels:h,isLoadingGeminiModels:P,isLoadingWebLLMModels:k,fetchGeminiModels:d,fetchWebLLMModels:y,loadWebLLMModel:M,currentWebLLMModel:U}=X(),L=ee(),z=T(""),n=T(""),o=T(!1),u=T("all"),G=b({get:()=>m.open,set:x=>_("update:open",x)}),A=b(()=>m.providerId==="gemini"),f=b(()=>m.providerId==="webllm"),$=b(()=>A.value?q.value:f.value?h.value:[]),N=b(()=>A.value?P.value:f.value?k.value:!1),O=b(()=>{let x=$.value;if(z.value){const a=z.value.toLowerCase();x=x.filter(c=>c.name.toLowerCase().includes(a)||c.description.toLowerCase().includes(a)||c.id.toLowerCase().includes(a))}return f.value&&u.value!=="all"&&(x=x.filter(a=>{const c=a;return u.value==="small"?c.size&&(c.size.includes("1B")||c.size.includes("3B")):u.value==="medium"?c.size&&(c.size.includes("7B")||c.size.includes("8B")):u.value==="large"?c.size&&(c.size.includes("13B")||c.size.includes("70B")):u.value==="instruct"?a.id.includes("Instruct"):!0})),x});b(()=>n.value?$.value.find(x=>x.id===n.value):null);const Se=async()=>{var x;if(n.value)try{A.value?L.updateSettings({geminiModel:n.value}):f.value&&(L.updateSettings({webllmModel:n.value}),n.value!==U.value&&await Ae(n.value)),_("model-selected",n.value),_("update:open",!1);const a=(x=$.value.find(c=>c.id===n.value))==null?void 0:x.name;C.success(`Selected ${a}`)}catch(a){console.error("Error selecting model:",a),C.error("Failed to select model")}},Ae=async x=>{if(f.value){o.value=!0;try{await M(x),C.success(`${x} loaded successfully`)}catch(a){console.error("Error loading WebLLM model:",a),C.error(`Failed to load ${x}`)}finally{o.value=!1}}},ge=async()=>{try{A.value?await d():f.value&&await y(),C.success("Models refreshed")}catch(x){console.error("Error refreshing models:",x),C.error("Failed to refresh models")}},ye=x=>{n.value=x,Se()};return te(()=>{A.value?n.value=L.settings.geminiModel||"gemini-1.5-pro":f.value&&(n.value=L.settings.webllmModel||"")}),he(()=>m.open,async x=>{x&&(console.log(`[ModelSelectionDialog] Opening dialog for ${m.providerId}`),await ge(),A.value?console.log(`[ModelSelectionDialog] Gemini models loaded: ${q.value.length}`):f.value&&console.log(`[ModelSelectionDialog] WebLLM models loaded: ${h.value.length}`))}),(x,a)=>(r(),v(e(Ue),{open:G.value,"onUpdate:open":a[6]||(a[6]=c=>G.value=c)},{default:l(()=>[t(e(ze),{class:"max-w-5xl max-h-[80vh] overflow-hidden flex flex-col"},{default:l(()=>[t(e(Ne),null,{default:l(()=>[t(e(Ke),{class:"flex items-center gap-2"},{default:l(()=>[(r(),v(Y(A.value?e(W):f.value?e(ie):e(Ve)),{class:"h-5 w-5"})),i(" Select "+p(x.providerName)+" Model ",1)]),_:1}),t(e(De),null,{default:l(()=>a[7]||(a[7]=[i(" Choose the AI model that best fits your needs ")])),_:1})]),_:1}),s("div",pt,[s("div",ft,[s("div",gt,[t(e(Be),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),t(e(we),{modelValue:z.value,"onUpdate:modelValue":a[0]||(a[0]=c=>z.value=c),placeholder:"Search models by name, size, or type...",class:"pl-10"},null,8,["modelValue"])]),f.value?(r(),S("div",yt,[t(e(I),{variant:"outline",size:"sm",class:E({"bg-primary text-primary-foreground":u.value==="all"}),onClick:a[1]||(a[1]=c=>u.value="all")},{default:l(()=>a[8]||(a[8]=[i(" All ")])),_:1},8,["class"]),t(e(I),{variant:"outline",size:"sm",class:E({"bg-primary text-primary-foreground":u.value==="small"}),onClick:a[2]||(a[2]=c=>u.value="small")},{default:l(()=>a[9]||(a[9]=[i(" Small ")])),_:1},8,["class"]),t(e(I),{variant:"outline",size:"sm",class:E({"bg-primary text-primary-foreground":u.value==="medium"}),onClick:a[3]||(a[3]=c=>u.value="medium")},{default:l(()=>a[10]||(a[10]=[i(" Medium ")])),_:1},8,["class"]),t(e(I),{variant:"outline",size:"sm",class:E({"bg-primary text-primary-foreground":u.value==="large"}),onClick:a[4]||(a[4]=c=>u.value="large")},{default:l(()=>a[11]||(a[11]=[i(" Large ")])),_:1},8,["class"])])):w("",!0),t(e(I),{variant:"outline",size:"sm",onClick:ge,disabled:N.value},{default:l(()=>[N.value?(r(),v(e(re),{key:0,class:"w-4 h-4 mr-1 animate-spin"})):w("",!0),a[12]||(a[12]=i(" Refresh "))]),_:1},8,["disabled"])]),s("div",xt,[s("div",_t,[t(e(xe),null,{default:l(()=>[t(e(Fe),null,{default:l(()=>[t(e(H),null,{default:l(()=>[t(e(V),{class:"w-12 h-10"}),t(e(V),{class:"h-10"},{default:l(()=>a[13]||(a[13]=[i("Model Name")])),_:1}),A.value?(r(),v(e(V),{key:0,class:"h-10"},{default:l(()=>a[14]||(a[14]=[i("Context Length")])),_:1})):w("",!0),A.value?(r(),v(e(V),{key:1,class:"h-10"},{default:l(()=>a[15]||(a[15]=[i("Features")])),_:1})):w("",!0),f.value?(r(),v(e(V),{key:2,class:"h-10"},{default:l(()=>a[16]||(a[16]=[i("Size")])),_:1})):w("",!0),f.value?(r(),v(e(V),{key:3,class:"h-10"},{default:l(()=>a[17]||(a[17]=[i("Download")])),_:1})):w("",!0),f.value?(r(),v(e(V),{key:4,class:"h-10"},{default:l(()=>a[18]||(a[18]=[i("Type")])),_:1})):w("",!0),f.value?(r(),v(e(V),{key:5,class:"h-10"},{default:l(()=>a[19]||(a[19]=[i("Status")])),_:1})):w("",!0),t(e(V),{class:"w-24 h-10"},{default:l(()=>a[20]||(a[20]=[i("Action")])),_:1})]),_:1})]),_:1})]),_:1})]),t(e(Ge),{class:"flex-1"},{default:l(()=>[t(e(xe),null,{default:l(()=>[t(e(Ee),null,{default:l(()=>[N.value?(r(),v(e(H),{key:0},{default:l(()=>[t(e(K),{colspan:A.value?5:8,class:"text-center py-12"},{default:l(()=>[s("div",bt,[t(e(re),{class:"w-6 h-6 animate-spin"}),s("span",null,"Loading "+p(x.providerName)+" models...",1)])]),_:1},8,["colspan"])]),_:1})):O.value.length===0?(r(),v(e(H),{key:1},{default:l(()=>[t(e(K),{colspan:A.value?5:8,class:"text-center py-12 text-muted-foreground"},{default:l(()=>a[21]||(a[21]=[s("div",null,[s("p",{class:"font-medium"},"No models found"),s("p",{class:"text-sm"},"Try adjusting your search or refresh the list")],-1)])),_:1},8,["colspan"])]),_:1})):(r(!0),S(R,{key:2},pe(O.value,c=>(r(),v(e(H),{key:c.id,class:"cursor-pointer hover:bg-muted/50 transition-colors",onClick:Q=>ye(c.id)},{default:l(()=>[t(e(K),{class:"text-center w-12"},{default:l(()=>[c.id===(A.value?e(L).settings.geminiModel:e(L).settings.webllmModel)?(r(),v(e(Me),{key:0,class:"h-4 w-4 text-primary mx-auto"})):w("",!0)]),_:2},1024),t(e(K),null,{default:l(()=>[s("div",kt,[s("div",wt,p(c.name),1),s("div",$t,p(c.id),1)])]),_:2},1024),A.value?(r(),S(R,{key:0},[t(e(K),null,{default:l(()=>{var Q;return[s("div",ht,[t(e(ke),{class:"h-3 w-3"}),s("span",Mt,p(((Q=c.maxTokens)==null?void 0:Q.toLocaleString())??"N/A"),1)])]}),_:2},1024),t(e(K),null,{default:l(()=>[s("div",St,[c.supportsImages?(r(),v(e(F),{key:0,variant:"secondary",class:"text-xs"},{default:l(()=>[t(e($e),{class:"w-3 h-3 mr-1"}),a[22]||(a[22]=i(" Multimodal "))]),_:1})):w("",!0)])]),_:2},1024)],64)):w("",!0),f.value?(r(),S(R,{key:1},[t(e(K),null,{default:l(()=>[t(e(F),{variant:"outline",class:"text-xs"},{default:l(()=>[i(p(c.size??"Unknown"),1)]),_:2},1024)]),_:2},1024),t(e(K),null,{default:l(()=>[s("span",At,p(c.downloadSize??"Unknown"),1)]),_:2},1024),t(e(K),null,{default:l(()=>[c.id.includes("Instruct")?(r(),v(e(F),{key:0,variant:"secondary",class:"text-xs"},{default:l(()=>[t(e(W),{class:"w-3 h-3 mr-1"}),a[23]||(a[23]=i(" Instruct "))]),_:1})):(r(),S("span",Ct,"Base"))]),_:2},1024),t(e(K),null,{default:l(()=>[c.id===e(U)?(r(),S("div",Pt,a[24]||(a[24]=[s("div",{class:"w-2 h-2 bg-green-500 rounded-full"},null,-1),s("span",{class:"text-xs"},"Loaded",-1)]))):(r(),S("span",Lt,"Ready"))]),_:2},1024)],64)):w("",!0),t(e(K),{class:"w-24"},{default:l(()=>[t(e(I),{size:"sm",variant:"outline",class:"text-xs h-7",onClick:Re(Q=>ye(c.id),["stop"])},{default:l(()=>a[25]||(a[25]=[i(" Select ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})]),s("div",It,[s("div",Tt,p(O.value.length)+" model"+p(O.value.length!==1?"s":"")+" available ",1),s("div",qt,[t(e(I),{variant:"outline",onClick:a[5]||(a[5]=c=>G.value=!1)},{default:l(()=>a[26]||(a[26]=[i(" Cancel ")])),_:1})])])])]),_:1})]),_:1},8,["open"]))}}),zt={class:"space-y-3"},Nt={class:"p-4 rounded-lg border bg-muted/50"},Kt={class:"flex items-center justify-between"},Vt={class:"flex items-center gap-3"},Dt={class:"p-2 rounded-lg bg-background"},Bt={class:"flex items-center gap-2"},Ft={class:"font-medium"},Gt={class:"text-sm text-muted-foreground"},Et={key:0,class:"p-3 rounded-lg bg-green-50 dark:bg-green-950 border border-green-200 dark:border-green-800"},Rt={class:"flex items-center gap-2 text-sm text-green-700 dark:text-green-300"},Wt={key:1,class:"space-y-3"},jt={class:"space-y-2"},Ot=["value"],Qt=j({__name:"ModelSelector",props:{providerId:{},providerName:{}},setup(D){const g=D,{currentWebLLMModel:m}=X(),_=ee(),q=T(!1),h=T(""),P=b(()=>g.providerId==="gemini"),k=b(()=>g.providerId==="webllm"),d=b(()=>g.providerId==="ollama"),y=b(()=>P.value?_.settings.geminiModel:k.value?_.settings.webllmModel:d.value?_.settings.ollamaModel:""),M=b(()=>{const n=y.value;return n?P.value?n.replace("gemini-","Gemini ").replace(/-/g," ").replace(/\b\w/g,o=>o.toUpperCase()):k.value?n.replace(/-/g," ").replace(/q\d+f\d+_\d+/,"").replace(/MLC$/,"").trim():n:"No model selected"}),U=b(()=>y.value?k.value?y.value===m.value?{text:"Loaded & Ready",variant:"default"}:{text:"Selected",variant:"secondary"}:{text:"Selected",variant:"default"}:{text:"Not selected",variant:"outline"}),L=()=>{q.value=!0},z=n=>{h.value=n,C.success(`Model changed to ${n}`)};return te(()=>{P.value?h.value=_.settings.geminiModel||"gemini-1.5-pro":k.value?h.value=_.settings.webllmModel||"":d.value&&(h.value=_.settings.ollamaModel||"llama2")}),he(()=>g.providerId,()=>{P.value?h.value=_.settings.geminiModel||"gemini-1.5-pro":k.value?h.value=_.settings.webllmModel||"":d.value&&(h.value=_.settings.ollamaModel||"llama2")}),(n,o)=>(r(),v(e(fe),null,{default:l(()=>[t(e(ue),null,{default:l(()=>[t(e(me),{class:"flex items-center gap-2"},{default:l(()=>[(r(),v(Y(P.value?e(W):k.value?e(ie):e(_e)),{class:"h-5 w-5"})),i(" "+p(n.providerName)+" Model ",1)]),_:1}),t(e(ce),null,{default:l(()=>[i(" Configure the AI model for "+p(n.providerName),1)]),_:1})]),_:1}),t(e(ve),{class:"space-y-4"},{default:l(()=>[s("div",zt,[t(e(B),null,{default:l(()=>o[2]||(o[2]=[i("Current Model")])),_:1}),s("div",Nt,[s("div",Kt,[s("div",Vt,[s("div",Dt,[(r(),v(Y(P.value?e(W):k.value?e(ie):e(_e)),{class:"h-4 w-4"}))]),s("div",null,[s("div",Bt,[s("span",Ft,p(M.value),1),t(e(F),{variant:U.value.variant,class:"text-xs"},{default:l(()=>[i(p(U.value.text),1)]),_:1},8,["variant"])]),s("div",Gt,p(y.value||"No model selected"),1)])]),t(e(I),{onClick:L,variant:"outline",size:"sm"},{default:l(()=>[t(e(We),{class:"w-4 h-4 mr-1"}),i(" "+p(y.value?"Change Model":"Select Model"),1)]),_:1})])])]),k.value&&e(m)?(r(),S("div",Et,[s("div",Rt,[t(e(Me),{class:"h-4 w-4"}),s("span",null,[s("strong",null,p(e(m)),1),o[3]||(o[3]=i(" is loaded and ready to use"))])])])):w("",!0),d.value?(r(),S("div",Wt,[t(e(B),null,{default:l(()=>o[4]||(o[4]=[i("Custom Model Name")])),_:1}),s("div",jt,[s("input",{value:y.value,onInput:o[0]||(o[0]=u=>e(_).updateSettings({ollamaModel:u.target.value})),placeholder:"e.g., llama2, codellama, mistral",class:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50"},null,40,Ot),o[5]||(o[5]=s("p",{class:"text-xs text-muted-foreground"}," Enter the name of a model installed on your Ollama server ",-1))])])):w("",!0)]),_:1}),t(Ut,{open:q.value,"onUpdate:open":o[1]||(o[1]=u=>q.value=u),"provider-id":n.providerId,"provider-name":n.providerName,onModelSelected:z},null,8,["open","provider-id","provider-name"])]),_:1}))}}),Ht={class:"space-y-3"},Zt={class:"flex items-center gap-2"},Jt={class:"text-sm text-muted-foreground"},Yt={class:"text-sm text-muted-foreground"},Xt={class:"space-y-3"},es={class:"flex items-center gap-2"},ts={class:"text-sm text-muted-foreground"},ss={class:"text-sm text-muted-foreground"},ls={class:"space-y-3"},as={class:"flex items-center gap-2"},os={class:"text-sm text-muted-foreground"},rs={class:"text-sm text-muted-foreground"},is={class:"space-y-3"},ns=j({__name:"GenerationSettings",props:{temperature:{},maxTokens:{},requestTimeout:{},customPrompt:{}},emits:["update:temperature","update:maxTokens","update:requestTimeout","update:customPrompt"],setup(D,{emit:g}){const m=D,_=g,q=b(()=>m.temperature<=.3?"Very focused and deterministic responses":m.temperature<=.7?"Balanced creativity and consistency":m.temperature<=1.2?"Creative and varied responses":"Highly creative and unpredictable responses"),h=b(()=>m.maxTokens<=512?"Short responses, good for quick answers":m.maxTokens<=2048?"Medium responses, suitable for most tasks":m.maxTokens<=4096?"Long responses, good for detailed explanations":"Very long responses, suitable for complex tasks"),P=b(()=>m.requestTimeout<=15?"Quick timeout, may fail on complex requests":m.requestTimeout<=30?"Standard timeout, good for most requests":m.requestTimeout<=60?"Extended timeout, good for complex requests":"Very long timeout, may cause slow user experience");return(k,d)=>(r(),v(e(fe),null,{default:l(()=>[t(e(ue),null,{default:l(()=>[t(e(me),{class:"flex items-center gap-2"},{default:l(()=>[t(e(ne),{class:"h-5 w-5"}),d[4]||(d[4]=i(" Generation Settings "))]),_:1}),t(e(ce),null,{default:l(()=>d[5]||(d[5]=[i(" Fine-tune how AI models generate responses ")])),_:1})]),_:1}),t(e(ve),{class:"space-y-6"},{default:l(()=>[s("div",Ht,[s("div",Zt,[t(e(de),{class:"h-4 w-4"}),t(e(B),null,{default:l(()=>d[6]||(d[6]=[i("Temperature")])),_:1}),s("span",Jt,"("+p(m.temperature)+")",1)]),t(oe,{label:"Temperature","model-value":[m.temperature],min:0,max:2,step:.1,"onUpdate:modelValue":d[0]||(d[0]=y=>_("update:temperature",y[0]))},null,8,["model-value"]),s("p",Yt,p(q.value),1),d[7]||(d[7]=s("div",{class:"flex justify-between text-xs text-muted-foreground"},[s("span",null,"Focused"),s("span",null,"Balanced"),s("span",null,"Creative")],-1))]),s("div",Xt,[s("div",es,[t(e(ne),{class:"h-4 w-4"}),t(e(B),null,{default:l(()=>d[8]||(d[8]=[i("Max Tokens")])),_:1}),s("span",ts,"("+p(m.maxTokens.toLocaleString())+")",1)]),t(oe,{label:"Max Tokens","model-value":[m.maxTokens],min:256,max:8192,step:256,"onUpdate:modelValue":d[1]||(d[1]=y=>_("update:maxTokens",y[0]))},null,8,["model-value"]),s("p",ss,p(h.value),1),d[9]||(d[9]=s("div",{class:"flex justify-between text-xs text-muted-foreground"},[s("span",null,"Short"),s("span",null,"Medium"),s("span",null,"Long"),s("span",null,"Very Long")],-1))]),s("div",ls,[s("div",as,[t(e(je),{class:"h-4 w-4"}),t(e(B),null,{default:l(()=>d[10]||(d[10]=[i("Request Timeout")])),_:1}),s("span",os,"("+p(m.requestTimeout)+"s)",1)]),t(oe,{label:"Request Timeout","model-value":[m.requestTimeout],min:10,max:120,step:5,"onUpdate:modelValue":d[2]||(d[2]=y=>_("update:requestTimeout",y[0]))},null,8,["model-value"]),s("p",rs,p(P.value),1),d[11]||(d[11]=s("div",{class:"flex justify-between text-xs text-muted-foreground"},[s("span",null,"Quick"),s("span",null,"Standard"),s("span",null,"Extended"),s("span",null,"Very Long")],-1))]),s("div",is,[t(e(B),null,{default:l(()=>d[12]||(d[12]=[i("System Prompt")])),_:1}),t(e(Oe),{value:m.customPrompt,placeholder:"You are a helpful assistant...",class:"min-h-[100px] resize-none",onInput:d[3]||(d[3]=y=>_("update:customPrompt",y.target.value))},null,8,["value"]),d[13]||(d[13]=s("p",{class:"text-sm text-muted-foreground"}," This prompt will be sent with every request to guide the AI's behavior and personality. ",-1))])]),_:1})]),_:1}))}}),ds={class:"space-y-6"},us={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},ms={class:"text-center p-4 bg-blue-50 dark:bg-blue-950 rounded-lg"},cs={class:"text-2xl font-bold text-blue-600"},vs={class:"text-center p-4 bg-green-50 dark:bg-green-950 rounded-lg"},ps={class:"text-2xl font-bold text-green-600"},fs={class:"text-center p-4 bg-purple-50 dark:bg-purple-950 rounded-lg"},gs={class:"text-2xl font-bold text-purple-600"},ys={class:"text-center p-4 bg-amber-50 dark:bg-amber-950 rounded-lg"},xs={class:"text-2xl font-bold text-amber-600 truncate"},_s={class:"grid gap-6"},bs={key:0,class:"space-y-6"},ks={key:1,class:"text-center py-8 text-muted-foreground"},ws={class:"space-y-6"},$s={class:"flex items-center justify-between"},Ps=j({__name:"UnifiedAISettings",setup(D){const g=ee(),{initialize:m,availableProviders:_,selectProvider:q}=X(),h=T("providers"),P=T(!1),k=b(()=>[{id:"gemini",name:"Google Gemini",icon:W,description:"Google's most capable AI model with excellent reasoning capabilities",requiresApiKey:!0,setupUrl:"https://aistudio.google.com/app/apikey",features:["Multimodal","Long Context","Function Calling","Fast Response"]},{id:"webllm",name:"WebLLM",icon:Qe,description:"Privacy-focused AI that runs entirely in your browser",requiresApiKey:!1,setupUrl:"https://webllm.mlc.ai/",features:["Local Processing","Complete Privacy","No API Costs","Offline Usage"]},{id:"ollama",name:"Ollama",icon:He,description:"Run large language models locally on your machine",requiresApiKey:!1,setupUrl:"https://ollama.ai/",features:["Local Hosting","Custom Models","Privacy","High Performance"]}]),d=b(()=>k.value.find(n=>n.id===g.settings.preferredProviderId)),y=b(()=>k.value.filter(n=>n.requiresApiKey?!!g.getApiKey(n.id):!0).length);b(()=>y.value>0);const M=b(()=>{var n;return{totalProviders:k.value.length,configuredProviders:y.value,availableProviders:_.value.length,selectedProvider:((n=d.value)==null?void 0:n.name)||"None"}}),U=async n=>{var o;try{g.setPreferredProvider(n),await q(n),C.success(`Switched to ${(o=k.value.find(u=>u.id===n))==null?void 0:o.name}`)}catch(u){C.error("Failed to switch provider"),console.error("Provider selection error:",u)}},L=(n,o)=>{g.setApiKey(n,o),C.success("API key updated")},z=()=>{g.updateSettings({preferredProviderId:"gemini",apiKeys:{},autoSelectProvider:!0,requestTimeout:30,maxTokens:2048,temperature:.7,customPrompt:"",geminiModel:"gemini-1.5-pro",geminiSafetyThreshold:"BLOCK_MEDIUM_AND_ABOVE",ollamaServerUrl:"http://localhost:11434",ollamaModel:"llama2",webllmModel:"",webllmDefaultModel:"",webllmAutoLoad:!0,webllmAutoLoadStrategy:"smallest",sidebarWidth:350}),C.success("AI settings reset to defaults")};return te(async()=>{try{await m(),P.value=!0}catch(n){console.error("Failed to initialize AI providers:",n),C.error("Failed to initialize AI providers")}}),(n,o)=>(r(),S("div",ds,[t(J,{title:"AI Assistant Overview",description:"Current AI configuration and quick stats",icon:e(Ze)},{default:l(()=>[t(Z,{title:"Configuration Status",description:"Overview of your AI setup"},{default:l(()=>[s("div",us,[s("div",ms,[s("div",cs,p(M.value.totalProviders),1),o[6]||(o[6]=s("div",{class:"text-sm text-muted-foreground"},"Total Providers",-1))]),s("div",vs,[s("div",ps,p(M.value.configuredProviders),1),o[7]||(o[7]=s("div",{class:"text-sm text-muted-foreground"},"Configured",-1))]),s("div",fs,[s("div",gs,p(M.value.availableProviders),1),o[8]||(o[8]=s("div",{class:"text-sm text-muted-foreground"},"Available",-1))]),s("div",ys,[s("div",xs,p(M.value.selectedProvider),1),o[9]||(o[9]=s("div",{class:"text-sm text-muted-foreground"},"Active Provider",-1))])])]),_:1})]),_:1},8,["icon"]),t(e(Ye),{modelValue:h.value,"onUpdate:modelValue":o[5]||(o[5]=u=>h.value=u),class:"w-full"},{default:l(()=>[t(e(Je),{class:"grid w-full grid-cols-3"},{default:l(()=>[t(e(se),{value:"providers"},{default:l(()=>[t(e(de),{class:"mr-2 h-4 w-4"}),o[10]||(o[10]=i(" Providers "))]),_:1}),t(e(se),{value:"models"},{default:l(()=>[t(e(le),{class:"mr-2 h-4 w-4"}),o[11]||(o[11]=i(" Models "))]),_:1}),t(e(se),{value:"generation"},{default:l(()=>[t(e(ne),{class:"mr-2 h-4 w-4"}),o[12]||(o[12]=i(" Generation "))]),_:1})]),_:1}),t(e(ae),{value:"providers"},{default:l(()=>[t(J,{title:"AI Providers",description:"Configure and manage your AI service providers",icon:e(de)},{default:l(()=>[t(Z,{title:"Auto-Selection",description:"Provider fallback and automatic selection"},{default:l(()=>[t(Xe,{label:"Auto-Select Best Provider",description:"Automatically choose the best available provider",help:"Falls back to configured providers based on availability","model-value":e(g).settings.autoSelectProvider??!0,"onUpdate:modelValue":o[0]||(o[0]=u=>e(g).updateSettings({autoSelectProvider:u}))},null,8,["model-value"])]),_:1}),t(Z,{title:"Available Providers",description:"Set up and configure AI service providers"},{default:l(()=>[s("div",_s,[(r(!0),S(R,null,pe(k.value,u=>(r(),v(vt,{key:u.id,"provider-id":u.id,"provider-name":u.name,icon:u.icon,description:u.description,"requires-api-key":u.requiresApiKey,"setup-url":u.setupUrl,features:u.features,onSelect:U,onUpdateApiKey:L},null,8,["provider-id","provider-name","icon","description","requires-api-key","setup-url","features"]))),128))])]),_:1})]),_:1},8,["icon"])]),_:1}),t(e(ae),{value:"models"},{default:l(()=>[t(J,{title:"Model Configuration",description:"Configure models for your selected provider",icon:e(le)},{default:l(()=>[d.value?(r(),S("div",bs,[t(Qt,{"provider-id":d.value.id,"provider-name":d.value.name},null,8,["provider-id","provider-name"])])):(r(),S("div",ks,[t(e(le),{class:"mx-auto h-12 w-12 mb-4 opacity-50"}),o[13]||(o[13]=s("p",{class:"text-lg font-medium"},"No Provider Selected",-1)),o[14]||(o[14]=s("p",{class:"text-sm"},"Please select a provider in the Providers tab to configure models.",-1))]))]),_:1},8,["icon"])]),_:1}),t(e(ae),{value:"generation"},{default:l(()=>[s("div",ws,[t(ns,{temperature:e(g).settings.temperature,"max-tokens":e(g).settings.maxTokens,"request-timeout":e(g).settings.requestTimeout||30,"custom-prompt":e(g).settings.customPrompt,"onUpdate:temperature":o[1]||(o[1]=u=>e(g).updateSettings({temperature:u})),"onUpdate:maxTokens":o[2]||(o[2]=u=>e(g).updateSettings({maxTokens:u})),"onUpdate:requestTimeout":o[3]||(o[3]=u=>e(g).updateSettings({requestTimeout:u})),"onUpdate:customPrompt":o[4]||(o[4]=u=>e(g).updateSettings({customPrompt:u}))},null,8,["temperature","max-tokens","request-timeout","custom-prompt"]),t(J,{title:"Reset Settings",description:"Restore AI settings to their default values",icon:e(be)},{default:l(()=>[t(Z,{title:"Reset to Defaults",description:"This will restore all AI settings to their original values"},{default:l(()=>[s("div",$s,[o[16]||(o[16]=s("div",null,[s("div",{class:"text-sm font-medium"},"Reset All AI Settings"),s("div",{class:"text-sm text-muted-foreground"},"This will reset providers, models, generation settings, and API keys")],-1)),t(e(I),{onClick:z,variant:"outline",class:"gap-2"},{default:l(()=>[t(e(be),{class:"h-4 w-4"}),o[15]||(o[15]=i(" Reset to Defaults "))]),_:1})])]),_:1})]),_:1},8,["icon"])])]),_:1})]),_:1},8,["modelValue"])]))}});export{Ps as default};
