import{c as Ve,d as fe,d7 as Xe,a as et,q as y,d8 as tt,d9 as st,b as O,V as b,e as o,o as d,w as f,r as Le,aF as lt,n as ot,g as at,c6 as nt,O as it,a8 as rt,s as dt,P as C,bg as Ce,ac as ut,cJ as De,v as $e,x as ne,az as V,Q as ct,R as u,k as t,S as w,aq as T,i,E as m,L as r,da as ft,as as Q,cu as H,K as mt,J as _,bK as ie,bL as re,db as Te,ae as de,Y as F,ad as ue,af as vt,bM as pt,ah as ht,ck as gt,bw as xt,aZ as yt,b6 as bt,aQ as Y,aR as Me,c0 as wt,aB as _t,cP as kt,cO as Ct,cQ as Dt,cS as $t,cT as Tt,t as ce}from"./index-DIg-grGt.js";import{_ as Ae}from"./CardFooter.vue_vue_type_script_setup_true_lang-BDnz04yy.js";import{T as se,a as Se}from"./thumbs-up-BwpfAKH6.js";/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=Ve("CalendarDaysIcon",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=Ve("CloudDownloadIcon",[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]]);var St=fe({__name:"AvatarFallback",props:{delayMs:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(K){const A=K,L=Xe();et();const U=y(A.delayMs===void 0);return tt(P=>{if(A.delayMs&&st){const x=window.setTimeout(()=>{U.value=!0},A.delayMs);P(()=>{window.clearTimeout(x)})}}),(P,x)=>U.value&&o(L).imageLoadingStatus.value!=="loaded"?(d(),O(o(lt),{key:0,"as-child":P.asChild,as:P.as},{default:f(()=>[Le(P.$slots,"default")]),_:3},8,["as-child","as"])):b("v-if",!0)}}),Vt=St;const Lt=fe({__name:"AvatarFallback",props:{delayMs:{},asChild:{type:Boolean},as:{}},setup(K){const A=K;return(L,U)=>(d(),O(o(Vt),ot(at(A)),{default:f(()=>[Le(L.$slots,"default")]),_:3},16))}}),Pt={class:"container mx-auto py-8 px-4 overflow-auto"},Nt={class:"mb-8"},jt={class:"bg-card border rounded-lg shadow-sm overflow-hidden"},Ft={class:"h-32 bg-gradient-to-r from-primary/10 to-primary/5 flex items-center justify-center"},Ut={class:"opacity-10"},Et={class:"grid grid-cols-6 gap-2"},It={class:"flex flex-col md:flex-row px-6 py-5 items-start md:items-end gap-4 -mt-12"},Rt=["src","alt"],zt={class:"flex-1"},Bt={class:"flex flex-col md:flex-row md:items-end justify-between gap-4"},Ot={class:"text-3xl font-bold"},qt={class:"text-muted-foreground"},Wt={key:0,class:"font-medium"},Yt={class:"flex flex-wrap gap-x-6 gap-y-2 text-sm"},Gt={class:"flex items-center gap-1.5"},Qt={class:"flex items-center gap-1.5"},Ht={class:"flex items-center gap-1.5"},Kt={class:"flex items-center gap-1.5"},Jt={key:0,class:"flex justify-center items-center h-64"},Zt={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-6 text-center"},Xt={class:"text-red-600 text-xl font-semibold mb-2"},es={key:2,class:"bg-muted/50 border rounded-lg p-8 text-center"},ts={key:3,class:"space-y-6"},ss={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},ls={class:"lg:col-span-1"},os={class:"space-y-3"},as={class:"grid grid-cols-2 gap-2"},ns={class:"bg-muted/30 rounded-md p-2.5 flex flex-col"},is={class:"flex items-center justify-between"},rs={class:"mt-1 flex items-end justify-between"},ds={class:"text-lg font-bold"},us={class:"text-xs text-muted-foreground"},cs={class:"bg-muted/30 rounded-md p-2.5 flex flex-col"},fs={class:"flex items-center justify-between"},ms={class:"mt-1 flex flex-col text-xs"},vs={class:"grid grid-cols-3 gap-1"},ps={class:"font-medium col-span-2"},hs={class:"grid grid-cols-3 gap-1"},gs={class:"font-medium col-span-2"},xs={class:"grid grid-cols-3 gap-1"},ys={class:"font-medium col-span-2"},bs={class:"bg-muted/30 rounded-md p-2.5"},ws={class:"flex items-center justify-between mb-1"},_s={key:0,class:"text-xs font-medium line-clamp-1"},ks={key:1,class:"text-xs text-muted-foreground"},Cs={key:2,class:"text-xs italic text-muted-foreground"},Ds={class:"bg-muted/30 rounded-md p-2.5"},$s={class:"flex items-center justify-between mb-1"},Ts={class:"grid grid-cols-2 gap-2"},Ms={class:"flex items-center gap-1"},As={class:"text-xs font-medium"},Ss={key:0,class:"text-xs text-muted-foreground mt-0.5 line-clamp-1"},Vs={class:"flex items-center gap-1"},Ls={class:"text-xs font-medium"},Ps={key:0,class:"text-xs text-muted-foreground mt-0.5"},Ns={class:"bg-muted/30 rounded-md p-2.5"},js={class:"flex items-center justify-between mb-1"},Fs={class:"flex items-center gap-1"},Us={class:"text-xs font-medium"},Es={key:0,class:"text-xs text-muted-foreground mt-1 line-clamp-1"},Is={class:"bg-muted/30 rounded-md p-2.5"},Rs={class:"flex items-center justify-between mb-2"},zs={class:"grid grid-cols-8 gap-1 text-center text-[9px]"},Bs={class:"text-right pr-1 text-muted-foreground"},Os=["title"],qs={class:"lg:col-span-2"},Ws={class:"flex items-center justify-between"},Ys={class:"flex items-center gap-2"},Gs={class:"relative"},Qs={class:"hidden md:inline"},Hs={key:0,class:"absolute right-0 mt-1 w-40 bg-card border rounded-md shadow-lg z-50"},Ks={class:"p-1"},Js=["onClick"],Zs={class:"flex items-center border rounded-md overflow-hidden"},Xs={class:"flex flex-col md:flex-row items-center justify-between gap-4 mb-4"},el={class:"relative w-full md:w-auto"},tl={class:"border rounded-md overflow-hidden flex"},sl={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ll=["onClick","aria-label"],ol={class:"flex flex-col gap-1 text-sm"},al={class:"text-sm text-muted-foreground flex justify-between"},nl={key:0,class:"flex items-center"},il={class:"text-sm text-muted-foreground"},rl={key:0,class:"flex flex-wrap gap-1 mt-2"},dl={key:1,class:"overflow-x-auto"},ul={class:"w-full border-collapse"},cl=["onClick"],fl={class:"py-3 px-4"},ml=["title"],vl={key:0,class:"flex flex-wrap gap-1 mt-1"},pl={class:"py-3 px-4 text-sm text-muted-foreground"},hl={class:"py-3 px-4 text-sm text-muted-foreground"},gl={class:"py-3 px-4 text-sm text-center text-muted-foreground"},xl={class:"flex items-center justify-center"},yl={class:"py-3 px-4 text-sm text-center text-muted-foreground"},bl={class:"flex items-center justify-center gap-2"},wl={class:"flex items-center"},_l={class:"flex items-center"},kl={class:"py-3 px-4 text-sm text-center text-muted-foreground"},Cl={class:"flex items-center justify-center"},Dl={class:"flex justify-end gap-2"},$l={class:"flex items-center gap-2"},Tl=["value"],Ml={class:"flex items-center gap-2"},Al={class:"flex items-center gap-1"},Sl={key:0,class:"text-center py-12"},Vl={class:"flex gap-2 justify-center mt-4"},Ll={key:0,class:"fixed inset-0 bg-background/80 flex items-center justify-center z-50"},Pl={class:"bg-card border rounded-lg shadow-lg max-w-md w-full p-6"},Nl={class:"flex justify-end gap-2"},El=fe({__name:"UserPublishedView",setup(K){const A=nt(),L=it(),U=rt(),P=dt(),x=y([]),E=y(!0),N=y(null),I=y(null),q=y(""),G=y("grid"),J=y(!1),R=y(null),S=y("all"),Z=y(!1),D=y("date"),z=y("desc"),X=y(null),$=y(1),ee=y(10),Pe=[5,10,20,50],me=C(()=>{const l=($.value-1)*ee.value,e=l+ee.value;return W.value.slice(l,e)}),M=C(()=>Math.ceil(W.value.length/ee.value)),Ne=C(()=>{const l=[];if(M.value<=5)for(let s=1;s<=M.value;s++)l.push(s);else{l.push(1);let s=Math.max(2,$.value-1),n=Math.min(M.value-1,$.value+1);n-s<2&&($.value<=3?n=Math.min(3,M.value-1):s=Math.max(2,M.value-5+2)),s>2&&l.push("...");for(let c=s;c<=n;c++)l.push(c);n<M.value-1&&l.push("..."),M.value>1&&l.push(M.value)}return l}),le=l=>{l>=1&&l<=M.value&&($.value=l,window.scrollTo({top:0,behavior:"smooth"}))},je=l=>{ee.value=l,$.value=1},p=Ce({byDate:{},maxCount:0,startDate:new Date,endDate:new Date}),a=Ce({totalViews:0,mostViewed:null,averageViews:0,publishedToday:0,publishedThisWeek:0,publishedThisMonth:0,topTags:[],totalLikes:0,totalDislikes:0,mostLiked:null,likeRatio:void 0,totalClones:0,mostCloned:null}),ve=C(()=>{var l;return P.isAuthenticated&&((l=P.currentUser)==null?void 0:l.uid)===I.value});C(()=>{if(!q.value)return x.value;const l=q.value.toLowerCase();return x.value.filter(e=>e.title.toLowerCase().includes(l))});const te=C(()=>x.value.length>0?x.value[0].authorName:"Author"),Fe=C(()=>{if(!te.value)return"";const l=te.value.split(" ").filter(e=>e.length>0);return l.length>=2?`${l[0][0]}${l[l.length-1][0]}`.toUpperCase():l.length===1?l[0][0].toUpperCase():""}),j=C(()=>{const l=A.params.userTag;return typeof l=="string"?l:Array.isArray(l)?l[0]:""}),pe=C(()=>{const l=A.params.userId;return typeof l=="string"?l:Array.isArray(l)?l[0]:""});C(()=>j.value?`/@${j.value}`:`/u/${I.value}`);const Ue=async l=>{try{const e=$e(ne,"userTags",l),s=await De(e);if(s.exists()){const n=s.data();return n&&n.uid?n.uid:null}return null}catch(e){if(V.error("Error fetching user ID from tag:",e),e instanceof Error&&V.error("Error details:",{message:e.message,code:e.code,name:e.name}),(e==null?void 0:e.code)==="permission-denied")try{V.info("Attempting to fetch user tag via alternative method");const s=kt(ne,"users"),n=Ct(s,Dt("userTag","==",l),$t(1)),c=await Tt(n);if(!c.empty)return c.docs[0].id}catch(s){V.error("Fallback method also failed:",s)}return null}},Ee=l=>{const e=new Date;switch(l){case"today":const s=new Date(e.getFullYear(),e.getMonth(),e.getDate());return g=>g>=s;case"week":const n=new Date(e);return n.setDate(e.getDate()-7),g=>g>=n;case"month":const c=new Date(e);return c.setMonth(e.getMonth()-1),g=>g>=c;case"year":const h=new Date(e);return h.setFullYear(e.getFullYear()-1),g=>g>=h;default:return()=>!0}},he=l=>{const e=new Date,s=typeof l=="string"?new Date(l):l,n=e.getTime()-s.getTime(),c=Math.floor(n/1e3),h=Math.floor(c/60),g=Math.floor(h/60),v=Math.floor(g/24),k=Math.floor(v/30),B=Math.floor(v/365);return B>0?`${B} ${B===1?"year":"years"}`:k>0?`${k} ${k===1?"month":"months"}`:v>0?`${v} ${v===1?"day":"days"}`:g>0?`${g} ${g===1?"hour":"hours"}`:h>0?`${h} ${h===1?"min":"mins"}`:`${c} ${c===1?"sec":"secs"}`},W=C(()=>{let l=q.value?x.value.filter(e=>e.title.toLowerCase().includes(q.value.toLowerCase())):[...x.value];if(S.value!=="all"){const e=Ee(S.value);l=l.filter(s=>e(new Date(s.publishedAt)))}return l.sort((e,s)=>{let n=0;if(D.value==="date")n=new Date(s.publishedAt).getTime()-new Date(e.publishedAt).getTime();else if(D.value==="title")n=e.title.localeCompare(s.title);else if(D.value==="views"){const c=e.viewCount||0;n=(s.viewCount||0)-c}return z.value==="asc"?-n:n}),l}),ge=l=>{p.byDate={},p.maxCount=0;const e=new Date;p.endDate=new Date(e),p.startDate=new Date(e),p.startDate.setDate(e.getDate()-27);let s=new Date(p.startDate);for(;s<=p.endDate;){const n=oe(s);p.byDate[n]=0,s.setDate(s.getDate()+1)}l.forEach(n=>{const c=new Date(n.publishedAt);if(c>=p.startDate&&c<=p.endDate){const h=oe(c);p.byDate[h]=(p.byDate[h]||0)+1,p.byDate[h]>p.maxCount&&(p.maxCount=p.byDate[h])}})},oe=l=>`${l.getFullYear()}-${(l.getMonth()+1).toString().padStart(2,"0")}-${l.getDate().toString().padStart(2,"0")}`,Ie=()=>["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Re=C(()=>{const l=[];let e=new Date(p.startDate),s=[];const n=e.getDay();for(let c=0;c<n;c++)s.push("");for(;e<=p.endDate;){const c=oe(e);s.push(c),e.getDay()===6&&(l.push([...s]),s=[]),e.setDate(e.getDate()+1)}if(s.length>0){for(;s.length<7;)s.push("");l.push(s)}return l}),ze=l=>{if(l===0)return"bg-muted/20";const e=Math.max(p.maxCount,4);switch(Math.ceil(l/e*4)){case 1:return"bg-primary/20";case 2:return"bg-primary/40";case 3:return"bg-primary/60";case 4:return"bg-primary/80";default:return"bg-primary/20"}},Be=l=>{if(!l)return"";const e=p.byDate[l]||0,s=new Date(l),n=Y(s);return`${e} publication${e!==1?"s":""} on ${n}`},Oe=async()=>{try{E.value=!0,N.value=null;let l=I.value;if(!l){N.value="No user ID provided";return}const e=await U.getPublishedNotasByUser(l);if(x.value=e,e.length===0){E.value=!1;return}qe(e),ge(e)}catch(l){V.error("Error loading published notas:",l),N.value="Failed to load published notas"}finally{E.value=!1}},qe=l=>{a.totalViews=0,a.mostViewed=null,a.averageViews=0,a.publishedToday=0,a.publishedThisWeek=0,a.publishedThisMonth=0,a.topTags=[],a.totalLikes=0,a.totalDislikes=0,a.mostLiked=null,a.likeRatio=void 0,a.totalClones=0,a.mostCloned=null;const e=new Date,s=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=new Date(e);n.setDate(e.getDate()-7);const c=new Date(e);c.setMonth(e.getMonth()-1);const h={};l.forEach(v=>{const k=v.viewCount||0;a.totalViews+=k,(!a.mostViewed||k>(a.mostViewed.viewCount||0))&&(a.mostViewed=v);const B=new Date(v.publishedAt);B>=s&&a.publishedToday++,B>=n&&a.publishedThisWeek++,B>=c&&a.publishedThisMonth++,v.tags&&Array.isArray(v.tags)&&v.tags.forEach(ke=>{h[ke]=(h[ke]||0)+1});const we=v.likeCount||0,Ze=v.dislikeCount||0;a.totalLikes+=we,a.totalDislikes+=Ze,(!a.mostLiked||we>(a.mostLiked.likeCount||0))&&(a.mostLiked=v);const _e=v.cloneCount||0;a.totalClones+=_e,(!a.mostCloned||_e>(a.mostCloned.cloneCount||0))&&(a.mostCloned=v)}),a.averageViews=l.length>0?Math.round(a.totalViews/l.length):0,a.topTags=Object.entries(h).map(([v,k])=>({tag:v,count:k})).sort((v,k)=>k.count-v.count).slice(0,5);const g=a.totalLikes+a.totalDislikes;a.likeRatio=g>0?a.totalLikes/g:void 0,ge(l)},We=l=>{S.value=l,Z.value=!1},Ye=()=>{z.value=z.value==="asc"?"desc":"asc"},ae=l=>{D.value===l?Ye():(D.value=l,z.value="desc")},Ge=()=>{let l=`Title,Published Date,Last Updated,Views
`;W.value.forEach(c=>{const h=c.title.replace(/,/g," "),g=Y(c.publishedAt),v=Y(c.updatedAt),k=c.viewCount||0;l+=`"${h}",${g},${v},${k}
`});const e=new Blob([l],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(e),n=document.createElement("a");n.setAttribute("href",s),n.setAttribute("download",`published-notas-${Y(new Date)}.csv`),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n),ce("CSV file downloaded successfully")};ut(()=>A.params,async()=>{await xe()});const xe=async()=>{try{if(pe.value)I.value=pe.value;else if(j.value){const l=await Ue(j.value);if(l)I.value=l;else{N.value="User not found",E.value=!1;return}}else{N.value="No valid user identifier provided",E.value=!1;return}if(I.value)try{const l=await De($e(ne,"users",I.value));l.exists()&&(X.value=l.data().photoURL||null,V.log("User profile image URL:",X.value))}catch(l){V.error("Error fetching user profile image:",l)}await Oe()}catch(l){V.error("Error resolving user ID:",l),N.value="Error finding user",E.value=!1}};ct(async()=>{await xe()});const ye=l=>{j.value?L.push(`/@${j.value}/${l}`):L.push(`/p/${l}`)},be=l=>{R.value=l,J.value=!0},Qe=()=>{R.value=null,J.value=!1},He=async()=>{if(R.value)try{await U.loadNota(R.value),await U.unpublishNota(R.value),x.value=x.value.filter(l=>l.id!==R.value),ce("Nota unpublished successfully")}catch(l){V.error("Error unpublishing nota:",l),ce("Failed to unpublish nota")}finally{J.value=!1,R.value=null}},Ke=l=>{const e=l.target;q.value=e.value},Je=l=>{const e=l.target,s=parseInt(e.value,10);je(s)};return(l,e)=>(d(),u(w,null,[t("div",Pt,[t("header",Nt,[t("div",jt,[t("div",Ft,[t("div",Ut,[t("div",Et,[(d(),u(w,null,T(24,s=>t("div",{key:s,class:"h-4 w-4 rounded-sm bg-primary"})),64))])])]),t("div",It,[i(o(ft),{class:"h-24 w-24 border-4 border-card ring-2 ring-background shadow-md"},{default:f(()=>[X.value?(d(),u("img",{key:0,src:X.value,alt:te.value,class:"h-full w-full rounded-full object-cover"},null,8,Rt)):(d(),O(o(Lt),{key:1,class:"text-2xl font-bold"},{default:f(()=>[m(r(Fe.value||"A"),1)]),_:1}))]),_:1}),t("div",zt,[t("div",Bt,[t("div",null,[t("h1",Ot,r(te.value),1),t("p",qt,[j.value?(d(),u("span",Wt,"@"+r(j.value),1)):b("",!0)])]),t("div",Yt,[t("div",Gt,[i(o(Q),{class:"h-4 w-4 text-muted-foreground"}),t("span",null,[t("strong",null,r(x.value.length),1),e[13]||(e[13]=m(" Publications"))])]),t("div",Qt,[i(o(H),{class:"h-4 w-4 text-muted-foreground"}),t("span",null,[t("strong",null,r(a.totalViews),1),e[14]||(e[14]=m(" Views"))])]),t("div",Ht,[i(o(se),{class:"h-4 w-4 text-muted-foreground"}),t("span",null,[t("strong",null,r(a.totalLikes),1),e[15]||(e[15]=m(" Likes"))])]),t("div",Kt,[i(o(Q),{class:"h-4 w-4 text-muted-foreground"}),t("span",null,[t("strong",null,r(a.totalClones),1),e[16]||(e[16]=m(" Clones"))])])])])])])])]),E.value?(d(),u("div",Jt,[i(o(mt),{class:"w-10 h-10 rounded-full"})])):N.value?(d(),u("div",Zt,[t("h2",Xt,r(N.value),1),e[18]||(e[18]=t("p",{class:"text-gray-600 mb-4"},"There was an error loading the published notas.",-1)),i(o(_),{onClick:e[0]||(e[0]=s=>o(L).push("/"))},{default:f(()=>e[17]||(e[17]=[m("Go Home")])),_:1})])):x.value.length===0?(d(),u("div",es,[e[20]||(e[20]=t("h2",{class:"text-xl font-semibold mb-2"},"No Published Notas",-1)),e[21]||(e[21]=t("p",{class:"text-muted-foreground mb-4"},"This user hasn't published any notas yet.",-1)),i(o(_),{onClick:e[1]||(e[1]=s=>o(L).push("/"))},{default:f(()=>e[19]||(e[19]=[m("Go Home")])),_:1})])):x.value.length>0?(d(),u("div",ts,[t("div",ss,[t("div",ls,[i(o(ue),{class:"overflow-hidden h-full"},{default:f(()=>[i(o(ie),{class:"bg-card border-b px-4 py-3"},{default:f(()=>[i(o(re),{class:"text-base flex items-center gap-2"},{default:f(()=>[i(o(Te),{class:"h-4 w-4"}),e[22]||(e[22]=m(" Publication Statistics "))]),_:1})]),_:1}),i(o(de),{class:"p-3"},{default:f(()=>[t("div",os,[t("div",as,[t("div",ns,[t("div",is,[e[23]||(e[23]=t("p",{class:"text-xs font-medium text-muted-foreground"},"Total Views",-1)),i(o(H),{class:"h-3.5 w-3.5 text-muted-foreground"})]),t("div",rs,[t("p",ds,r(a.totalViews),1),t("p",us,"Avg: "+r(a.averageViews),1)])]),t("div",cs,[t("div",fs,[e[24]||(e[24]=t("p",{class:"text-xs font-medium text-muted-foreground"},"Publications",-1)),i(o(Mt),{class:"h-3.5 w-3.5 text-muted-foreground"})]),t("div",ms,[t("div",vs,[e[25]||(e[25]=t("span",{class:"text-muted-foreground"},"Today:",-1)),t("span",ps,r(a.publishedToday),1)]),t("div",hs,[e[26]||(e[26]=t("span",{class:"text-muted-foreground"},"Week:",-1)),t("span",gs,r(a.publishedThisWeek),1)]),t("div",xs,[e[27]||(e[27]=t("span",{class:"text-muted-foreground"},"Month:",-1)),t("span",ys,r(a.publishedThisMonth),1)])])])]),t("div",bs,[t("div",ws,[e[28]||(e[28]=t("p",{class:"text-xs font-medium text-muted-foreground"},"Most Viewed",-1)),i(o(H),{class:"h-3.5 w-3.5 text-muted-foreground"})]),a.mostViewed?(d(),u("p",_s,r(a.mostViewed.title),1)):b("",!0),a.mostViewed?(d(),u("p",ks,r(a.mostViewed.viewCount||0)+" views ",1)):(d(),u("p",Cs,"No view data available"))]),t("div",Ds,[t("div",$s,[e[29]||(e[29]=t("p",{class:"text-xs font-medium text-muted-foreground"},"Engagement",-1)),i(o(se),{class:"h-3.5 w-3.5 text-muted-foreground"})]),t("div",Ts,[t("div",null,[t("div",Ms,[i(o(se),{class:"h-3 w-3 text-primary"}),t("span",As,r(a.totalLikes||0)+" Likes",1)]),a.mostLiked?(d(),u("p",Ss," Most: "+r(a.mostLiked.title),1)):b("",!0)]),t("div",null,[t("div",Vs,[i(o(Se),{class:"h-3 w-3 text-muted-foreground"}),t("span",Ls,r(a.totalDislikes||0)+" Dislikes",1)]),a.likeRatio!==void 0?(d(),u("p",Ps," Ratio: "+r(Math.round(a.likeRatio*100))+"% ",1)):b("",!0)])])]),t("div",Ns,[t("div",js,[e[30]||(e[30]=t("p",{class:"text-xs font-medium text-muted-foreground"},"Clones",-1)),i(o(Q),{class:"h-3.5 w-3.5 text-muted-foreground"})]),t("div",null,[t("div",Fs,[i(o(Q),{class:"h-3 w-3 text-primary"}),t("span",Us,r(a.totalClones||0)+" Total Clones",1)]),a.mostCloned?(d(),u("p",Es," Most cloned: "+r(a.mostCloned.title)+" ("+r(a.mostCloned.cloneCount||0)+") ",1)):b("",!0)])]),t("div",Is,[t("div",Rs,[e[31]||(e[31]=t("p",{class:"text-xs font-medium text-muted-foreground"},"Monthly Activity",-1)),i(o(Te),{class:"h-3.5 w-3.5 text-muted-foreground"})]),t("div",zs,[e[32]||(e[32]=t("div",null,null,-1)),(d(!0),u(w,null,T(Ie().slice(0,7),s=>(d(),u("div",{key:s,class:"text-muted-foreground"},r(s[0]),1))),128)),(d(!0),u(w,null,T(Re.value,(s,n)=>(d(),u(w,{key:"week-"+n},[t("div",Bs,r(n+1),1),(d(!0),u(w,null,T(s,(c,h)=>(d(),u("div",{key:"day-"+n+"-"+h,title:Be(c),class:F([ze(p.byDate[c]||0),"h-4 w-4 rounded transition-colors cursor-help"])},null,10,Os))),128))],64))),128))]),e[33]||(e[33]=t("div",{class:"flex items-center justify-end gap-1 mt-2 text-[9px]"},[t("span",{class:"text-muted-foreground"},"Less"),t("div",{class:"h-3 w-3 rounded bg-muted/20"}),t("div",{class:"h-3 w-3 rounded bg-primary/20"}),t("div",{class:"h-3 w-3 rounded bg-primary/40"}),t("div",{class:"h-3 w-3 rounded bg-primary/60"}),t("div",{class:"h-3 w-3 rounded bg-primary/80"}),t("span",{class:"text-muted-foreground"},"More")],-1))])])]),_:1})]),_:1})]),t("div",qs,[i(o(ue),{class:"overflow-hidden h-full flex flex-col"},{default:f(()=>[i(o(ie),{class:"bg-card border-b px-6"},{default:f(()=>[t("div",Ws,[t("div",null,[i(o(re),{class:"flex items-center gap-2"},{default:f(()=>[i(o(vt),{class:"h-4 w-4"}),e[34]||(e[34]=m(" Published Notas "))]),_:1}),i(o(pt),null,{default:f(()=>[m(r(W.value.length)+" public nota"+r(W.value.length>1?"s":"")+" "+r(S.value!=="all"?` (${S.value})`:""),1)]),_:1})]),t("div",Ys,[i(o(_),{variant:"outline",size:"sm",onClick:Ge,class:"hidden md:flex"},{default:f(()=>[i(o(At),{class:"mr-1 h-4 w-4"}),e[35]||(e[35]=m(" Export CSV "))]),_:1}),t("div",Gs,[i(o(_),{variant:"outline",size:"sm",onClick:e[2]||(e[2]=s=>Z.value=!Z.value),class:"gap-1"},{default:f(()=>[i(o(ht),{class:"h-4 w-4"}),t("span",Qs,r(S.value==="all"?"All time":S.value),1)]),_:1}),Z.value?(d(),u("div",Hs,[t("div",Ks,[(d(),u(w,null,T(["all","today","week","month","year"],s=>t("button",{key:s,onClick:n=>We(s),class:F(["w-full text-left px-3 py-1.5 text-sm rounded hover:bg-muted transition-colors",{"bg-muted":S.value===s}])},r(s==="all"?"All time":s),11,Js)),64))])])):b("",!0)]),t("div",Zs,[t("button",{onClick:e[3]||(e[3]=s=>ae("date")),class:F(["px-2 py-1 text-xs border-r",D.value==="date"?"bg-muted":"hover:bg-muted/50"])}," Date "+r(D.value==="date"?z.value==="desc"?"↓":"↑":""),3),t("button",{onClick:e[4]||(e[4]=s=>ae("title")),class:F(["px-2 py-1 text-xs border-r",D.value==="title"?"bg-muted":"hover:bg-muted/50"])}," Title "+r(D.value==="title"?z.value==="desc"?"↓":"↑":""),3),t("button",{onClick:e[5]||(e[5]=s=>ae("views")),class:F(["px-2 py-1 text-xs",D.value==="views"?"bg-muted":"hover:bg-muted/50"])}," Views "+r(D.value==="views"?z.value==="desc"?"↓":"↑":""),3)])])])]),_:1}),i(o(de),{class:"p-4 overflow-auto flex-1"},{default:f(()=>[t("div",Xs,[t("div",el,[i(o(gt),{class:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),i(o(xt),{type:"search",placeholder:"Search publications...",class:"pl-8 w-full md:w-[300px]",onInput:Ke})]),t("div",tl,[t("button",{onClick:e[6]||(e[6]=s=>G.value="grid"),class:F(["p-1.5 flex items-center",G.value==="grid"?"bg-muted":"hover:bg-muted/50"]),title:"Grid view"},[i(o(yt),{class:"h-4 w-4"})],2),t("button",{onClick:e[7]||(e[7]=s=>G.value="table"),class:F(["p-1.5 flex items-center",G.value==="table"?"bg-muted":"hover:bg-muted/50"]),title:"Table view"},[i(o(bt),{class:"h-4 w-4"})],2)])]),G.value==="grid"?(d(),u("div",sl,[(d(!0),u(w,null,T(me.value,s=>(d(),O(o(ue),{key:s.id,class:"flex flex-col hover:shadow-md transition-shadow"},{default:f(()=>[t("div",{class:"cursor-pointer flex-1 flex flex-col",onClick:n=>ye(s.id),role:"button","aria-label":`Open ${s.title}`},[i(o(ie),null,{default:f(()=>[i(o(re),{class:"truncate",title:s.title},{default:f(()=>[m(r(s.title),1)]),_:2},1032,["title"])]),_:2},1024),i(o(de),{class:"flex-1"},{default:f(()=>[t("div",ol,[t("p",al,[t("span",null,"Published: "+r(o(Y)(s.publishedAt)),1),s.viewCount!==void 0?(d(),u("span",nl,[i(o(H),{class:"h-3.5 w-3.5 mr-1"}),m(" "+r(s.viewCount),1)])):b("",!0)]),t("p",il," Last updated: "+r(o(Y)(s.updatedAt)),1),s.tags&&s.tags.length>0?(d(),u("div",rl,[(d(!0),u(w,null,T(s.tags,n=>(d(),u("span",{key:n,class:"px-1.5 py-0.5 text-xs rounded-full bg-muted text-muted-foreground"},r(n),1))),128))])):b("",!0)])]),_:2},1024)],8,ll),i(o(Ae),{class:"flex flex-col gap-2"},{default:f(()=>[ve.value?(d(),O(o(_),{key:0,variant:"outline",class:"w-full text-destructive hover:text-destructive hover:bg-destructive/10",onClick:n=>be(s.id)},{default:f(()=>[i(o(Me),{class:"mr-2 h-4 w-4"}),e[36]||(e[36]=m(" Unpublish "))]),_:2},1032,["onClick"])):b("",!0)]),_:2},1024)]),_:2},1024))),128))])):(d(),u("div",dl,[t("table",ul,[e[38]||(e[38]=t("thead",null,[t("tr",{class:"border-b"},[t("th",{class:"text-left py-3 px-4 font-medium"},"Title"),t("th",{class:"text-left py-3 px-4 font-medium"},"Published"),t("th",{class:"text-left py-3 px-4 font-medium"},"Updated"),t("th",{class:"text-center py-3 px-4 font-medium"},"Views"),t("th",{class:"text-center py-3 px-4 font-medium"},"Likes"),t("th",{class:"text-center py-3 px-4 font-medium"},"Clones"),t("th",{class:"text-right py-3 px-4 font-medium"},"Actions")])],-1)),t("tbody",null,[(d(!0),u(w,null,T(me.value,s=>(d(),u("tr",{key:s.id,class:"border-b hover:bg-muted/50 transition-colors cursor-pointer",onClick:n=>ye(s.id)},[t("td",fl,[t("div",{class:"font-medium max-w-[250px] truncate",title:s.title},r(s.title),9,ml),s.tags&&s.tags.length>0?(d(),u("div",vl,[(d(!0),u(w,null,T(s.tags,n=>(d(),u("span",{key:n,class:"px-1.5 py-0.5 text-xs rounded-full bg-muted text-muted-foreground"},r(n),1))),128))])):b("",!0)]),t("td",pl,r(he(s.publishedAt)),1),t("td",hl,r(he(s.updatedAt)),1),t("td",gl,[t("span",xl,[i(o(H),{class:"mr-1 h-3.5 w-3.5"}),m(" "+r(s.viewCount||0),1)])]),t("td",yl,[t("div",bl,[t("span",wl,[i(o(se),{class:"mr-1 h-3 w-3 text-primary"}),m(" "+r(s.likeCount||0),1)]),t("span",_l,[i(o(Se),{class:"mr-1 h-3 w-3"}),m(" "+r(s.dislikeCount||0),1)])])]),t("td",kl,[t("span",Cl,[i(o(Q),{class:"mr-1 h-3.5 w-3.5"}),m(" "+r(s.cloneCount||0),1)])]),t("td",{class:"py-3 px-4 text-right",onClick:e[8]||(e[8]=wt(()=>{},["stop"]))},[t("div",Dl,[ve.value?(d(),O(o(_),{key:0,size:"sm",variant:"outline",class:"text-destructive hover:text-destructive hover:bg-destructive/10",onClick:n=>be(s.id)},{default:f(()=>[i(o(Me),{class:"mr-1 h-4 w-4"}),e[37]||(e[37]=m(" Unpublish "))]),_:2},1032,["onClick"])):b("",!0)])])],8,cl))),128))])])]))]),_:1}),i(o(Ae),{class:"flex items-center justify-between px-6 py-4"},{default:f(()=>[t("div",$l,[e[39]||(e[39]=t("span",{class:"text-sm text-muted-foreground"},"Rows per page:",-1)),t("select",{onChange:Je,class:"text-sm border rounded-md px-2 py-1"},[(d(),u(w,null,T(Pe,s=>t("option",{key:s,value:s},r(s),9,Tl)),64))],32)]),t("div",Ml,[i(o(_),{variant:"outline",size:"sm",disabled:$.value===1,onClick:e[9]||(e[9]=s=>le($.value-1))},{default:f(()=>e[40]||(e[40]=[m(" Previous ")])),_:1},8,["disabled"]),t("div",Al,[(d(!0),u(w,null,T(Ne.value,s=>(d(),O(o(_),{key:s,variant:"outline",size:"sm",class:F({"bg-primary/10":$.value===s}),onClick:n=>typeof s=="number"?le(s):null,disabled:typeof s!="number"},{default:f(()=>[m(r(s),1)]),_:2},1032,["class","onClick","disabled"]))),128))]),i(o(_),{variant:"outline",size:"sm",disabled:$.value===M.value,onClick:e[10]||(e[10]=s=>le($.value+1))},{default:f(()=>e[41]||(e[41]=[m(" Next ")])),_:1},8,["disabled"])])]),_:1})]),_:1})])]),x.value.length>0&&W.value.length===0?(d(),u("div",Sl,[i(o(_t),{class:"mx-auto h-12 w-12 text-muted-foreground"}),e[44]||(e[44]=t("h3",{class:"mt-4 text-lg font-semibold"},"No matching notas",-1)),e[45]||(e[45]=t("p",{class:"text-muted-foreground"},"Try adjusting your search query or filters.",-1)),t("div",Vl,[i(o(_),{variant:"outline",onClick:e[11]||(e[11]=s=>q.value="")},{default:f(()=>e[42]||(e[42]=[m("Clear Search")])),_:1}),i(o(_),{variant:"outline",onClick:e[12]||(e[12]=s=>S.value="all")},{default:f(()=>e[43]||(e[43]=[m("Clear Filters")])),_:1})])])):b("",!0)])):b("",!0)]),J.value?(d(),u("div",Ll,[t("div",Pl,[e[48]||(e[48]=t("h2",{class:"text-xl font-semibold mb-4"},"Unpublish Nota",-1)),e[49]||(e[49]=t("p",{class:"mb-6"}," Are you sure you want to unpublish this nota? It will no longer be accessible to the public, but you can publish it again later. ",-1)),t("div",Nl,[i(o(_),{variant:"outline",onClick:Qe},{default:f(()=>e[46]||(e[46]=[m("Cancel")])),_:1}),i(o(_),{variant:"destructive",onClick:He},{default:f(()=>e[47]||(e[47]=[m("Unpublish")])),_:1})])])])):b("",!0)],64))}});export{El as default};
