import{d as de,q as m,ab as g,P as O,dZ as U,d_ as V,R as c,o as i,i as s,w as l,e as t,bJ as $,bK as B,E as d,bL as R,ad as C,k as a,V as f,b0 as p,ai as j,ak as T,al as z,b as H,aU as Y,L as P,am as q,an as v,dg as A,ct as ne,cu as re,$ as Z,az as L,aB as J,J as K,ac as D,d3 as N,Z as ie,t as u,aQ as I}from"./index-dr6P1g6z.js";import{u as ue}from"./useStorageMode-CuvskcQP.js";import{u as ce}from"./SettingsView-fxxGccIO.js";import{H as me}from"./hard-drive-xkdud-Oj.js";const ge={class:"space-y-6 max-w-3xl"},fe={class:"space-y-3"},pe={class:"flex items-center gap-2"},ve={class:"flex items-center gap-2"},be={class:"flex items-center gap-2"},xe={key:0,class:"text-xs text-muted-foreground"},ye={class:"text-sm text-muted-foreground"},_e={key:0,class:"space-y-3 pt-2 border-t"},he={class:"flex items-center justify-between"},ke={class:"space-y-0.5"},we={key:0,class:"flex items-center gap-2 p-2 bg-muted rounded-md"},Se={class:"flex items-start gap-2 p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg"},Ce={key:1,class:"flex items-start gap-2 p-3 bg-amber-50 dark:bg-amber-950/20 rounded-lg"},Ae={key:2,class:"flex items-center justify-between p-3 bg-green-50 dark:bg-green-950/20 rounded-lg"},De={class:"flex items-start gap-2"},Fe={class:"flex items-center justify-between"},Me={class:"space-y-0.5"},Ee={class:"space-y-3"},$e={class:"flex items-center justify-between"},Be={class:"space-y-0.5"},Re={key:0,class:"space-y-2 pl-4 border-l-2"},Pe={class:"flex items-center justify-between"},Le={class:"space-y-0.5"},Ne={class:"flex items-start gap-3"},je=de({__name:"UnifiedAdvancedSettings",setup(Ie,{expose:Q}){const n=ce(),{storageMode:y,autoWatch:b,isFilesystemSupported:_,isFilesystemMode:F,isWatchingFiles:h,getModeDescription:G,switchToFilesystem:X,switchToIndexedDB:ee}=ue(),M=m(!1),E=m(!1);g(()=>n.advancedSettings.storageMode,o=>{o!==y.value&&(y.value=o)},{immediate:!0}),g(()=>n.advancedSettings.filesystemAutoWatch,o=>{o!==b.value&&(b.value=o)},{immediate:!0});const k=m(n.advancedSettings.enableDebugMode),x=m(n.advancedSettings.enableLogging),w=m(n.advancedSettings.logLevel),S=m(n.advancedSettings.clearCacheOnStartup);g(k,o=>{n.updateCategory("advanced",{enableDebugMode:o})}),g(x,o=>{n.updateCategory("advanced",{enableLogging:o})}),g(w,o=>{n.updateCategory("advanced",{logLevel:o})}),g(S,o=>{n.updateCategory("advanced",{clearCacheOnStartup:o})});const te=async o=>{if(o!==y.value){M.value=!0;try{if(o==="filesystem"){if(!_.value){u.error("File System Access API Not Supported",{description:"Your browser does not support the File System Access API. Please use a modern browser like Chrome, Edge, or Opera."});return}try{const e=await window.showDirectoryPicker({mode:"readwrite",startIn:"documents"});I.info("[StorageMode] Directory selected:",e.name),await X(),n.updateCategory("advanced",{storageMode:"filesystem"}),u.success("Filesystem Mode Enabled",{description:`Directory "${e.name}" selected. Please reload the page to complete the switch.`}),E.value=!0}catch(e){I.error("Failed to enable filesystem mode:",e),e.name==="AbortError"?u.info("Directory Selection Cancelled",{description:"You need to select a directory to use File System mode."}):u.error("Failed to Enable Filesystem Mode",{description:"Could not access the file system. Please check your browser permissions."})}}else ee(),n.updateCategory("advanced",{storageMode:"indexeddb"}),u.success("IndexedDB Mode Enabled",{description:"Please reload the page to apply changes."}),E.value=!0}catch(e){I.error("Failed to change storage mode:",e),u.error("Failed to Change Storage Mode",{description:"An error occurred while changing the storage mode."})}finally{M.value=!1}}},se=o=>{b.value=o,n.updateCategory("advanced",{filesystemAutoWatch:o}),u.success(o?"Auto-Watch Enabled":"Auto-Watch Disabled",{description:o?"Changes to .nota files will be detected automatically.":"You will need to manually reload to see file changes."})},ae=()=>{window.location.reload()},le=O(()=>F.value?U:V),oe=O(()=>F.value?"File System":"IndexedDB"),W=()=>{confirm("Reset all advanced settings to their default values?")&&(k.value=!1,x.value=!0,w.value="info",S.value=!1,u.success("Advanced Settings Reset",{description:"All advanced settings have been reset to defaults"}))};return Q({resetToDefaults:W}),(o,e)=>(i(),c("div",ge,[s(t(D),null,{default:l(()=>[s(t($),null,{default:l(()=>[s(t(B),{class:"flex items-center gap-2"},{default:l(()=>[s(t(me),{class:"w-5 h-5"}),e[5]||(e[5]=d(" Storage Mode "))]),_:1}),s(t(R),null,{default:l(()=>e[6]||(e[6]=[d(" Choose how BashNota stores your notes ")])),_:1})]),_:1}),s(t(C),{class:"space-y-6"},{default:l(()=>[a("div",fe,[s(t(p),null,{default:l(()=>e[7]||(e[7]=[d("Storage Backend")])),_:1}),s(t(j),{"model-value":t(y),"onUpdate:modelValue":e[0]||(e[0]=r=>te(r)),disabled:M.value},{default:l(()=>[s(t(T),{class:"w-full"},{default:l(()=>[s(t(z),null,{default:l(()=>[a("div",pe,[(i(),H(Y(le.value),{class:"w-4 h-4"})),d(" "+P(oe.value),1)])]),_:1})]),_:1}),s(t(q),null,{default:l(()=>[s(t(v),{value:"indexeddb"},{default:l(()=>[a("div",ve,[s(t(V),{class:"w-4 h-4"}),e[8]||(e[8]=d(" IndexedDB (Browser Storage) "))])]),_:1}),s(t(v),{value:"filesystem",disabled:!t(_)},{default:l(()=>[a("div",be,[s(t(U),{class:"w-4 h-4"}),e[9]||(e[9]=d(" File System (.nota files) ")),t(_)?f("",!0):(i(),c("span",xe," (Not Supported) "))])]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model-value","disabled"]),a("p",ye,P(t(G)),1)]),t(F)?(i(),c("div",_e,[a("div",he,[a("div",ke,[s(t(p),null,{default:l(()=>e[10]||(e[10]=[d("Auto-Watch Files")])),_:1}),e[11]||(e[11]=a("p",{class:"text-sm text-muted-foreground"}," Automatically detect changes to .nota files in the selected directory ",-1))]),s(t(A),{checked:t(b),"onUpdate:checked":se},null,8,["checked"])]),t(b)?(i(),c("div",we,[(i(),H(Y(t(h)?t(ne):t(re)),{class:Z(["w-4 h-4",t(h)?"text-green-600 dark:text-green-400":"text-gray-400"])},null,8,["class"])),a("span",{class:Z(["text-sm",t(h)?"text-green-700 dark:text-green-300":"text-muted-foreground"])}," File watcher is "+P(t(h)?"active":"inactive"),3)])):f("",!0),a("div",Se,[s(t(L),{class:"w-4 h-4 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),e[12]||(e[12]=a("div",{class:"text-sm text-blue-700 dark:text-blue-300"},[a("p",{class:"font-medium mb-1"},"File System Mode Benefits:"),a("ul",{class:"list-disc list-inside space-y-1 text-xs"},[a("li",null,"Edit .nota files directly with any text editor"),a("li",null,"Real-time synchronization with file system"),a("li",null,"Easy backup and version control with git"),a("li",null,"Works across multiple instances of BashNota")])],-1))])])):f("",!0),t(_)?f("",!0):(i(),c("div",Ce,[s(t(L),{class:"w-4 h-4 text-amber-600 dark:text-amber-400 mt-0.5 flex-shrink-0"}),e[13]||(e[13]=a("div",{class:"text-sm text-amber-700 dark:text-amber-300"},[a("p",{class:"font-medium mb-1"},"File System Mode Not Available"),a("p",{class:"text-xs"}," Your browser does not support the File System Access API. Please use Chrome, Edge, or Opera to enable this feature. ")],-1))])),E.value?(i(),c("div",Ae,[a("div",De,[s(t(J),{class:"w-4 h-4 text-green-600 dark:text-green-400 mt-0.5"}),e[14]||(e[14]=a("div",{class:"text-sm text-green-700 dark:text-green-300"},[a("p",{class:"font-medium"},"Reload Required"),a("p",{class:"text-xs"},"Please reload the page to apply storage mode changes")],-1))]),s(t(K),{size:"sm",variant:"default",onClick:ae},{default:l(()=>e[15]||(e[15]=[d(" Reload Now ")])),_:1})])):f("",!0)]),_:1})]),_:1}),s(t(N)),s(t(D),null,{default:l(()=>[s(t($),null,{default:l(()=>[s(t(B),{class:"flex items-center gap-2"},{default:l(()=>[s(t(ie),{class:"w-5 h-5"}),e[16]||(e[16]=d(" Performance & Debugging "))]),_:1}),s(t(R),null,{default:l(()=>e[17]||(e[17]=[d(" Configure performance options and debugging tools ")])),_:1})]),_:1}),s(t(C),{class:"space-y-4"},{default:l(()=>[a("div",Fe,[a("div",Me,[s(t(p),null,{default:l(()=>e[18]||(e[18]=[d("Debug Mode")])),_:1}),e[19]||(e[19]=a("p",{class:"text-sm text-muted-foreground"}," Enable detailed debugging information and console logs ",-1))]),s(t(A),{checked:k.value,"onUpdate:checked":e[1]||(e[1]=r=>k.value=r)},null,8,["checked"])]),s(t(N)),a("div",Ee,[a("div",$e,[a("div",Be,[s(t(p),null,{default:l(()=>e[20]||(e[20]=[d("Enable Logging")])),_:1}),e[21]||(e[21]=a("p",{class:"text-sm text-muted-foreground"}," Record application events and errors ",-1))]),s(t(A),{checked:x.value,"onUpdate:checked":e[2]||(e[2]=r=>x.value=r)},null,8,["checked"])]),x.value?(i(),c("div",Re,[s(t(p),null,{default:l(()=>e[22]||(e[22]=[d("Log Level")])),_:1}),s(t(j),{"model-value":w.value,"onUpdate:modelValue":e[3]||(e[3]=r=>w.value=r)},{default:l(()=>[s(t(T),{class:"w-full"},{default:l(()=>[s(t(z))]),_:1}),s(t(q),null,{default:l(()=>[s(t(v),{value:"debug"},{default:l(()=>e[23]||(e[23]=[d("Debug (Most Verbose)")])),_:1}),s(t(v),{value:"info"},{default:l(()=>e[24]||(e[24]=[d("Info")])),_:1}),s(t(v),{value:"warn"},{default:l(()=>e[25]||(e[25]=[d("Warning")])),_:1}),s(t(v),{value:"error"},{default:l(()=>e[26]||(e[26]=[d("Error Only")])),_:1})]),_:1})]),_:1},8,["model-value"]),e[27]||(e[27]=a("p",{class:"text-xs text-muted-foreground"}," Higher levels log more detailed information ",-1))])):f("",!0)]),s(t(N)),a("div",Pe,[a("div",Le,[s(t(p),null,{default:l(()=>e[28]||(e[28]=[d("Clear Cache on Startup")])),_:1}),e[29]||(e[29]=a("p",{class:"text-sm text-muted-foreground"}," Automatically clear cached data when the application starts ",-1))]),s(t(A),{checked:S.value,"onUpdate:checked":e[4]||(e[4]=r=>S.value=r)},null,8,["checked"])])]),_:1})]),_:1}),s(t(D),{class:"border-blue-200 dark:border-blue-800 bg-blue-50/50 dark:bg-blue-950/20"},{default:l(()=>[s(t(C),{class:"pt-6"},{default:l(()=>[a("div",Ne,[s(t(L),{class:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),e[30]||(e[30]=a("div",{class:"space-y-2 text-sm text-blue-900 dark:text-blue-100"},[a("p",{class:"font-medium"},"About Advanced Settings"),a("p",{class:"text-blue-700 dark:text-blue-300"}," These settings control core application behavior including storage, performance, and debugging. Changes to storage mode require a page reload. For data management and system information, see the respective sections in the Advanced settings menu. ")],-1))])]),_:1})]),_:1}),s(t(D),null,{default:l(()=>[s(t($),null,{default:l(()=>[s(t(B),null,{default:l(()=>e[31]||(e[31]=[d("Reset Settings")])),_:1}),s(t(R),null,{default:l(()=>e[32]||(e[32]=[d("Restore default advanced settings")])),_:1})]),_:1}),s(t(C),null,{default:l(()=>[s(t(K),{variant:"outline",onClick:W,class:"flex items-center gap-2"},{default:l(()=>[s(t(J),{class:"h-4 w-4"}),e[33]||(e[33]=d(" Reset to Defaults "))]),_:1})]),_:1})]),_:1})]))}});export{je as default};
