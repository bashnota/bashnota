import{c as ye,d as de,b,o,e as t,dP as Te,n as Ve,g as Oe,w as a,r as Ye,q as h,dQ as F,P as B,ab as Je,Q as _e,R as x,k as e,V as _,i as s,cf as oe,F as C,E as d,aV as I,aX as R,L as v,dg as ge,J as D,aW as ke,S as J,ap as te,$ as Q,aU as ie,aB as xe,b$ as $e,Z as Me,dR as Qe,cv as Xe,aQ as Ce,t as K,dA as Ue,dl as Ze,c4 as He,cD as et,cj as tt,bv as Ge,dS as st,c1 as lt,ba as ze,bl as at,X as ot,Y as nt,dv as it,a1 as dt,a2 as We,ct as qe,dT as Be,A as rt,ds as Se,D as ut,G as ct,aq as vt,N as ft,cd as mt,bj as pt,bJ as ue,bK as ce,bL as ve,ad as fe,ac as me,a$ as gt,a3 as bt,b0 as ne,cu as xt,d3 as yt,aA as je,aC as Ie,bz as pe}from"./index-B6K4lM3_.js";import{H as Le}from"./hard-drive-C3KlHrdZ.js";/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=ye("CrownIcon",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=ye("GaugeIcon",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=ye("KeyIcon",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=ye("ScaleIcon",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]),kt=de({__name:"DialogClose",props:{asChild:{type:Boolean},as:{}},setup(se){const G=se;return($,S)=>(o(),b(t(Te),Ve(Oe(G)),{default:a(()=>[Ye($.$slots,"default")]),_:3},16))}}),$t={class:"space-y-6"},Mt={class:"p-4 border rounded-lg"},Ct={class:"flex items-center justify-between mb-3"},St={class:"flex items-center space-x-2"},Lt={key:0,class:"space-y-3"},At={class:"flex items-start justify-between p-3 bg-muted/50 rounded-lg"},Pt={class:"space-y-1"},Dt={class:"font-medium"},zt={class:"text-sm text-muted-foreground"},Wt={class:"flex items-center space-x-4 text-xs text-muted-foreground"},Bt={key:0},jt={class:"text-right space-y-1"},It={class:"text-xs text-muted-foreground"},Ut={class:"flex items-center justify-between"},Gt={class:"space-y-1"},qt={class:"flex items-center space-x-2"},Nt={key:1,class:"text-center py-6 space-y-3"},Ft={key:0,class:"space-y-4"},Kt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3"},Rt=["onClick"],Et={class:"space-y-2"},Tt={class:"flex items-center space-x-2"},Vt={class:"font-medium text-sm"},Ot={class:"text-xs text-muted-foreground"},Yt={class:"space-y-1"},Jt={class:"flex items-center justify-between text-xs"},Qt={class:"flex items-center justify-between text-xs"},Xt={class:"font-medium"},Zt={key:1,class:"space-y-4"},Ht={class:"flex items-center justify-between"},es={class:"flex gap-2"},ts={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},ss=["onClick"],ls={class:"space-y-2"},as={class:"flex items-start justify-between"},os={class:"flex-1"},ns={class:"font-medium text-sm"},is={class:"text-xs text-muted-foreground"},ds={class:"flex flex-col items-end gap-1"},rs={key:0,class:"flex items-center text-xs text-green-600"},us={class:"flex justify-between items-center"},cs={class:"text-xs text-muted-foreground"},vs={key:0,class:"text-center"},fs=de({__name:"WebLLMDefaultModelManager",props:{availableModels:{},downloadedModels:{},currentModel:{default:null},isLoading:{type:Boolean,default:!1}},emits:["refresh-models","model-selected","preview-model"],setup(se,{emit:G}){const $=se,S=G,M=h(F.getDefaultModelConfig()),z=h(!1),y=B(()=>F.getUserDefaultModel()),W=B(()=>z.value?$.availableModels:$.availableModels.slice(0,6)),A=B(()=>[{id:"user-selected",name:"User Selected",description:"Use your manually selected default model",sizePreference:"Varies",maxSize:"N/A"},{id:"smallest",name:"Smallest",description:"Prioritize fastest downloads and lowest memory",sizePreference:"Small",maxSize:"1GB"},{id:"fastest",name:"Fastest",description:"Balance download size with response speed",sizePreference:"Small",maxSize:"2GB"},{id:"balanced",name:"Balanced",description:"Good balance of quality and performance",sizePreference:"Medium",maxSize:"4GB"}]),E=g=>({"user-selected":Xe,smallest:Qe,fastest:Me,balanced:wt})[g]||_t,w=g=>{const u=$.availableModels.find(p=>p.id===g);return(u==null?void 0:u.name)||g},m=g=>{const u=$.availableModels.find(p=>p.id===g);return(u==null?void 0:u.description)||"AI model for text generation"},P=g=>{const u=$.availableModels.find(p=>p.id===g);return u?j(u.downloadSize):"unknown"},T=g=>{const u=$.availableModels.find(p=>p.id===g);return(u==null?void 0:u.downloadSize)||"Unknown size"},j=g=>{const u=g.match(/(\d+(?:\.\d+)?)\s*(GB|MB)/);if(u){const p=parseFloat(u[1]),ae=u[2]==="GB"?p:p/1024;return ae<=2?"small":ae<=6?"medium":"large"}return"unknown"},L=g=>{switch(g){case"small":return"default";case"medium":return"secondary";case"large":return"outline";default:return"outline"}},X=g=>$.downloadedModels.includes(g),q=g=>new Date(g).toLocaleDateString(),V=g=>{F.setUserDefaultModel(g.id),M.value=F.getDefaultModelConfig(),Ce.info(`Set default model: ${g.id}`),S("model-selected",g.id)},Z=()=>{F.saveDefaultModelConfig({modelId:"",userSelectedModel:"",autoLoadStrategy:"smallest"}),M.value=F.getDefaultModelConfig(),K({title:"Default Cleared",description:"No default model is set. WebLLM will use automatic selection.",variant:"default"})},H=g=>{F.saveDefaultModelConfig({autoLoadOnRequest:g}),M.value=F.getDefaultModelConfig(),K({title:g?"Auto-load Enabled":"Auto-load Disabled",description:g?"Models will automatically load when AI assistance is needed":"You will need to manually load models before using AI features",variant:"default"})},N=g=>{var u;F.saveDefaultModelConfig({autoLoadStrategy:g}),M.value=F.getDefaultModelConfig(),K({title:"Strategy Updated",description:`Auto-load strategy set to: ${(u=A.value.find(p=>p.id===g))==null?void 0:u.name}`,variant:"default"})},le=()=>{S("refresh-models")};return Je(()=>$.currentModel,()=>{M.value=F.getDefaultModelConfig()},{immediate:!0}),_e(()=>{M.value=F.getDefaultModelConfig()}),(g,u)=>(o(),x("div",$t,[e("div",Mt,[e("div",Ct,[e("div",St,[s(t(oe),{class:"h-5 w-5 text-primary"}),u[1]||(u[1]=e("h3",{class:"font-medium"},"Default Model Configuration",-1))]),y.value?(o(),b(t(C),{key:0,variant:"default",class:"bg-green-100 text-green-800 border-green-300"},{default:a(()=>[s(t(I),{class:"h-3 w-3 mr-1"}),u[2]||(u[2]=d(" Configured "))]),_:1})):(o(),b(t(C),{key:1,variant:"outline",class:"border-orange-300 text-orange-700"},{default:a(()=>[s(t(R),{class:"h-3 w-3 mr-1"}),u[3]||(u[3]=d(" Not Set "))]),_:1}))]),y.value?(o(),x("div",Lt,[e("div",At,[e("div",Pt,[e("h4",Dt,v(w(y.value)),1),e("p",zt,v(m(y.value)),1),e("div",Wt,[e("span",null,"Strategy: "+v(M.value.autoLoadStrategy||"Not set"),1),M.value.lastSetAt?(o(),x("span",Bt," Set: "+v(q(M.value.lastSetAt)),1)):_("",!0)])]),e("div",jt,[s(t(C),{variant:L(P(y.value))},{default:a(()=>[d(v(P(y.value)),1)]),_:1},8,["variant"]),e("div",It,v(T(y.value)),1)])]),e("div",Ut,[e("div",Gt,[e("div",qt,[s(t(ge),{checked:M.value.autoLoadOnRequest,"onUpdate:checked":H},null,8,["checked"]),u[4]||(u[4]=e("span",{class:"text-sm font-medium"},"Auto-load on request",-1))]),u[5]||(u[5]=e("p",{class:"text-xs text-muted-foreground"}," Automatically load this model when AI assistance is needed ",-1))]),s(t(D),{variant:"outline",size:"sm",onClick:Z},{default:a(()=>[s(t(ke),{class:"h-4 w-4 mr-1"}),u[6]||(u[6]=d(" Clear Default "))]),_:1})])])):(o(),x("div",Nt,[s(t(R),{class:"h-8 w-8 text-orange-500 mx-auto"}),u[7]||(u[7]=e("div",null,[e("p",{class:"font-medium"},"No default model configured"),e("p",{class:"text-sm text-muted-foreground"}," Choose a model below or use quick setup to configure automatic loading ")],-1))]))]),M.value.enabled?(o(),x("div",Ft,[u[10]||(u[10]=e("div",null,[e("h3",{class:"font-medium mb-2"},"Auto-load Strategy"),e("p",{class:"text-sm text-muted-foreground mb-4"}," Choose how WebLLM should select models when no specific default is set ")],-1)),e("div",Kt,[(o(!0),x(J,null,te(A.value,p=>(o(),x("div",{key:p.id,class:Q(["p-4 border-2 rounded-lg cursor-pointer transition-all",M.value.autoLoadStrategy===p.id?"border-primary bg-primary/5":"border-border hover:border-primary/50"]),onClick:O=>N(p.id)},[e("div",Et,[e("div",Tt,[(o(),b(ie(E(p.id)),{class:"h-4 w-4 text-primary"})),e("span",Vt,v(p.name),1)]),e("p",Ot,v(p.description),1),e("div",Yt,[e("div",Jt,[u[8]||(u[8]=e("span",null,"Size Preference:",-1)),s(t(C),{variant:"outline",class:"text-xs"},{default:a(()=>[d(v(p.sizePreference),1)]),_:2},1024)]),e("div",Qt,[u[9]||(u[9]=e("span",null,"Max Download:",-1)),e("span",Xt,v(p.maxSize),1)])])])],10,Rt))),128))])])):_("",!0),g.availableModels.length>0?(o(),x("div",Zt,[e("div",Ht,[u[12]||(u[12]=e("div",null,[e("h3",{class:"font-medium"},"Set as Default Model"),e("p",{class:"text-sm text-muted-foreground"}," Choose any model to set as your default for auto-loading ")],-1)),e("div",es,[s(t(D),{variant:"outline",size:"sm",onClick:le,disabled:g.isLoading},{default:a(()=>[s(t(xe),{class:Q(["h-4 w-4 mr-1",g.isLoading&&"animate-spin"])},null,8,["class"]),u[11]||(u[11]=d(" Refresh "))]),_:1},8,["disabled"])])]),e("div",ts,[(o(!0),x(J,null,te(W.value,p=>(o(),x("div",{key:p.id,class:Q(["p-3 border rounded-lg cursor-pointer transition-all hover:shadow-sm",y.value===p.id?"border-green-500 bg-green-50 dark:bg-green-950":"border-border hover:border-primary/50"]),onClick:O=>V(p)},[e("div",ls,[e("div",as,[e("div",os,[e("h4",ns,v(p.name||p.id),1),e("p",is,v(p.downloadSize),1)]),e("div",ds,[s(t(C),{variant:L(j(p.downloadSize))},{default:a(()=>[d(v(j(p.downloadSize).toUpperCase()),1)]),_:2},1032,["variant"]),y.value===p.id?(o(),x("div",rs,[s(t(be),{class:"h-3 w-3 mr-1"}),u[13]||(u[13]=d(" Default "))])):_("",!0)])]),e("div",us,[e("div",cs,v(X(p.id)?"✓ Downloaded":"Not downloaded"),1),s(t(D),{size:"sm",variant:"outline",onClick:$e(O=>V(p),["stop"]),disabled:y.value===p.id,class:"text-xs h-7"},{default:a(()=>[d(v(y.value===p.id?"Is Default":"Set Default"),1)]),_:2},1032,["onClick","disabled"])])])],10,ss))),128))]),g.availableModels.length>W.value.length?(o(),x("div",vs,[s(t(D),{variant:"outline",onClick:u[0]||(u[0]=p=>z.value=!0)},{default:a(()=>[d(" Show All Models ("+v(g.availableModels.length-W.value.length)+" more) ",1)]),_:1})])):_("",!0)])):_("",!0)]))}}),ms={class:"space-y-4"},ps={class:"p-4 border rounded-lg bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950"},gs={class:"flex items-center justify-between"},bs={class:"flex items-center space-x-4"},xs={class:"flex items-center space-x-2"},ys={class:"text-sm font-medium"},_s={class:"flex items-center space-x-2"},hs={class:"flex items-center space-x-1"},ws={class:"text-xs text-muted-foreground"},ks={key:0,class:"mt-3 space-y-2"},$s={class:"flex items-center justify-between text-xs"},Ms={class:"font-medium"},Cs={class:"w-full bg-white/50 rounded-full h-1.5"},Ss={key:1,class:"mt-3 p-2 bg-red-100 border border-red-200 rounded text-xs text-red-700"},Ls={class:"border rounded-lg"},As={class:"flex border-b bg-muted/30"},Ps=["onClick"],Ds={class:"p-4"},zs={key:0,class:"space-y-4"},Ws={class:"flex items-center justify-between"},Bs={class:"text-sm text-muted-foreground"},js={class:"flex items-center space-x-2"},Is={class:"relative"},Us={class:"grid grid-cols-1 lg:grid-cols-2 gap-3 max-h-96 overflow-y-auto"},Gs=["onClick"],qs={class:"flex items-start justify-between mb-2"},Ns={class:"flex-1 min-w-0"},Fs={class:"font-medium text-sm truncate"},Ks={class:"text-xs text-muted-foreground"},Rs={class:"flex flex-col items-end gap-1 ml-2"},Es={class:"flex flex-wrap gap-1 justify-end"},Ts={class:"flex items-center justify-between"},Vs={class:"flex items-center space-x-2"},Os={key:1,class:"flex items-center"},Ys={key:0,class:"p-3 bg-muted/50 rounded-lg"},Js={class:"flex items-center justify-between"},Qs={class:"text-sm"},Xs={key:1,class:"space-y-4"},Zs={class:"space-y-3"},Hs={class:"grid grid-cols-2 gap-4"},el={class:"text-xs font-medium"},tl=["value"],sl={class:"text-xs font-medium"},ll=["value"],al={key:2,class:"space-y-4"},ol={class:"space-y-3"},nl={class:"grid grid-cols-2 gap-3"},il={class:"flex items-center space-x-2 p-2 border rounded text-sm"},dl={class:"flex items-center space-x-2 p-2 border rounded text-sm"},rl={class:"flex items-center space-x-2 p-2 border rounded text-sm"},ul={class:"flex items-center space-x-2 p-2 border rounded text-sm"},cl=de({__name:"WebLLMProviderSettingsContent",setup(se){const G=Ue(),{webLLMModels:$,isLoadingWebLLMModels:S,isWebLLMSupported:M,checkWebLLMSupport:z,fetchWebLLMModels:y,loadWebLLMModel:W}=Ze(),A=h(!1),E=h(0),w=h(null),m=h(null),P=h(!1),T=h(!1),j=h(null),L=h([]),X=h("0 MB"),q=h("all"),V=h(""),Z=h([.7]),H=h([.9]),N=h(null),le=B(()=>P.value&&T.value&&M.value),g=B(()=>M.value?P.value?T.value?"Your browser meets the minimum requirements for WebLLM.":"WebAssembly support is required for WebLLM to function properly.":"WebGL 2.0 support is required for WebLLM to function properly.":"Your browser does not support WebGPU. WebLLM requires Chrome 113+ or Edge 113+ for optimal performance."),u=B(()=>S.value?"connecting":w.value?"error":M.value?"connected":"disconnected"),p=B(()=>{const i=$.value.find(n=>(n.id||n.model_id)===N.value);return(i==null?void 0:i.name)||(i==null?void 0:i.model_id)||N.value}),O=B(()=>{try{const{webLLMDefaultModelService:i}=require("@/features/ai/services/webLLMDefaultModelService");return i.getUserDefaultModel()}catch{return null}}),ae=B(()=>{let i=$.value;if(V.value.trim()){const n=V.value.toLowerCase();i=i.filter(c=>{const Y=(c.name||c.id||c.model_id||"").toLowerCase(),we=(c.description||"").toLowerCase();return Y.includes(n)||we.includes(n)})}return q.value==="downloaded"?i=i.filter(n=>U(n.id||n.model_id)):q.value!=="all"&&(i=i.filter(n=>l(n.downloadSize||n.size)===q.value)),i.sort((n,c)=>{const Y=n.name||n.id||n.model_id,we=c.name||c.id||c.model_id;return Y.localeCompare(we)})}),he=B(()=>[{id:"models",name:"Models",icon:Le,badge:$.value.length},{id:"settings",name:"Settings",icon:oe,badge:null},{id:"info",name:"Info",icon:R,badge:null}]),f=h("models"),l=i=>i.includes("0.5B")||i.includes("1B")||i.includes("1.5B")||i.includes("2B")?"small":i.includes("3B")||i.includes("7B")||i.includes("8B")?"medium":i.includes("13B")||i.includes("70B")?"large":"medium",k=i=>{const n=$.value.find(c=>(c.id||c.model_id)===i);return(n==null?void 0:n.name)||(n==null?void 0:n.model_id)||i},r=i=>{try{const{webLLMDefaultModelService:n}=require("@/features/ai/services/webLLMDefaultModelService");return n.getUserDefaultModel()===i}catch{return!1}},U=i=>L.value.includes(i),re=i=>{switch(i){case"small":return"secondary";case"medium":return"default";case"large":return"outline";default:return"default"}},ee=()=>u.value==="connected"?m.value?`Connected - ${k(m.value)}`:"Connected - No Model":u.value==="error"?"Connection Error":"Connecting...",Ne=i=>{N.value=i},Fe=async i=>{if(!A.value)try{if(A.value=!0,N.value=i,await W(i))m.value=i,U(i)||(L.value.push(i),localStorage.setItem("webllm-downloaded-models",JSON.stringify(L.value))),K({title:"Model Loaded",description:`${k(i)} has been loaded successfully`,variant:"default"});else throw new Error("Failed to load model")}catch(n){Ce.error("Error loading model:",n),K({title:"Error",description:"Failed to load model. Please try again.",variant:"destructive"})}finally{A.value=!1,N.value=null}},Ae=async()=>{await y()},Pe=i=>{N.value=i,G.updateProviderSettings({webllmDefaultModel:i,webllmAutoLoad:!0}),K({title:"Model Selected",description:`${k(i)} set as default model`,variant:"default"})},De=i=>{N.value=i.id,K({title:"Model Preview",description:`Previewing ${i.name||i.id}`,variant:"default"})},Ke=async i=>{L.value=L.value.filter(n=>n!==i),localStorage.setItem("webllm-downloaded-models",JSON.stringify(L.value)),K({title:"Model Removed",description:`${k(i)} has been removed from cache.`,variant:"default"})},Re=()=>{confirm("Are you sure you want to clear all cached models?")&&(L.value=[],X.value="0 MB",localStorage.removeItem("webllm-downloaded-models"),K({title:"Cache Cleared",description:"All cached WebLLM models have been removed.",variant:"default"}))},Ee=async()=>{try{const n=document.createElement("canvas").getContext("webgl2");P.value=!!n}catch{P.value=!1}T.value=typeof WebAssembly=="object";try{const i=navigator.deviceMemory;i?j.value=i:navigator.hardwareConcurrency&&(j.value=Math.max(4,navigator.hardwareConcurrency))}catch{j.value=null}};return _e(async()=>{try{const i=localStorage.getItem("webllm-downloaded-models");i&&(L.value=JSON.parse(i))}catch(i){Ce.warn("Failed to load downloaded models from localStorage:",i)}await Ee(),await z(),await y()}),(i,n)=>(o(),x("div",ms,[e("div",ps,[e("div",gs,[e("div",bs,[e("div",xs,[e("div",{class:Q(["w-3 h-3 rounded-full",u.value==="connected"?"bg-green-500":u.value==="error"?"bg-red-500":"bg-yellow-500"])},null,2),e("span",ys,v(ee()),1)]),m.value?(o(),b(t(C),{key:0,variant:"default",class:"bg-blue-100 text-blue-800"},{default:a(()=>[s(t(be),{class:"h-3 w-3 mr-1"}),d(" "+v(k(m.value)),1)]),_:1})):_("",!0),O.value&&O.value!==m.value?(o(),b(t(C),{key:1,variant:"outline",class:"border-blue-300"},{default:a(()=>[s(t(oe),{class:"h-3 w-3 mr-1"}),d(" Default: "+v(k(O.value)),1)]),_:1})):_("",!0)]),e("div",_s,[e("div",hs,[le.value?(o(),b(t(I),{key:0,class:"h-4 w-4 text-green-500"})):(o(),b(t(R),{key:1,class:"h-4 w-4 text-red-500"})),e("span",ws,v(le.value?"Compatible":"Incompatible"),1)]),s(t(D),{onClick:Ae,disabled:t(S),variant:"outline",size:"sm"},{default:a(()=>[s(t(xe),{class:Q(["h-4 w-4",t(S)&&"animate-spin"])},null,8,["class"])]),_:1},8,["disabled"])])]),A.value?(o(),x("div",ks,[e("div",$s,[e("span",Ms,"Loading "+v(p.value)+"...",1),e("span",null,v(Math.round(E.value))+"%",1)]),e("div",Cs,[e("div",{class:"bg-blue-600 h-1.5 rounded-full transition-all duration-300",style:He({width:`${E.value}%`})},null,4)])])):_("",!0),le.value?_("",!0):(o(),x("div",Ss,[s(t(R),{class:"h-3 w-3 inline mr-1"}),d(" "+v(g.value),1)]))]),e("div",Ls,[e("div",As,[(o(!0),x(J,null,te(he.value,c=>(o(),x("button",{key:c.id,onClick:Y=>f.value=c.id,class:Q(["flex-1 px-4 py-3 text-sm font-medium transition-colors relative",f.value===c.id?"text-primary bg-background border-b-2 border-primary":"text-muted-foreground hover:text-foreground hover:bg-muted/50"])},[(o(),b(ie(c.icon),{class:"h-4 w-4 mr-2 inline"})),d(" "+v(c.name)+" ",1),c.badge?(o(),b(t(C),{key:0,variant:"secondary",class:"ml-2 text-xs"},{default:a(()=>[d(v(c.badge),1)]),_:2},1024)):_("",!0)],10,Ps))),128))]),e("div",Ds,[f.value==="models"?(o(),x("div",zs,[e("div",Ws,[e("div",null,[n[4]||(n[4]=e("h3",{class:"font-medium"},"Model Management",-1)),e("p",Bs,v(ae.value.length)+" of "+v(t($).length)+" models • "+v(L.value.length)+" downloaded • "+v(X.value)+" used ",1)]),e("div",js,[e("div",Is,[s(t(tt),{class:"absolute left-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s(t(Ge),{modelValue:V.value,"onUpdate:modelValue":n[0]||(n[0]=c=>V.value=c),placeholder:"Search models...",class:"pl-8 w-48 text-sm"},null,8,["modelValue"])]),et(e("select",{"onUpdate:modelValue":n[1]||(n[1]=c=>q.value=c),class:"text-sm border border-input rounded-md px-2 py-1 bg-background"},n[5]||(n[5]=[lt('<option value="all">All Models</option><option value="downloaded">Downloaded Only</option><option value="small">Small Models</option><option value="medium">Medium Models</option><option value="large">Large Models</option>',5)]),512),[[st,q.value]])])]),e("div",Us,[(o(!0),x(J,null,te(ae.value,c=>(o(),x("div",{key:c.id,class:Q(["p-3 border rounded-lg transition-all hover:shadow-sm cursor-pointer",m.value===c.id?"border-primary bg-primary/5":r(c.id)?"border-purple-500 bg-purple-50 dark:bg-purple-950/20":U(c.id)?"border-green-500 bg-green-50 dark:bg-green-950/20":"border-border hover:border-primary/50"]),onClick:Y=>Ne(c.id)},[e("div",qs,[e("div",Ns,[e("h4",Fs,v(c.name||c.id),1),e("p",Ks,v(c.downloadSize),1)]),e("div",Rs,[e("div",Es,[m.value===c.id?(o(),b(t(C),{key:0,variant:"default",class:"text-xs"},{default:a(()=>[s(t(ze),{class:"h-2 w-2 mr-1"}),n[6]||(n[6]=d(" Active "))]),_:1})):_("",!0),r(c.id)?(o(),b(t(C),{key:1,variant:"secondary",class:"text-xs"},{default:a(()=>[s(t(be),{class:"h-2 w-2 mr-1"}),n[7]||(n[7]=d(" Default "))]),_:1})):_("",!0),U(c.id)?(o(),b(t(C),{key:2,variant:"outline",class:"text-xs"},{default:a(()=>[s(t(Le),{class:"h-2 w-2 mr-1"}),n[8]||(n[8]=d(" Cached "))]),_:1})):_("",!0)]),s(t(C),{variant:re(l(c.downloadSize)),class:"text-xs"},{default:a(()=>[d(v(l(c.downloadSize).toUpperCase()),1)]),_:2},1032,["variant"])])]),e("div",Ts,[e("div",Vs,[r(c.id)?_("",!0):(o(),b(t(D),{key:0,onClick:$e(Y=>Pe(c.id),["stop"]),variant:"outline",size:"sm",class:"text-xs h-6 px-2"},{default:a(()=>[s(t(be),{class:"h-3 w-3 mr-1"}),n[9]||(n[9]=d(" Set Default "))]),_:2},1032,["onClick"])),s(t(D),{onClick:$e(Y=>Fe(c.id),["stop"]),disabled:A.value||m.value===c.id,variant:"default",size:"sm",class:"text-xs h-6 px-2"},{default:a(()=>[!A.value||N.value!==c.id?(o(),x(J,{key:0},[U(c.id)?m.value!==c.id?(o(),b(t(ze),{key:1,class:"h-3 w-3 mr-1"})):(o(),b(t(I),{key:2,class:"h-3 w-3 mr-1"})):(o(),b(t(at),{key:0,class:"h-3 w-3 mr-1"})),d(" "+v(m.value===c.id?"Active":U(c.id)?"Load":"Download"),1)],64)):(o(),x("div",Os,[s(t(xe),{class:"h-3 w-3 mr-1 animate-spin"}),n[10]||(n[10]=d(" Loading "))]))]),_:2},1032,["onClick","disabled"])]),s(t(ot),null,{default:a(()=>[s(t(nt),{"as-child":""},{default:a(()=>[s(t(D),{variant:"ghost",size:"sm",class:"h-6 w-6 p-0"},{default:a(()=>[s(t(it),{class:"h-3 w-3"})]),_:1})]),_:1}),s(t(dt),{align:"end"},{default:a(()=>[s(t(We),{onClick:Y=>De(c)},{default:a(()=>[s(t(qe),{class:"h-3 w-3 mr-2"}),n[11]||(n[11]=d(" Preview Details "))]),_:2},1032,["onClick"]),U(c.id)&&m.value!==c.id?(o(),b(t(We),{key:0,onClick:Y=>Ke(c.id),class:"text-destructive"},{default:a(()=>[s(t(Be),{class:"h-3 w-3 mr-2"}),n[12]||(n[12]=d(" Remove from Cache "))]),_:2},1032,["onClick"])):_("",!0)]),_:2},1024)]),_:2},1024)])],10,Gs))),128))]),L.value.length>0?(o(),x("div",Ys,[e("div",Js,[e("div",Qs,[n[13]||(n[13]=e("span",{class:"font-medium"},"Cache:",-1)),d(" "+v(X.value)+" used by "+v(L.value.length)+" models ",1)]),s(t(D),{onClick:Re,variant:"destructive",size:"sm",class:"text-xs"},{default:a(()=>[s(t(Be),{class:"h-3 w-3 mr-1"}),n[14]||(n[14]=d(" Clear All "))]),_:1})])])):_("",!0)])):_("",!0),f.value==="settings"?(o(),x("div",Xs,[s(fs,{"available-models":t($),"downloaded-models":L.value,"current-model":m.value,"is-loading":t(S),onRefreshModels:Ae,onModelSelected:Pe,onPreviewModel:De},null,8,["available-models","downloaded-models","current-model","is-loading"]),e("div",Zs,[n[15]||(n[15]=e("h3",{class:"font-medium"},"Advanced Settings",-1)),e("div",Hs,[e("div",null,[e("label",el,"Temperature ("+v(Z.value[0].toFixed(1))+")",1),e("input",{type:"range",value:Z.value[0],onInput:n[2]||(n[2]=c=>Z.value[0]=parseFloat(c.target.value)),min:"0",max:"2",step:"0.1",class:"w-full mt-1"},null,40,tl)]),e("div",null,[e("label",sl,"Top P ("+v(H.value[0].toFixed(2))+")",1),e("input",{type:"range",value:H.value[0],onInput:n[3]||(n[3]=c=>H.value[0]=parseFloat(c.target.value)),min:"0",max:"1",step:"0.05",class:"w-full mt-1"},null,40,ll)])])])])):_("",!0),f.value==="info"?(o(),x("div",al,[e("div",ol,[n[19]||(n[19]=e("h3",{class:"font-medium"},"Browser Compatibility",-1)),e("div",nl,[e("div",il,[P.value?(o(),b(t(I),{key:0,class:"h-4 w-4 text-green-500"})):(o(),b(t(ke),{key:1,class:"h-4 w-4 text-red-500"})),n[16]||(n[16]=d(" WebGL Support "))]),e("div",dl,[T.value?(o(),b(t(I),{key:0,class:"h-4 w-4 text-green-500"})):(o(),b(t(ke),{key:1,class:"h-4 w-4 text-red-500"})),n[17]||(n[17]=d(" WebAssembly "))]),e("div",rl,[t(M)?(o(),b(t(I),{key:0,class:"h-4 w-4 text-green-500"})):(o(),b(t(R),{key:1,class:"h-4 w-4 text-yellow-500"})),n[18]||(n[18]=d(" WebGPU Support "))]),e("div",ul,[j.value&&j.value>=4?(o(),b(t(I),{key:0,class:"h-4 w-4 text-green-500"})):(o(),b(t(R),{key:1,class:"h-4 w-4 text-yellow-500"})),d(" RAM: "+v(j.value?`${j.value}GB`:"Unknown"),1)])])]),n[20]||(n[20]=e("div",{class:"p-3 bg-blue-50 border border-blue-200 rounded-lg dark:bg-blue-950"},[e("h4",{class:"font-medium text-blue-800 dark:text-blue-200"},"About WebLLM"),e("p",{class:"text-sm text-blue-700 dark:text-blue-300 mt-1"}," WebLLM runs AI models directly in your browser with complete privacy. Models are downloaded once and cached locally for offline use. ")],-1))])):_("",!0)])])]))}}),vl={class:"flex items-center justify-between p-6 border-b bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 flex-shrink-0"},fl={class:"flex items-center space-x-3"},ml={class:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg"},pl={class:"flex items-center space-x-2"},gl={class:"flex-1 overflow-y-auto min-h-0"},bl={class:"p-6"},xl={class:"flex items-center justify-between p-4 border-t bg-muted/30 flex-shrink-0"},yl={class:"flex items-center space-x-3"},_l=de({__name:"WebLLMSettingsModal",props:{open:{type:Boolean}},emits:["update:open","model-loaded","settings-saved"],setup(se,{emit:G}){const $=se,S=G,M=B({get:()=>$.open,set:w=>S("update:open",w)}),z=h(!0),y=async()=>{try{const P=!!document.createElement("canvas").getContext("webgl2"),T=typeof WebAssembly=="object",j="gpu"in navigator;z.value=P&&T}catch{z.value=!1}},W=w=>{S("model-loaded",w),K({title:"Model Loaded",description:`${w} is now ready for use`,variant:"default"})},A=()=>{S("settings-saved"),K({title:"Settings Saved",description:"WebLLM configuration has been updated",variant:"default"})},E=()=>{S("update:open",!1),K({title:"WebLLM Configured",description:"Your AI models are ready to use",variant:"default"})};return _e(()=>{y()}),(w,m)=>(o(),b(t(ft),{open:M.value,"onUpdate:open":m[1]||(m[1]=P=>w.$emit("update:open",P))},{default:a(()=>[s(t(rt),{class:"max-w-7xl max-h-[90vh] w-[98vw] p-0 overflow-hidden rounded-lg border-0 flex flex-col"},{default:a(()=>[e("div",vl,[e("div",fl,[e("div",ml,[s(t(Se),{class:"h-6 w-6 text-blue-600 dark:text-blue-400"})]),e("div",null,[s(t(ut),{class:"text-xl font-semibold text-blue-900 dark:text-blue-100"},{default:a(()=>m[2]||(m[2]=[d(" WebLLM Settings ")])),_:1}),s(t(ct),{class:"text-blue-700 dark:text-blue-300"},{default:a(()=>m[3]||(m[3]=[d(" Configure your local AI models and browser settings ")])),_:1})])]),e("div",pl,[z.value?(o(),b(t(C),{key:0,variant:"default",class:"bg-green-100 text-green-800 border-green-300"},{default:a(()=>[s(t(I),{class:"h-3 w-3 mr-1"}),m[4]||(m[4]=d(" Compatible "))]),_:1})):(o(),b(t(C),{key:1,variant:"destructive"},{default:a(()=>[s(t(R),{class:"h-3 w-3 mr-1"}),m[5]||(m[5]=d(" Incompatible "))]),_:1})),s(t(kt),{"as-child":""},{default:a(()=>[s(t(D),{variant:"ghost",size:"sm",class:"text-blue-600 hover:text-blue-700"},{default:a(()=>[s(t(vt),{class:"h-4 w-4"})]),_:1})]),_:1})])]),e("div",gl,[e("div",bl,[s(cl,{onModelLoaded:W,onSettingsSaved:A})])]),e("div",xl,[m[8]||(m[8]=e("div",{class:"text-sm text-muted-foreground"}," Changes are saved automatically ",-1)),e("div",yl,[s(t(D),{variant:"outline",onClick:m[0]||(m[0]=P=>w.$emit("update:open",!1))},{default:a(()=>m[6]||(m[6]=[d(" Close ")])),_:1}),s(t(D),{onClick:E,class:"bg-blue-600 hover:bg-blue-700 text-white"},{default:a(()=>[s(t(I),{class:"h-4 w-4 mr-2"}),m[7]||(m[7]=d(" Done "))]),_:1})])])]),_:1})]),_:1},8,["open"]))}}),hl={class:"space-y-6"},wl={class:"flex items-center justify-between"},kl={class:"flex items-center gap-3"},$l={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ml=["onClick"],Cl={class:"flex items-start space-x-3"},Sl={class:"p-2 rounded-lg bg-muted/50 group-hover:bg-primary/10 transition-colors"},Ll={class:"flex-1 min-w-0"},Al={class:"flex items-center justify-between mb-2"},Pl={class:"font-medium"},Dl={key:0,class:"flex items-center text-primary"},zl={class:"text-sm text-muted-foreground mb-3"},Wl={class:"flex items-center justify-between"},Bl={class:"text-xs text-muted-foreground"},jl={class:"grid grid-cols-1 md:grid-cols-3 gap-3"},Il={class:"flex items-center space-x-3"},Ul={class:"text-sm font-medium"},Gl={class:"flex items-center gap-2 mt-1"},ql={key:0,class:"text-xs text-green-600 flex items-center gap-1"},Nl={class:"space-y-4"},Fl={class:"flex items-start justify-between"},Kl={class:"flex items-start gap-3"},Rl={class:"p-2 rounded-lg bg-muted/50"},El={class:"space-y-1"},Tl={class:"font-medium"},Vl={class:"text-sm text-muted-foreground"},Ol={class:"flex flex-wrap gap-1 mt-2"},Yl={class:"flex items-center gap-2"},Jl={key:0,class:"space-y-2"},Ql={class:"flex gap-2"},Xl={class:"relative flex-1"},Zl={key:1,class:"flex items-center gap-2 text-green-600 bg-green-50 p-2 rounded"},Hl={key:2,class:"flex items-center gap-2 text-red-600 bg-red-50 p-2 rounded"},ea={key:3,class:"mt-4 pt-4 border-t"},ta={class:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 rounded-lg border"},sa={class:"flex items-center justify-between"},la={class:"space-y-2"},aa={class:"flex items-center gap-2"},oa={class:"flex flex-wrap gap-2 mt-2"},na={class:"space-y-2"},ia={class:"flex items-center justify-between"},da={key:0,class:"space-y-4 pt-4 border-t"},ra={class:"flex items-center justify-between"},ua={class:"space-y-0.5"},ca={class:"flex items-center justify-between"},va={class:"space-y-0.5"},pa=de({__name:"AIProvidersSettings",setup(se){const G=Ue(),$=h([]),S=h(!1),M=h(!1),z=h({}),y=h({}),W=h("idle"),A=h({}),E=h(!1),w=B(()=>G.state.providerSettings),m=[{id:"gemini",name:"Google Gemini",icon:mt,description:"Google's most capable AI model with excellent reasoning capabilities",longDescription:"Advanced language model from Google with strong reasoning and code generation capabilities. Supports function calling and multimodal inputs.",requiresApiKey:!0,apiKeyLabel:"Gemini API Key",setupUrl:"https://makersuite.google.com/app/apikey",features:["Function Calling","Code Generation","Multimodal","Fast Response"],modelCount:4},{id:"openai",name:"OpenAI",icon:Me,description:"GPT models from OpenAI with industry-leading performance",longDescription:"Industry-leading GPT models from OpenAI. Excellent for conversation, coding, and creative tasks with consistent high-quality outputs.",requiresApiKey:!0,apiKeyLabel:"OpenAI API Key",setupUrl:"https://platform.openai.com/api-keys",features:["GPT-4","Code Interpreter","DALL-E Integration","Function Calling"],modelCount:6},{id:"webllm",name:"WebLLM",icon:Se,description:"Privacy-focused AI that runs entirely in your browser",longDescription:"Run powerful language models locally in your browser with complete privacy. No data leaves your device.",requiresApiKey:!1,setupUrl:"https://webllm.mlc.ai/",features:["Local Processing","Complete Privacy","No API Costs","Offline Usage"],modelCount:8}],P=B(()=>m.filter(f=>{var l;return f.requiresApiKey?!!((l=w.value.apiKeys)!=null&&l[f.id]):!0}).length),T=B(()=>P.value>0),j=B(()=>m.map(f=>{var l;return{...f,status:L(f.id),statusText:X(f.id),isAvailable:((l=$.value.find(k=>k.value===f.id))==null?void 0:l.available)||!1}})),L=f=>{var k;const l=m.find(r=>r.id===f);return l?l.requiresApiKey?(k=w.value.apiKeys)!=null&&k[f]?"connected":"disconnected":f==="webllm"?y.value[f]==="success"?"connected":"disconnected":"connected":"disconnected"},X=f=>L(f)==="connected"?"Ready":"Not Configured",q=(f,l)=>{G.updateProviderSettings({[f]:l}),Z()},V=(f,l)=>{const k={...w.value.apiKeys,[f]:l};G.updateProviderSettings({apiKeys:k}),Z()},Z=async()=>{W.value="saving";try{G.saveSettings(),W.value="saved",setTimeout(()=>{W.value="idle"},2e3)}catch(f){console.error("Failed to save AI settings:",f),W.value="error",setTimeout(()=>{W.value="idle"},3e3)}},H=async()=>{S.value=!0;try{const f=pe.getProviderConfigs(),l=await Promise.allSettled(f.map(async k=>{var r;return{value:k.id,label:k.name,available:await pe.isProviderAvailable(k.id),description:(r=m.find(U=>U.id===k.id))==null?void 0:r.description}}));$.value=l.filter(k=>k.status==="fulfilled").map(k=>k.value)}catch(f){console.error("Failed to load providers:",f)}finally{S.value=!1}},N=async f=>{z.value={...z.value,[f]:!0},y.value={...y.value,[f]:"testing"};try{let l=!1;f==="webllm"?l=await pe.isWebLLMSupported():l=await pe.isProviderAvailable(f),y.value={...y.value,[f]:l?"success":"error"}}catch(l){console.error(`Failed to test ${f} connection:`,l),y.value={...y.value,[f]:"error"}}finally{z.value={...z.value,[f]:!1},setTimeout(()=>{y.value={...y.value,[f]:"idle"}},3e3)}},le=f=>{A.value={...A.value,[f]:!A.value[f]}},g=()=>{H()},u=f=>{window.open(f,"_blank")},p=f=>{q("provider",f)},O=()=>{M.value=!0},ae=f=>{p("webllm")},he=()=>{g()};return _e(()=>{H()}),(f,l)=>{const k=pt("CustomSelect");return o(),x("div",hl,[e("div",wl,[l[6]||(l[6]=e("div",null,[e("h2",{class:"text-2xl font-bold tracking-tight"},"AI Providers"),e("p",{class:"text-muted-foreground"}," Configure AI providers and manage connections ")],-1)),e("div",kl,[s(t(C),{variant:T.value?"default":"secondary"},{default:a(()=>[d(v(P.value)+" provider"+v(P.value!==1?"s":"")+" configured ",1)]),_:1},8,["variant"]),s(t(D),{onClick:g,disabled:S.value,variant:"outline",size:"sm"},{default:a(()=>[s(t(xe),{class:Q(["h-4 w-4 mr-2",S.value&&"animate-spin"])},null,8,["class"]),l[5]||(l[5]=d(" Refresh "))]),_:1},8,["disabled"])])]),s(t(me),null,{default:a(()=>[s(t(ue),null,{default:a(()=>[s(t(ce),{class:"flex items-center gap-2"},{default:a(()=>[s(t(oe),{class:"h-5 w-5"}),l[7]||(l[7]=d(" Select Primary Provider "))]),_:1}),s(t(ve),null,{default:a(()=>l[8]||(l[8]=[d(" Choose your main AI provider for analysis and code assistance ")])),_:1})]),_:1}),s(t(fe),null,{default:a(()=>[e("div",$l,[(o(),x(J,null,te(m,r=>e("div",{key:r.id,class:Q(["relative p-4 border-2 rounded-lg cursor-pointer transition-all hover:shadow-md group",w.value.provider===r.id?"border-primary bg-primary/5":"border-border hover:border-primary/50"]),onClick:U=>p(r.id)},[e("div",Cl,[e("div",Sl,[(o(),b(ie(r.icon),{class:"h-5 w-5"}))]),e("div",Ll,[e("div",Al,[e("h3",Pl,v(r.name),1),w.value.provider===r.id?(o(),x("div",Dl,[s(t(I),{class:"h-4 w-4"})])):_("",!0)]),e("p",zl,v(r.description),1),e("div",Wl,[s(t(C),{variant:L(r.id)==="connected"?"default":"secondary",class:"text-xs"},{default:a(()=>[d(v(X(r.id)),1)]),_:2},1032,["variant"]),e("span",Bl,v(r.modelCount)+" models ",1)])])])],10,Ml)),64))])]),_:1})]),_:1}),s(t(me),null,{default:a(()=>[s(t(ue),null,{default:a(()=>[s(t(ce),{class:"flex items-center gap-2"},{default:a(()=>[s(t(ht),{class:"h-5 w-5"}),l[9]||(l[9]=d(" Providers Status "))]),_:1}),s(t(ve),null,{default:a(()=>l[10]||(l[10]=[d(" Overview of all provider configurations and connections ")])),_:1})]),_:1}),s(t(fe),null,{default:a(()=>[e("div",jl,[(o(!0),x(J,null,te(j.value,r=>(o(),x("div",{key:r.id,class:"flex items-center justify-between p-3 bg-muted/30 rounded-lg border"},[e("div",Il,[(o(),b(ie(r.icon),{class:"h-4 w-4"})),e("div",null,[e("span",Ul,v(r.name),1),e("div",Gl,[s(t(C),{variant:r.status==="connected"?"default":"secondary",class:"text-xs"},{default:a(()=>[d(v(r.statusText),1)]),_:2},1032,["variant"]),r.isAvailable?(o(),x("span",ql,[s(t(I),{class:"h-3 w-3"}),l[11]||(l[11]=d(" Available "))])):_("",!0)])])])]))),128))])]),_:1})]),_:1}),s(t(me),null,{default:a(()=>[s(t(ue),null,{default:a(()=>[s(t(ce),null,{default:a(()=>l[12]||(l[12]=[d("Provider Configuration")])),_:1}),s(t(ve),null,{default:a(()=>l[13]||(l[13]=[d(" Configure API keys and settings for each provider ")])),_:1})]),_:1}),s(t(fe),{class:"space-y-6"},{default:a(()=>[e("div",Nl,[(o(),x(J,null,te(m,r=>{var U,re;return e("div",{key:r.id,class:"border rounded-lg p-4 space-y-4"},[e("div",Fl,[e("div",Kl,[e("div",Rl,[(o(),b(ie(r.icon),{class:"h-5 w-5"}))]),e("div",El,[e("h4",Tl,v(r.name),1),e("p",Vl,v(r.longDescription),1),e("div",Ol,[(o(!0),x(J,null,te(r.features,ee=>(o(),b(t(C),{key:ee,variant:"outline",class:"text-xs"},{default:a(()=>[d(v(ee),1)]),_:2},1024))),128))])])]),e("div",Yl,[s(t(D),{onClick:ee=>N(r.id),disabled:z.value[r.id],variant:"outline",size:"sm"},{default:a(()=>[z.value[r.id]?(o(),b(t(gt),{key:0,class:"h-4 w-4 mr-2 animate-spin"})):y.value[r.id]==="success"?(o(),b(t(I),{key:1,class:"h-4 w-4 mr-2 text-green-500"})):y.value[r.id]==="error"?(o(),b(t(R),{key:2,class:"h-4 w-4 mr-2 text-red-500"})):_("",!0),l[14]||(l[14]=d(" Test "))]),_:2},1032,["onClick","disabled"]),s(t(D),{onClick:()=>u(r.setupUrl),variant:"ghost",size:"sm"},{default:a(()=>[s(t(bt),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])]),r.requiresApiKey?(o(),x("div",Jl,[s(t(ne),null,{default:a(()=>[d(v(r.apiKeyLabel),1)]),_:2},1024),e("div",Ql,[e("div",Xl,[s(t(Ge),{type:A.value[r.id]?"text":"password",value:((U=w.value.apiKeys)==null?void 0:U[r.id])||"",onInput:ee=>V(r.id,ee.target.value),placeholder:`Enter ${((re=r.apiKeyLabel)==null?void 0:re.toLowerCase())||"API key"}...`,class:"pr-10"},null,8,["type","value","onInput","placeholder"]),s(t(D),{onClick:ee=>le(r.id),variant:"ghost",size:"sm",class:"absolute right-1 top-1/2 -translate-y-1/2 h-8 w-8 p-0"},{default:a(()=>[A.value[r.id]?(o(),b(t(qe),{key:0,class:"h-4 w-4"})):(o(),b(t(xt),{key:1,class:"h-4 w-4"}))]),_:2},1032,["onClick"])])]),l[15]||(l[15]=e("p",{class:"text-xs text-muted-foreground"}," Your API key is stored locally and encrypted ",-1))])):_("",!0),y.value[r.id]==="success"?(o(),x("div",Zl,[s(t(I),{class:"h-4 w-4"}),l[16]||(l[16]=e("span",{class:"text-sm"},"Connection successful - Provider ready to use",-1))])):y.value[r.id]==="error"?(o(),x("div",Hl,[s(t(R),{class:"h-4 w-4"}),l[17]||(l[17]=e("span",{class:"text-sm"},"Connection failed - Check your configuration",-1))])):_("",!0),r.id==="webllm"?(o(),x("div",ea,[e("div",ta,[e("div",sa,[e("div",la,[e("div",aa,[s(t(Se),{class:"h-5 w-5 text-blue-600"}),l[18]||(l[18]=e("h4",{class:"font-medium text-blue-900 dark:text-blue-100"},"WebLLM Settings",-1))]),l[22]||(l[22]=e("p",{class:"text-sm text-blue-700 dark:text-blue-300"}," Complete model management, quick setup wizard, and browser optimization ",-1)),e("div",oa,[s(t(C),{variant:"outline",class:"text-xs border-blue-300 text-blue-700"},{default:a(()=>[s(t(Me),{class:"h-3 w-3 mr-1"}),l[19]||(l[19]=d(" Quick Setup "))]),_:1}),s(t(C),{variant:"outline",class:"text-xs border-blue-300 text-blue-700"},{default:a(()=>[s(t(Le),{class:"h-3 w-3 mr-1"}),l[20]||(l[20]=d(" Model Manager "))]),_:1}),s(t(C),{variant:"outline",class:"text-xs border-blue-300 text-blue-700"},{default:a(()=>[s(t(oe),{class:"h-3 w-3 mr-1"}),l[21]||(l[21]=d(" Auto-Load "))]),_:1})])]),s(t(D),{onClick:O,class:"bg-blue-600 hover:bg-blue-700 text-white font-medium shadow-sm",size:"default"},{default:a(()=>[s(t(oe),{class:"h-4 w-4 mr-2"}),l[23]||(l[23]=d(" Configure Models "))]),_:1})])])])):_("",!0)])}),64))])]),_:1})]),_:1}),s(t(me),null,{default:a(()=>[s(t(ue),null,{default:a(()=>[s(t(ce),null,{default:a(()=>l[24]||(l[24]=[d("Fallback & Advanced Settings")])),_:1}),s(t(ve),null,{default:a(()=>l[25]||(l[25]=[d(" Configure fallback behavior and advanced options ")])),_:1})]),_:1}),s(t(fe),{class:"space-y-4"},{default:a(()=>[e("div",na,[s(t(ne),null,{default:a(()=>l[26]||(l[26]=[d("Fallback Provider")])),_:1}),s(k,{value:w.value.fallbackProvider,"onUpdate:value":l[0]||(l[0]=r=>q("fallbackProvider",r)),options:$.value.filter(r=>r.value!==w.value.provider),placeholder:"Select fallback provider...",disabled:S.value},null,8,["value","options","disabled"]),l[27]||(l[27]=e("p",{class:"text-xs text-muted-foreground"}," Used when the primary provider is unavailable or encounters errors ",-1))]),s(t(yt)),e("div",ia,[s(t(ne),null,{default:a(()=>l[28]||(l[28]=[d("Show Advanced Settings")])),_:1}),s(t(ge),{checked:E.value,"onUpdate:checked":l[1]||(l[1]=r=>E.value=r)},null,8,["checked"])]),E.value?(o(),x("div",da,[e("div",ra,[e("div",ua,[s(t(ne),null,{default:a(()=>l[29]||(l[29]=[d("Auto-retry Failed Requests")])),_:1}),l[30]||(l[30]=e("p",{class:"text-sm text-muted-foreground"}," Automatically retry failed requests using fallback provider ",-1))]),s(t(ge),{checked:w.value.retryFailedRequests,"onUpdate:checked":l[2]||(l[2]=r=>q("retryFailedRequests",r))},null,8,["checked"])]),e("div",ca,[e("div",va,[s(t(ne),null,{default:a(()=>l[31]||(l[31]=[d("Cache Provider Responses")])),_:1}),l[32]||(l[32]=e("p",{class:"text-sm text-muted-foreground"}," Cache responses to reduce API calls and improve performance ",-1))]),s(t(ge),{checked:w.value.cacheResponses,"onUpdate:checked":l[3]||(l[3]=r=>q("cacheResponses",r))},null,8,["checked"])])])):_("",!0)]),_:1})]),_:1}),W.value==="saved"?(o(),b(t(Ie),{key:0,class:"border-green-200 bg-green-50"},{default:a(()=>[s(t(I),{class:"h-4 w-4 text-green-600"}),s(t(je),{class:"text-green-700"},{default:a(()=>l[33]||(l[33]=[d(" Settings saved successfully ")])),_:1})]),_:1})):W.value==="error"?(o(),b(t(Ie),{key:1,variant:"destructive"},{default:a(()=>[s(t(R),{class:"h-4 w-4"}),s(t(je),null,{default:a(()=>l[34]||(l[34]=[d(" Failed to save settings. Please try again. ")])),_:1})]),_:1})):_("",!0),s(_l,{open:M.value,"onUpdate:open":l[4]||(l[4]=r=>M.value=r),onModelLoaded:ae,onSettingsSaved:he},null,8,["open"])])}}});export{pa as default};
