import{c as fe,d as E,u as nt,a as he,b as h,o as d,w as a,r as le,n as xe,g as _e,e,M as rt,f as it,h as we,i as s,_ as dt,m as ye,j as be,k as t,l as ct,p as ut,C as ft,q as b,s as ke,t as O,v as mt,x as pt,y as gt,z as vt,A as ht,B as xt,D as _t,E as w,F as z,G as wt,Z as yt,H as bt,I as kt,J as y,K as L,L as m,N as $t,O as $e,P as W,Q as Se,R as C,S as se,T as St,U as Ct,V as T,W as Tt,X as Ce,Y as Te,$ as ce,a0 as Ne,a1 as Fe,a2 as pe,a3 as Nt,a4 as Ft,a5 as It,a6 as Ie,a7 as Pe,a8 as Ae,a9 as Pt,aa as At,ab as ae,ac as re,ad as ie,ae as Bt,af as Mt,ag as Et,ah as Rt,ai as Vt,aj as Dt,ak as jt,al as Ut,am as qt,an as ge,ao as zt,ap as ve,aq as Lt,ar as te,as as Ot,at as Qt,au as q,av as Ht,aw as Gt,ax as D,ay as Yt,az as Wt,aA as Jt,aB as Kt,aC as Xt}from"./index-dr6P1g6z.js";import{useNotaImport as Zt}from"./useNotaImport-BwQatROU.js";import{M as ue}from"./mail-IiZTGFNd.js";import{S as es}from"./shield-mH5N1V2Z.js";import{S as ts}from"./settings-2-Cw_PU-9P.js";/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=fe("FileUpIcon",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=fe("GithubIcon",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=fe("TwitterIcon",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);var ls=E({__name:"DropdownMenuCheckboxItem",props:{modelValue:{type:[Boolean,String],required:!1},disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select","update:modelValue"],setup(g,{emit:u}){const o=g,f=nt(u);return he(),(p,x)=>(d(),h(e(rt),xe(_e({...o,...e(f)})),{default:a(()=>[le(p.$slots,"default")]),_:3},16))}}),os=ls,ns=E({__name:"DropdownMenuItemIndicator",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(g){const u=g;return he(),(o,n)=>(d(),h(e(it),xe(_e(u)),{default:a(()=>[le(o.$slots,"default")]),_:3},16))}}),rs=ns;const is={class:"flex items-center justify-center py-10"},ds=E({__name:"TableEmpty",props:{class:{},colspan:{default:1}},setup(g){const u=g,o=we(u,"class");return(n,f)=>(d(),h(ct,null,{default:a(()=>[s(dt,ye({class:e(be)("p-4 whitespace-nowrap align-middle text-sm text-foreground",u.class)},e(o)),{default:a(()=>[t("div",is,[le(n.$slots,"default")])]),_:3},16,["class"])]),_:3}))}}),cs={class:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center"},us=E({__name:"DropdownMenuCheckboxItem",props:{modelValue:{type:[Boolean,String]},disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{}},emits:["select","update:modelValue"],setup(g,{emit:u}){const o=g,n=u,f=we(o,"class"),p=ut(f,n);return(x,c)=>(d(),h(e(os),ye(e(p),{class:e(be)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",o.class)}),{default:a(()=>[t("span",cs,[s(e(rs),null,{default:a(()=>[s(e(ft),{class:"w-4 h-4"})]),_:1})]),le(x.$slots,"default")]),_:3},16,["class"]))}});function fs(){const g=b(!1),u=ke();return{isSubscribing:g,subscribeToNewsletter:async()=>{if(g.value)return!1;if(!u.currentUser)return O("You must be logged in to subscribe to the newsletter.",{description:"Authentication Required"}),!1;g.value=!0;try{const n=u.currentUser,f=mt(pt,"newsletterSubscriptions",n.uid);return await gt(f,{email:n.email,displayName:n.displayName||"",subscribedAt:vt(),uid:n.uid}),O("ðŸŽ‰ You have successfully subscribed to the newsletter!",{description:"Subscription Successful"}),!0}catch(n){return console.error("Error subscribing to newsletter:",n),O("There was an error subscribing. Please try again.",{description:"Subscription Failed"}),!1}finally{g.value=!1}}}}const ms={class:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-gradient-to-br from-orange-500 to-red-500 text-white shadow-lg"},ps={class:"space-y-2"},gs={class:"grid grid-cols-1 gap-3 my-4"},vs={class:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg"},hs={class:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg"},xs={class:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg"},_s={class:"font-semibold"},ws=E({__name:"NewsletterModal",props:{open:{type:Boolean}},emits:["update:open"],setup(g,{emit:u}){const o=u,{subscribeToNewsletter:n,isSubscribing:f}=fs(),p=async()=>{await n()&&o("update:open",!1)};return(x,c)=>(d(),h(e($t),{open:x.open,"onUpdate:open":c[0]||(c[0]=$=>o("update:open",$))},{default:a(()=>[s(e(ht),{class:"sm:max-w-lg"},{default:a(()=>[s(e(xt),{class:"text-center space-y-4"},{default:a(()=>[t("div",ms,[s(e(ue),{class:"h-8 w-8"})]),t("div",ps,[s(e(_t),{class:"text-2xl font-bold bg-gradient-to-r from-orange-500 to-red-500 bg-clip-text text-transparent"},{default:a(()=>c[1]||(c[1]=[w(" Escape Technofeudalism ")])),_:1}),s(e(z),{variant:"outline",class:"mx-auto text-xs"},{default:a(()=>c[2]||(c[2]=[w(" Weekly Rebellion Digest ")])),_:1})]),s(e(wt),{class:"text-left space-y-4 text-muted-foreground leading-relaxed"},{default:a(()=>[c[6]||(c[6]=t("p",{class:"text-foreground font-medium"}," Tired of being a free-tier serf, selling your soul and data to the platform overlords? ",-1)),c[7]||(c[7]=t("p",null," Join the resistance. Our newsletter delivers your weekly dose of digital independence, packed with: ",-1)),t("div",gs,[t("div",vs,[s(e(yt),{class:"h-5 w-5 text-yellow-500 flex-shrink-0"}),c[3]||(c[3]=t("span",{class:"text-sm"},"Open-source tools and BashNota updates",-1))]),t("div",hs,[s(e(es),{class:"h-5 w-5 text-green-500 flex-shrink-0"}),c[4]||(c[4]=t("span",{class:"text-sm"},"Privacy-first development tips",-1))]),t("div",xs,[s(e(bt),{class:"h-5 w-5 text-orange-500 flex-shrink-0"}),c[5]||(c[5]=t("span",{class:"text-sm"},"Developer humor & occasional GIFs",-1))])]),c[8]||(c[8]=t("p",{class:"text-xs text-muted-foreground text-center"}," No spam, no data harvesting, just pure knowledge for independent minds. ",-1))]),_:1})]),_:1}),s(e(kt),{class:"mt-6 space-y-3"},{default:a(()=>[s(e(y),{onClick:p,class:"w-full h-12 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-[1.02]",disabled:e(f)},{default:a(()=>[e(f)?(d(),h(e(L),{key:0,class:"mr-2 h-4 w-4 rounded-full"})):(d(),h(e(ue),{key:1,class:"mr-2 h-4 w-4"})),t("span",_s,m(e(f)?"Joining the Resistance...":"Join the Resistance"),1)]),_:1},8,["disabled"]),c[9]||(c[9]=t("p",{class:"text-xs text-center text-muted-foreground"}," Unsubscribe anytime. Your data stays yours. ",-1))]),_:1})]),_:1})]),_:1},8,["open"]))}}),ys={class:"max-w-lg mx-auto space-y-8 p-6"},bs={class:"text-center space-y-6"},ks={class:"space-y-3"},$s={class:"text-muted-foreground mt-1"},Ss={class:"space-y-4"},Cs={class:"flex items-center gap-3"},Ts={class:"p-1 bg-white/20 rounded-lg"},Ns={class:"flex gap-3"},Fs={class:"font-medium"},Is={class:"flex justify-center gap-3 flex-wrap"},Ps={class:"text-xs font-medium text-muted-foreground"},As={class:"text-xs font-medium text-muted-foreground"},Bs=E({__name:"HomeHeader",emits:["create-nota"],setup(g,{emit:u}){const o=u,n=ke(),f=$e(),p=b(!1),{importNota:x,importJupyterNotebook:c,isImporting:$}=Zt(),N=b(null),M=b(!1),F=b(null),I=b(!1),R=()=>{o("create-nota")},Q=()=>{f.push("/login")},P=()=>{window.open("https://github.com/bashnota/bashnota","_blank")},_=()=>{window.open("https://twitter.com/bashnota","_blank")},S=async()=>{try{M.value=!0;const k=await fetch("https://api.github.com/repos/bashnota/bashnota");if(k.ok){const i=await k.json();N.value=i.stargazers_count}}catch(k){console.error("Failed to fetch GitHub stars:",k)}finally{M.value=!1}},V=async()=>{try{I.value=!0,F.value=null}catch(k){console.error("Failed to fetch Twitter followers:",k)}finally{I.value=!1}},H=async()=>{await x([It.nota])},oe=async()=>{await c()},J=W(()=>{var i;const k=(i=n.currentUser)==null?void 0:i.displayName;return k?`Welcome back, ${k}!`:""}),K=W(()=>N.value===null?null:N.value>=1e3?`${(N.value/1e3).toFixed(1)}k`:N.value.toString()),G=W(()=>F.value===null?null:F.value>=1e3?`${(F.value/1e3).toFixed(1)}k`:F.value.toString());return Se(()=>{S(),V()}),(k,i)=>(d(),C(se,null,[t("div",ys,[t("div",bs,[t("div",ks,[i[3]||(i[3]=t("div",{class:"inline-flex items-center justify-center p-3 bg-gradient-to-br from-primary/10 to-primary/5 rounded-2xl border border-primary/20 shadow-sm"},[t("img",{src:St,alt:"BashNota Logo",class:"h-8 w-8"})],-1)),t("div",null,[i[2]||(i[2]=t("h1",{class:"text-3xl font-bold text-foreground tracking-tight"},"BashNota",-1)),t("p",$s,m(J.value),1)])]),i[4]||(i[4]=t("div",{class:"space-y-3"},[t("h2",{class:"text-xl font-semibold text-foreground leading-tight"}," Your second brain, cracked on code and AI "),t("p",{class:"text-muted-foreground leading-relaxed max-w-sm mx-auto"}," Build extensions, own your data, break free from platform lock-in. Open source tools for independent minds. ")],-1))]),t("div",Ss,[s(e(y),{onClick:R,class:"w-full h-14 bg-primary hover:bg-primary/90 text-primary-foreground shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-[1.02]",size:"lg"},{default:a(()=>[t("div",Cs,[t("div",Ts,[s(e(Ct),{class:"h-5 w-5"})]),i[5]||(i[5]=t("div",{class:"text-left"},[t("div",{class:"font-semibold text-base"},"Create a Nota")],-1))])]),_:1}),t("div",Ns,[e(n).isAuthenticated?T("",!0):(d(),h(e(y),{key:0,onClick:Q,variant:"outline",class:"flex-1 h-12 hover:bg-muted/50 transition-colors"},{default:a(()=>[s(e(Tt),{class:"h-4 w-4 mr-2"}),i[6]||(i[6]=t("span",{class:"font-medium"},"Sign In",-1))]),_:1})),s(e(Ce),null,{default:a(()=>[s(e(Te),{asChild:""},{default:a(()=>[s(e(y),{variant:"outline",class:ce([e(n).isAuthenticated?"flex-1":"flex-[0.6]","h-12 hover:bg-muted/50 transition-colors"]),disabled:e($)},{default:a(()=>[s(e(de),{class:"h-4 w-4 mr-2"}),t("span",Fs,m(e($)?"Importing...":"Import"),1),s(e(Ne),{class:"h-3 w-3 ml-1"})]),_:1},8,["class","disabled"])]),_:1}),s(e(Fe),{align:"end",class:"w-48"},{default:a(()=>[s(e(pe),{onClick:H,class:"cursor-pointer",disabled:e($)},{default:a(()=>[s(e(de),{class:"h-4 w-4 mr-2"}),i[7]||(i[7]=t("div",{class:"flex-1"},[t("div",{class:"font-medium text-sm"},"Import Nota"),t("div",{class:"text-xs text-muted-foreground"},".nota files")],-1))]),_:1},8,["disabled"]),s(e(pe),{onClick:oe,class:"cursor-pointer",disabled:e($)},{default:a(()=>[s(e(de),{class:"h-4 w-4 mr-2"}),i[8]||(i[8]=t("div",{class:"flex-1"},[t("div",{class:"font-medium text-sm"},"Import Notebook"),t("div",{class:"text-xs text-muted-foreground"},"Jupyter .ipynb files")],-1))]),_:1},8,["disabled"])]),_:1})]),_:1}),e(n).isAuthenticated?(d(),h(e(y),{key:1,onClick:i[0]||(i[0]=A=>p.value=!0),variant:"outline",class:"flex-[0.8] h-12 hover:bg-muted/50 transition-colors group"},{default:a(()=>[s(e(ue),{class:"h-4 w-4 mr-2"}),i[9]||(i[9]=t("span",{class:"font-medium"},"Newsletter",-1))]),_:1})):T("",!0),s(e(y),{onClick:P,variant:"outline",class:ce([e(n).isAuthenticated?"flex-[0.5]":"flex-[0.3]","h-12 hover:bg-muted/50 transition-colors group"])},{default:a(()=>[s(e(ss),{class:"h-4 w-4 mr-2"}),i[10]||(i[10]=t("span",{class:"font-medium"},"Contribute",-1)),s(e(Nt),{class:"h-3 w-3 ml-1 opacity-60 group-hover:opacity-100 transition-opacity"})]),_:1},8,["class"])])]),t("div",Is,[N.value!==null||M.value?(d(),C("div",{key:0,class:"inline-flex items-center gap-2 px-3 py-1.5 bg-muted/50 rounded-full border border-border/50 hover:bg-muted/70 transition-colors cursor-pointer",onClick:P},[s(e(Ft),{class:"h-3 w-3 text-yellow-500 fill-yellow-500"}),t("span",Ps,m(M.value?"...":K.value)+" stars ",1)])):T("",!0),t("div",{class:"inline-flex items-center gap-2 px-3 py-1.5 bg-muted/50 rounded-full border border-border/50 hover:bg-muted/70 transition-colors cursor-pointer",onClick:_},[s(e(as),{class:"h-3 w-3 text-blue-500"}),t("span",As,m(I.value?"...":F.value!==null?`${G.value} followers`:"Follow @bashnota"),1)]),i[11]||(i[11]=t("div",{class:"inline-flex items-center gap-2 px-3 py-1.5 bg-muted/50 rounded-full border border-border/50"},[t("div",{class:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),t("span",{class:"text-xs font-medium text-muted-foreground"}," Open Source & Privacy First ")],-1))])]),s(ws,{open:p.value,"onUpdate:open":i[1]||(i[1]=A=>p.value=A)},null,8,["open"])],64))}}),Ms=Ie(Bs,[["__scopeId","data-v-b1a770e4"]]),Es={class:"flex flex-col h-full space-y-4"},Rs={class:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between"},Vs={class:"flex items-center gap-2"},Ds={class:"flex flex-col gap-2 sm:flex-row sm:items-center"},js={key:0,class:"mt-3 pt-3 border-t space-y-3"},Us={class:"flex flex-wrap items-center gap-2 text-sm"},qs={class:"flex items-center gap-1"},zs={class:"flex items-center justify-between w-full"},Ls={class:"flex items-center justify-between w-full"},Os={class:"flex items-center gap-1"},Qs={class:"p-3 border-b bg-muted/30"},Hs={class:"flex items-center justify-between"},Gs={class:"flex items-center gap-2 text-sm text-muted-foreground"},Ys={class:"flex items-center gap-3"},Ws={key:0,class:"flex items-center gap-2"},Js={class:"text-xs text-muted-foreground"},Ks={key:1,class:"p-8"},Xs={class:"space-y-4"},Zs={key:2,class:"max-h-[600px] overflow-y-auto"},ea={class:"text-center py-8"},ta={class:"text-muted-foreground"},sa={class:"flex items-center justify-between"},aa={class:"text-sm text-muted-foreground"},la={class:"flex items-center gap-1"},oa={key:1,class:"px-2 text-muted-foreground"},na=E({__name:"HomeNotaList",props:{isLoading:{type:Boolean},showFavorites:{type:Boolean},searchQuery:{},selectedTag:{},notas:{},totalCount:{}},emits:["create-nota","update:selectedTag","clear-filters","update:searchQuery","update:showFavorites","page-change"],setup(g,{emit:u}){const o=g,n=u,f=$e(),p=Pe(),{toggleNotaFavorite:x}=Ae(),{isProcessing:c,batchToggleFavorite:$,batchDelete:N,batchAddTags:M,batchRemoveTags:F}=Pt(),{localSearchQuery:I,selectedQuickFilters:R,selectedTags:Q,viewFilter:P,filterOptions:_,availableTags:S,activeFiltersCount:V,currentSortOption:H,sortDirection:oe,hasSelection:J,selectionCount:K,currentPage:G,totalPages:k,paginatedItems:i,paginationInfo:A,getVisiblePages:Be,goToPage:Me,nextPage:Ee,previousPage:Re,isAllSelected:Ve,isIndeterminate:De,handleSelectAll:je,updateSearch:Ue,toggleQuickFilter:qe,toggleTag:ze,handleSort:me,handleSelectNota:Le,isNotaSelected:Oe,clearSelection:j,getSelectedIds:Qe,getSelectedNotas:He,clearAllFilters:Ge,formatDate:Ye,SORT_OPTIONS:We}=At({notas:()=>o.notas,initialSearchQuery:o.searchQuery,showFavorites:()=>o.showFavorites,itemsPerPage:10,onSearchUpdate:v=>n("update:searchQuery",v),onFiltersChange:()=>n("clear-filters")}),Je=b(null),Ke=b(!1),X=b(!1),Xe=()=>{Ge(),j(),n("clear-filters"),n("update:selectedTag",""),n("update:showFavorites",!1)},Ze=v=>{Je.value=v,Ke.value=!0},et=v=>{f.push(`/nota/${v.id}`)},tt=async v=>{const l=await $(v,o.notas,async r=>{await x(r)});l.success&&j(),console.log(l.message)},st=async v=>{const l=await N(v,async r=>{await p.deleteItem(r)});l.success&&j(),console.log(l.message)},at=async(v,l)=>{const r=await M(v,l,async(B,ee)=>{const Y=o.notas.find(U=>U.id===B);if(Y){const U=Y.tags||[],ne=[...new Set([...U,...ee])];await p.updateNota(B,{tags:ne})}});r.success&&j(),console.log(r.message)},lt=async(v,l)=>{const r=await F(v,l,async(B,ee)=>{const Y=o.notas.find(U=>U.id===B);if(Y){const ne=(Y.tags||[]).filter(ot=>!ee.includes(ot));await p.updateNota(B,{tags:ne})}});r.success&&j(),console.log(r.message)},Z=W(()=>V.value>0||o.selectedTag!=="");return ae(()=>o.searchQuery,v=>{v!==I.value&&(I.value=v)}),ae(()=>o.showFavorites,v=>{v?R.value.add("favorites"):R.value.delete("favorites")}),(v,l)=>(d(),C("div",Es,[s(e(re),{class:"border-l-primary/30"},{default:a(()=>[s(e(ie),{class:"p-4"},{default:a(()=>[t("div",Rs,[t("div",Vs,[s(e(Bt),{class:"h-4 w-4"}),l[6]||(l[6]=t("span",{class:"font-semibold"},"Notas",-1)),s(e(z),{variant:"secondary",class:"text-xs"},{default:a(()=>[w(m(e(i).length),1)]),_:1}),Z.value?(d(),h(e(z),{key:0,variant:"outline",class:"text-xs border-primary/50 text-primary"},{default:a(()=>[w(m(e(V))+" filter"+m(e(V)>1?"s":"")+" active ",1)]),_:1})):T("",!0)]),t("div",Ds,[s(Mt,{"model-value":e(I),placeholder:"Search notas...","onUpdate:modelValue":e(Ue),class:"w-full sm:w-64"},null,8,["model-value","onUpdate:modelValue"]),s(e(y),{variant:"outline",size:"sm",class:ce(["h-8",{"bg-primary/10 text-primary":X.value}]),onClick:l[0]||(l[0]=r=>X.value=!X.value)},{default:a(()=>[s(e(Et),{class:"h-3 w-3 mr-1"}),l[7]||(l[7]=w(" Filters ")),e(V)?(d(),h(e(z),{key:0,variant:"secondary",class:"ml-1 h-4 text-xs"},{default:a(()=>[w(m(e(V)),1)]),_:1})):T("",!0)]),_:1},8,["class"])])]),X.value?(d(),C("div",js,[s(Rt,{filters:e(_),"selected-filters":e(R),onToggleFilter:e(qe)},null,8,["filters","selected-filters","onToggleFilter"]),t("div",Us,[t("div",qs,[l[10]||(l[10]=t("span",{class:"text-muted-foreground text-xs"},"View:",-1)),s(e(Vt),{value:e(P),"onUpdate:value":l[1]||(l[1]=r=>Dt(P)?P.value=r:null)},{default:a(()=>[s(e(jt),{class:"w-28 h-6 text-xs"},{default:a(()=>[s(e(Ut))]),_:1}),s(e(qt),null,{default:a(()=>[s(e(ge),{value:"all"},{default:a(()=>[t("div",zs,[l[8]||(l[8]=t("span",null,"All",-1)),s(e(z),{variant:"secondary",class:"ml-1 text-xs"},{default:a(()=>[w(m(o.notas.length),1)]),_:1})])]),_:1}),s(e(ge),{value:"favorites"},{default:a(()=>[t("div",Ls,[l[9]||(l[9]=t("span",null,"Favorites",-1)),s(e(z),{variant:"secondary",class:"ml-1 text-xs"},{default:a(()=>[w(m(o.notas.filter(r=>r.favorite).length),1)]),_:1})])]),_:1})]),_:1})]),_:1},8,["value"])]),s(zt,{tags:e(S),"selected-tags":e(Q),onToggleTag:e(ze)},null,8,["tags","selected-tags","onToggleTag"]),t("div",Os,[s(e(ts),{class:"h-3 w-3 text-muted-foreground"}),l[11]||(l[11]=t("span",{class:"text-muted-foreground text-xs"},"Sort:",-1)),s(e(Ce),null,{default:a(()=>[s(e(Te),{"as-child":""},{default:a(()=>[s(e(y),{variant:"outline",size:"sm",class:"h-6 px-2 text-xs"},{default:a(()=>{var r;return[w(m(((r=e(H))==null?void 0:r.label)||"Sort")+" ",1),s(e(Ne),{class:"h-3 w-3 ml-1"})]}),_:1})]),_:1}),s(e(Fe),null,{default:a(()=>[(d(!0),C(se,null,ve(e(We),r=>{var B;return d(),h(e(us),{key:r.key,checked:((B=e(H))==null?void 0:B.key)===r.key,onClick:ee=>e(me)(r.key)},{default:a(()=>[w(m(r.label),1)]),_:2},1032,["checked","onClick"])}),128))]),_:1})]),_:1})]),Z.value?(d(),h(e(y),{key:0,variant:"ghost",size:"sm",class:"h-6 px-2 text-xs text-muted-foreground hover:text-foreground",onClick:Xe},{default:a(()=>[s(e(Lt),{class:"h-3 w-3 mr-1"}),l[12]||(l[12]=w(" Clear All "))]),_:1})):T("",!0)])])):T("",!0)]),_:1})]),_:1}),s(e(re),null,{default:a(()=>[s(e(ie),{class:"p-0"},{default:a(()=>[t("div",Qs,[t("div",Hs,[t("div",Gs,[s(e(te),{class:"h-4 w-4"}),t("span",null," Showing "+m(e(A).startItem)+"-"+m(e(A).endItem)+" of "+m(e(A).totalItems)+" notas ",1)]),t("div",Ys,[e(J)?(d(),C("div",Ws,[t("span",Js,m(e(K))+" selected",1)])):T("",!0),s(e(y),{variant:"default",size:"sm",class:"h-7",onClick:l[2]||(l[2]=r=>n("create-nota"))},{default:a(()=>[s(e(te),{class:"h-3 w-3 mr-1"}),l[13]||(l[13]=w(" New Nota "))]),_:1})])])]),e(J)?(d(),h(Ot,{key:0,"selected-count":e(K),"selected-ids":e(Qe)(),"selected-notas":e(He)(o.notas),"all-tags":e(S),"is-processing":e(c),onBatchToggleFavorite:tt,onBatchDelete:st,onBatchAddTags:at,onBatchRemoveTags:lt,onClearSelection:e(j)},null,8,["selected-count","selected-ids","selected-notas","all-tags","is-processing","onClearSelection"])):T("",!0),v.isLoading?(d(),C("div",Ks,[t("div",Xs,[s(e(L),{class:"h-8 w-full"}),s(e(L),{class:"h-8 w-full"}),s(e(L),{class:"h-8 w-full"}),s(e(L),{class:"h-8 w-full"}),s(e(L),{class:"h-8 w-full"})])])):e(i).length>0?(d(),C("div",Zs,[s(Qt,{notas:e(i),"current-sort-option":e(H),"sort-direction":e(oe),"is-all-selected":e(Ve),"is-indeterminate":e(De),"format-date":e(Ye),"is-nota-selected":e(Oe),mode:"list",onSort:e(me),onSelectAll:e(je),onSelectNota:e(Le),onNotaClick:et,onPreviewNota:Ze,onToggleFavorite:e(x),onDeleteNota:l[3]||(l[3]=r=>e(p).deleteItem(r)),onTagClick:l[4]||(l[4]=r=>n("update:selectedTag",r))},null,8,["notas","current-sort-option","sort-direction","is-all-selected","is-indeterminate","format-date","is-nota-selected","onSort","onSelectAll","onSelectNota","onToggleFavorite"])])):(d(),h(e(ds),{key:3},{default:a(()=>[t("div",ea,[s(e(te),{class:"mx-auto h-12 w-12 text-muted-foreground/50"}),l[15]||(l[15]=t("h3",{class:"mt-4 text-lg font-semibold"},"No notas found",-1)),t("p",ta,m(Z.value?"Try adjusting your filters":"Create your first nota to get started"),1),Z.value?T("",!0):(d(),h(e(y),{key:0,class:"mt-4",onClick:l[5]||(l[5]=r=>n("create-nota"))},{default:a(()=>[s(e(te),{class:"h-4 w-4 mr-2"}),l[14]||(l[14]=w(" Create Nota "))]),_:1}))])]),_:1}))]),_:1})]),_:1}),e(k)>1?(d(),h(e(re),{key:0},{default:a(()=>[s(e(ie),{class:"p-4"},{default:a(()=>[t("div",sa,[t("div",aa," Showing "+m(e(A).startItem)+" to "+m(e(A).endItem)+" of "+m(e(A).totalItems)+" entries ",1),t("div",la,[s(e(y),{variant:"outline",size:"sm",disabled:e(G)===1,onClick:e(Re)},{default:a(()=>l[16]||(l[16]=[w(" Previous ")])),_:1},8,["disabled","onClick"]),(d(!0),C(se,null,ve(e(Be)(),r=>(d(),C(se,{key:r},[typeof r=="number"?(d(),h(e(y),{key:0,variant:r===e(G)?"default":"outline",size:"sm",class:"w-9",onClick:B=>e(Me)(r)},{default:a(()=>[w(m(r),1)]),_:2},1032,["variant","onClick"])):(d(),C("span",oa,m(r),1))],64))),128)),s(e(y),{variant:"outline",size:"sm",disabled:e(G)===e(k),onClick:e(Ee)},{default:a(()=>l[17]||(l[17]=[w(" Next ")])),_:1},8,["disabled","onClick"])])])]),_:1})]),_:1})):T("",!0)]))}});function ra(){const g=q(D.preferences.viewType,"grid"),u=q(D.preferences.activeView,"notas"),o=q(D.preferences.showFavorites,!1),n=q(D.preferences.lastSearch,""),f=q(D.preferences.lastTag,""),p=q(D.preferences.layoutPreferences,{showAnalytics:!0,showRecommendations:!0,compactMode:!1,sidebarWidth:"normal"}),x=b(1);return ae([o,n,f],()=>{x.value=1}),{viewType:g,activeView:u,showFavorites:o,searchQuery:n,selectedTag:f,layoutPreferences:p,currentPage:x,clearFilters:()=>{o.value=!1,n.value="",f.value="",x.value=1},resetPreferences:()=>{g.value="grid",u.value="notas",o.value=!1,n.value="",f.value="",x.value=1,p.value={showAnalytics:!0,showRecommendations:!0,compactMode:!1,sidebarWidth:"normal"}},STORAGE_KEYS:D.preferences,VIEW_TYPES:Gt,ACTIVE_VIEWS:Ht}}const ia={class:"flex flex-col w-full h-screen lg:h-screen bg-background overflow-hidden lg:overflow-hidden"},da={class:"flex-1 overflow-auto lg:overflow-hidden h-full w-full"},ca={class:"container max-w-full px-3 sm:px-4 lg:px-6 h-full py-4 sm:py-6 lg:h-full lg:overflow-hidden"},ua={class:"grid grid-cols-1 lg:grid-cols-5 gap-4 sm:gap-6 h-full w-full max-w-full lg:h-full lg:overflow-hidden"},fa={class:"lg:col-span-2 flex flex-col h-auto lg:h-full lg:min-h-0 w-full min-w-0"},ma={class:"flex-1 lg:overflow-y-auto lg:overflow-x-hidden lg:scrollbar-thin lg:scrollbar-thumb-muted lg:scrollbar-track-background w-full"},pa={class:"lg:col-span-3 flex flex-col h-auto lg:h-full lg:min-h-0 w-full min-w-0"},ga={class:"flex flex-col h-auto lg:h-full w-full min-w-0"},va=3,ha=E({__name:"HomeView",setup(g){const u=Pe(),o=b(!0),n=b(!1),f=b(null),p=b(0),{viewType:x,showFavorites:c,searchQuery:$,selectedTag:N,clearFilters:M}=ra(),{createNewNota:F}=Ae();W(()=>u.rootItems.length>0);const I=async(P=!1)=>{try{f.value=null,P?n.value=!0:o.value=!0,await u.loadNotas(),p.value=0,P&&O("Notas refreshed successfully")}catch(_){console.error("Failed to load notas:",_),f.value=_ instanceof Error?_.message:"Failed to load notas",p.value<va?(p.value++,setTimeout(()=>I(),1e3*p.value)):O("Failed to load notas. Please try again later.")}finally{o.value=!1,n.value=!1}},R=()=>{p.value=0,I()};Se(()=>{I()}),ae(()=>u.rootItems,()=>{o.value&&(o.value=!1)},{immediate:!0});const Q=()=>{M(),O("Filters cleared")};return Yt(()=>{}),(P,_)=>(d(),C("div",ia,[t("main",da,[t("div",ca,[t("div",ua,[t("div",fa,[t("div",ma,[s(Ms,{onCreateNota:e(F)},null,8,["onCreateNota"])])]),t("div",pa,[f.value&&!o.value?(d(),h(e(Xt),{key:0,variant:"destructive",class:"mb-4"},{default:a(()=>[s(e(Wt),{class:"h-4 w-4"}),s(e(Jt),{class:"flex items-center justify-between w-full"},{default:a(()=>[t("span",null,m(f.value),1),s(e(y),{variant:"outline",size:"sm",onClick:R,class:"ml-4"},{default:a(()=>[s(e(Kt),{class:"h-3 w-3 mr-1"}),_[4]||(_[4]=w(" Retry "))]),_:1})]),_:1})]),_:1})):T("",!0),t("div",ga,[s(na,{"is-loading":o.value,"view-type":e(x),"show-favorites":e(c),"search-query":e($),"selected-tag":e(N),notas:e(u).rootItems,onCreateNota:e(F),"onUpdate:selectedTag":_[0]||(_[0]=S=>N.value=S),"onUpdate:viewType":_[1]||(_[1]=S=>x.value=S),"onUpdate:searchQuery":_[2]||(_[2]=S=>$.value=S),"onUpdate:showFavorites":_[3]||(_[3]=S=>c.value=S),onClearFilters:Q},null,8,["is-loading","view-type","show-favorites","search-query","selected-tag","notas","onCreateNota"])])])])])])]))}}),ka=Ie(ha,[["__scopeId","data-v-42f48272"]]);export{ka as default};
