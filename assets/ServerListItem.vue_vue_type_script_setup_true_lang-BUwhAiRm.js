import{d as E,q as _,Q as I,ay as L,b as O,o,e as a,ac as T,w as l,i as r,dU as U,k as s,$ as v,bS as j,L as n,J as h,b$ as V,E as D,bo as J,aP as M,dV as q,a0 as F,dW as K,R as c,V as P,S as Q,ap as W,bY as Y,bT as A}from"./index-BqzSlmqz.js";const G={class:"flex items-center justify-between"},H={class:"flex items-center gap-3"},X={class:"font-medium"},Z={class:"flex items-center gap-2"},ee={class:"text-sm text-muted-foreground"},se={class:"flex items-center gap-2"},te={key:0,class:"mb-4"},ae={class:"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 p-3 rounded-md text-sm"},re={key:1,class:"space-y-3"},ne={class:"font-medium"},le={class:"text-sm text-muted-foreground"},oe={key:2,class:"text-sm text-muted-foreground"},ce=E({__name:"ServerListItem",props:{server:{},kernels:{}},emits:["remove","kernels-updated"],setup(N,{emit:R}){const k=N,b=R,m=_(!1),d=_(!1),t=_(null),z=new A,f=async()=>{try{const e=await z.testConnection(k.server);t.value=e}catch(e){t.value={success:!1,message:e instanceof Error?e.message:"Connection failed"}}},B=async()=>{var e;d.value=!0;try{await f(),(e=t.value)!=null&&e.success&&b("kernels-updated",k.server)}finally{d.value=!1}};return I(()=>{f();const e=setInterval(f,3e4);L(()=>clearInterval(e))}),(e,i)=>(o(),O(a(T),{class:"p-4"},{default:l(()=>[r(a(U),{open:m.value,"onUpdate:open":i[1]||(i[1]=u=>m.value=u)},{default:l(()=>{var u,x,y,w,C,S,$;return[s("div",G,[s("div",H,[s("div",{class:v(["rounded-md border p-2",{"bg-green-50 dark:bg-green-700 border-green-950":(u=t.value)==null?void 0:u.success,"bg-red-50 dark:bg-red-700 border-red-950":((x=t.value)==null?void 0:x.success)===!1,"bg-muted text-foreground":t.value===null}])},[r(a(j),{class:"w-6 h-6"})],2),s("div",null,[s("h3",X,[s("code",null,n(e.server.ip)+":"+n(e.server.port),1)]),s("div",Z,[s("span",{class:v(["text-sm px-2 py-0.5 rounded",{"bg-green-100 text-green-700 dark:bg-green-700/20 dark:text-green-300":(y=t.value)==null?void 0:y.success,"bg-red-100 text-red-700 dark:bg-red-700/20 dark:text-red-300":((w=t.value)==null?void 0:w.success)===!1,"bg-muted text-foreground":t.value===null}])},n((C=t.value)!=null&&C.success?"Online":((S=t.value)==null?void 0:S.success)===!1?"Offline":"Checking..."),3),s("span",ee,n((($=e.kernels)==null?void 0:$.length)||0)+" kernels available ",1)])])]),s("div",se,[r(a(h),{variant:"outline",size:"sm",onClick:V(B,["stop"]),disabled:d.value,class:"flex items-center gap-2"},{default:l(()=>[r(a(J),{class:v(["w-4 h-4",{"animate-spin":d.value}])},null,8,["class"]),D(" "+n(d.value?"Refreshing...":"Refresh"),1)]),_:1},8,["disabled"]),r(a(h),{variant:"ghost",size:"sm",onClick:i[0]||(i[0]=V(g=>b("remove",e.server),["stop"])),class:"text-destructive hover:text-destructive"},{default:l(()=>[r(a(M),{class:"w-4 h-4"})]),_:1}),r(a(q),null,{default:l(()=>[r(a(h),{variant:"ghost",size:"sm"},{default:l(()=>[r(a(F),{class:v(["w-4 h-4 transition-transform duration-200",{"transform rotate-180":m.value}])},null,8,["class"])]),_:1})]),_:1})])]),r(a(K),{class:"mt-4"},{default:l(()=>{var g;return[((g=t.value)==null?void 0:g.success)===!1?(o(),c("div",te,[s("div",ae,n(t.value.message),1)])):P("",!0),e.kernels&&e.kernels.length>0?(o(),c("div",re,[(o(!0),c(Q,null,W(e.kernels,p=>(o(),c("div",{key:p.name,class:"flex items-center gap-3 p-2 rounded-md bg-muted/50"},[r(a(Y),{class:"w-5 h-5"}),s("div",null,[s("div",ne,n(p.spec.display_name),1),s("div",le,n(p.spec.language),1)])]))),128))])):(o(),c("div",oe," No kernels available. Click refresh to check for kernels. "))]}),_:1})]}),_:1},8,["open"])]),_:1}))}});export{ce as _};
