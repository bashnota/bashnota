const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BQvMrvkP.js","assets/index-CbClAIui.css"])))=>i.map(i=>d[i]);
import{c as R,d as M,s as S,q as g,P as w,Q as q,R as v,o as d,k as s,L as x,i as a,V as $,e as t,b0 as h,w as r,E as u,bv as B,$ as E,J as k,b as j,cw as K,cb as Z,cx as G,O as H,bJ as A,bK as U,bL as V,ad as I,cv as W,cy as X,ae as ee,cz as te,ac as N,aO as ae,aQ as D,t as P}from"./index-BQvMrvkP.js";import{_ as se}from"./CardFooter.vue_vue_type_script_setup_true_lang-CoeCOrK7.js";import{M as le}from"./mail-BxjEffk5.js";/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=R("RefreshCcwIcon",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=R("ShieldCheckIcon",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),oe={class:"space-y-4"},ue={class:"text-sm text-muted-foreground"},ie={class:"flex items-end gap-2"},de={class:"flex-1 space-y-1.5"},ce={class:"relative"},fe={key:0,class:"absolute inset-y-0 right-3 flex items-center text-xs text-muted-foreground"},ve={key:1},me={class:"flex items-center gap-2 mt-4"},pe=M({__name:"UserTagEditor",setup(F){const p=S(),i=g(""),l=g(""),n=g(null),y=g(!1),c=g(!1),b=g(!1),C=w(()=>p.isLoading||y.value||b.value),_=w(()=>{var o;return((o=p.currentUser)==null?void 0:o.userTag)||""});q(()=>{_.value&&(i.value=_.value)});const L=w(()=>{switch(n.value){case"success":return"text-green-600";case"error":return"text-red-600";case"warning":return"text-amber-600";default:return"text-muted-foreground"}}),f=w(()=>b.value?"Checking...":c.value&&n.value==="success"?"Update":"Check Availability"),e=w(()=>!!(C.value||i.value===_.value||i.value.length===0||c.value&&n.value!=="success")),T=o=>o?G(o)?o===_.value?(l.value="This is your current tag",n.value="warning",!1):!0:(l.value="Tag must be 3-30 characters and contain only letters, numbers, and underscores",n.value="error",!1):(l.value="Tag cannot be empty",n.value="error",!1),z=o=>{i.value=o.target.value,c.value&&(c.value=!1),T(i.value)},O=async()=>{if(c.value&&n.value==="success"){await Y();return}if(T(i.value)){l.value="Checking availability...",n.value="warning",b.value=!0;try{const{validateUserTag:o}=await Z(async()=>{const{validateUserTag:J}=await import("./index-BQvMrvkP.js").then(Q=>Q.d$);return{validateUserTag:J}},__vite__mapDeps([0,1])),m=await o(i.value);c.value=!0,m.isAvailable?(l.value="This tag is available! Click Update to use it.",n.value="success"):(l.value=m.error||"This tag is not available",n.value="error")}catch(o){console.error("Tag validation error:",o),l.value=`Error checking tag availability: ${(o==null?void 0:o.message)||"Unknown error"}`,n.value="error"}finally{b.value=!1}}},Y=async()=>{if(i.value!==_.value){y.value=!0;try{await p.updateUserTag(i.value)&&(l.value="Tag updated successfully",n.value="success")}catch{l.value="Failed to update tag",n.value="error"}finally{y.value=!1}}};return(o,m)=>(d(),v("div",oe,[m[2]||(m[2]=s("h3",{class:"text-lg font-medium"},"User Tag",-1)),s("p",ue," Your user tag is a unique identifier that can be used to share your notes with others. It appears in your profile URL: https://bashnota.app/@"+x(_.value||"yourtag"),1),s("div",ie,[s("div",de,[a(t(h),{for:"userTag"},{default:r(()=>m[0]||(m[0]=[u("Your tag")])),_:1}),s("div",ce,[a(t(B),{id:"userTag",value:i.value,onInput:z,placeholder:"Enter a unique tag",class:E({"pr-24":i.value}),disabled:C.value},null,8,["value","class","disabled"]),i.value?(d(),v("span",fe," .bashnota.app ")):$("",!0)]),l.value?(d(),v("p",{key:0,class:E(["text-xs",L.value])},x(l.value),3)):$("",!0)]),a(t(k),{onClick:O,disabled:e.value,class:E({"opacity-50 cursor-not-allowed":e.value})},{default:r(()=>[C.value?(d(),j(t(re),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):(d(),v("span",ve,x(f.value),1))]),_:1},8,["disabled","class"])]),s("div",me,[a(t(K),{class:"h-4 w-4 text-muted-foreground"}),m[1]||(m[1]=s("p",{class:"text-xs text-muted-foreground"}," Tags must be 3-30 characters long and can only contain letters, numbers, and underscores. ",-1))])]))}}),ge={class:"container py-8 max-w-3xl mx-auto"},ye={key:0,class:"space-y-6"},_e={class:"flex items-center justify-between"},xe={class:"flex justify-center mb-6"},be={class:"relative"},he={key:0,class:"h-24 w-24 rounded-full overflow-hidden"},we=["src"],ke={key:1,class:"h-24 w-24 rounded-full bg-primary/10 text-primary flex items-center justify-center text-2xl font-bold"},Ce={class:"space-y-2"},Te={class:"flex items-center gap-2 px-3 py-2 border rounded-md bg-muted/20"},Le={class:"space-y-2"},Ee={class:"flex items-center gap-2 px-3 py-2 border rounded-md bg-muted/20"},De={key:0,class:"ml-auto text-sm text-green-600 dark:text-green-400 flex items-center"},$e={key:1,class:"ml-auto text-sm text-amber-600 dark:text-amber-400"},Ae={class:"space-y-2"},Ue={class:"flex items-center gap-2 px-3 py-2 border rounded-md bg-muted/20"},Ve={class:"space-y-2"},Ie={class:"flex items-center gap-2 px-3 py-2 border rounded-md bg-muted/20"},Ne={class:"space-y-2"},Pe={key:1,class:"space-y-4"},Re={class:"space-y-2"},Me={class:"flex gap-2"},Se={key:1,class:"flex justify-center items-center min-h-[60vh]"},Fe=M({__name:"ProfileView",setup(F){const p=S(),i=H(),l=w(()=>p.currentUser),n=g(!1),y=g(!1),c=g("");q(()=>{p.isAuthenticated||i.push({path:"/login",query:{redirect:"/profile"}})});const b=f=>f?ae(new Date(f)):"N/A",C=async()=>{var f;if((f=l.value)!=null&&f.email){n.value=!0;try{await p.resetPassword(l.value.email)}catch(e){D.error("Password reset error:",e)}finally{n.value=!1}}},_=async()=>{if(c.value!=="DELETE"){P("Please type DELETE to confirm account deletion",{description:"Confirmation Required"});return}n.value=!0;try{P("Account deletion is not implemented in this demo",{description:"Demo Limitation"}),y.value=!1,c.value=""}catch(f){D.error("Account deletion error:",f)}finally{n.value=!1}},L=async()=>{try{await p.logout(),i.push("/")}catch(f){D.error("Logout error:",f)}};return(f,e)=>(d(),v("div",ge,[l.value?(d(),v("div",ye,[s("div",_e,[e[4]||(e[4]=s("h1",{class:"text-2xl font-bold"},"Your Profile",-1)),a(t(k),{onClick:L,variant:"outline"},{default:r(()=>e[3]||(e[3]=[u("Logout")])),_:1})]),a(t(N),null,{default:r(()=>[a(t(A),null,{default:r(()=>[a(t(U),null,{default:r(()=>e[5]||(e[5]=[u("Account Information")])),_:1}),a(t(V),null,{default:r(()=>e[6]||(e[6]=[u(" Manage your personal information and account settings ")])),_:1})]),_:1}),a(t(I),{class:"space-y-4"},{default:r(()=>[s("div",xe,[s("div",be,[l.value.photoURL?(d(),v("div",he,[s("img",{src:l.value.photoURL,alt:"Profile picture",class:"h-full w-full object-cover"},null,8,we)])):(d(),v("div",ke,x(l.value.displayName?l.value.displayName.charAt(0).toUpperCase():"?"),1))])]),s("div",Ce,[a(t(h),{class:"text-muted-foreground"},{default:r(()=>e[7]||(e[7]=[u("Display Name")])),_:1}),s("div",Te,[a(t(W),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s("span",null,x(l.value.displayName||"No display name set"),1)])]),s("div",Le,[a(t(h),{class:"text-muted-foreground"},{default:r(()=>e[8]||(e[8]=[u("Email")])),_:1}),s("div",Ee,[a(t(le),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s("span",null,x(l.value.email),1),l.value.emailVerified?(d(),v("span",De,[a(t(ne),{class:"h-4 w-4 mr-1"}),e[9]||(e[9]=u(" Verified "))])):(d(),v("span",$e," Not verified "))])]),s("div",Ae,[a(t(h),{class:"text-muted-foreground"},{default:r(()=>e[10]||(e[10]=[u("Account Created")])),_:1}),s("div",Ue,[a(t(X),{class:"h-4 w-4 text-muted-foreground"}),s("span",null,x(b(l.value.createdAt)),1)])]),s("div",Ve,[a(t(h),{class:"text-muted-foreground"},{default:r(()=>e[11]||(e[11]=[u("Last Login")])),_:1}),s("div",Ie,[a(t(ee),{class:"h-4 w-4 text-muted-foreground"}),s("span",null,x(b(l.value.lastLoginAt)),1)])]),s("div",Ne,[a(t(h),{class:"text-muted-foreground flex items-center gap-1"},{default:r(()=>[a(t(te),{class:"h-4 w-4 text-primary"}),e[12]||(e[12]=u(" User Tag "))]),_:1}),a(pe)])]),_:1}),a(t(se),{class:"flex flex-col space-y-4"},{default:r(()=>[a(t(k),{variant:"outline",class:"w-full",onClick:C,disabled:n.value},{default:r(()=>e[13]||(e[13]=[u(" Reset Password ")])),_:1},8,["disabled"])]),_:1})]),_:1}),a(t(N),{class:"border-red-200 dark:border-red-800"},{default:r(()=>[a(t(A),null,{default:r(()=>[a(t(U),{class:"text-red-600 dark:text-red-400"},{default:r(()=>e[14]||(e[14]=[u("Danger Zone")])),_:1}),a(t(V),null,{default:r(()=>e[15]||(e[15]=[u(" Actions in this section can result in permanent data loss ")])),_:1})]),_:1}),a(t(I),null,{default:r(()=>[e[20]||(e[20]=s("p",{class:"text-sm text-muted-foreground mb-4"}," Deleting your account will remove all your data and cannot be undone. ",-1)),y.value?(d(),v("div",Pe,[s("div",Re,[a(t(h),{for:"confirmDelete"},{default:r(()=>e[17]||(e[17]=[u("Type DELETE to confirm")])),_:1}),a(t(B),{id:"confirmDelete",value:c.value,"class-name":"",type:"text",placeholder:"DELETE",onInput:e[1]||(e[1]=T=>c.value=T.target.value)},null,8,["value"])]),s("div",Me,[a(t(k),{variant:"destructive",onClick:_,disabled:n.value||c.value!=="DELETE"},{default:r(()=>e[18]||(e[18]=[u(" Confirm Delete ")])),_:1},8,["disabled"]),a(t(k),{variant:"outline",onClick:e[2]||(e[2]=()=>{y.value=!1,c.value=""}),disabled:n.value},{default:r(()=>e[19]||(e[19]=[u(" Cancel ")])),_:1},8,["disabled"])])])):(d(),j(t(k),{key:0,variant:"destructive",onClick:e[0]||(e[0]=T=>y.value=!0),disabled:n.value},{default:r(()=>e[16]||(e[16]=[u(" Delete Account ")])),_:1},8,["disabled"]))]),_:1})]),_:1})])):t(p).isLoading?(d(),v("div",Se,e[21]||(e[21]=[s("div",{class:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"},null,-1)]))):$("",!0)]))}});export{Fe as default};
