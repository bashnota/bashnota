import{d as T,bb as E,q as w,Q as K,R as J,o as f,i as s,b as _,V,w as r,e as t,bJ as y,k as l,bK as c,E as a,bS as $,bL as x,J as m,U as R,ac as v,ad as g,b$ as N,b0 as b,bv as k,b7 as I,L as q,S as B,ap as M,bo as D,bT as O,aQ as Q,t as d}from"./index-BXLJyS8L.js";import{_ as G}from"./ServerListItem.vue_vue_type_script_setup_true_lang-BU4Iw0VJ.js";const Y={class:"space-y-6 max-w-4xl"},z={class:"flex items-center justify-between"},H={class:"space-y-2"},W={class:"flex gap-2"},X={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Z={class:"space-y-2"},h={class:"space-y-2"},ee={class:"space-y-2"},te={class:"flex gap-2 pt-4"},se={class:"space-y-4"},le={class:"text-center py-12"},oe=T({__name:"JupyterSettings",setup(re,{expose:L}){const i=E(),S=new O,n=w({ip:"",port:"",token:"",url:""}),C=w(!1),p=w(!1),A=async u=>{try{const e=await S.getAvailableKernels(u);i.updateKernels(u,e)}catch(e){Q.error("Failed to refresh kernels:",e)}},P=async()=>{if(!n.value.ip||!n.value.port){d({title:"Validation Error",description:"Please fill in both IP and Port fields",variant:"destructive"});return}const u={ip:n.value.ip.trim(),port:n.value.port.trim(),token:n.value.token.trim()};d({title:"Testing Connection",description:"Testing connection to server...",variant:"default"});const e=await S.testConnection(u);if(e!=null&&e.success)i.addServer(u),n.value={ip:"",port:"",token:"",url:""},p.value=!1,d({title:"Success",description:"Server added successfully",variant:"default"});else{const o=(e==null?void 0:e.message)||"Connection failed";d({title:"Connection Failed",description:`Failed to add server: ${o}`,variant:"destructive"})}},j=async u=>{confirm("Are you sure you want to remove this server?")&&(i.removeServer(u),d({title:"Server Removed",description:"Jupyter server has been removed",variant:"default"}))},F=()=>{if(!n.value.url){d({title:"URL Required",description:"Please enter a Jupyter URL",variant:"destructive"});return}const u=S.parseJupyterUrl(n.value.url);u?(n.value.ip=u.ip,n.value.port=u.port,n.value.token=u.token,d({title:"URL Parsed",description:"URL parsed successfully",variant:"default"})):d({title:"Parse Error",description:"Failed to parse Jupyter URL",variant:"destructive"})},U=()=>{confirm("Are you sure you want to remove all Jupyter servers?")&&(i.servers&&i.servers.forEach(u=>{i.removeServer(u)}),n.value={ip:"",port:"",token:"",url:""},p.value=!1,d({title:"Settings Reset",description:"All Jupyter servers have been removed",variant:"default"}))};return K(()=>{}),L({resetToDefaults:U}),(u,e)=>(f(),J("div",Y,[s(t(v),null,{default:r(()=>[s(t(y),null,{default:r(()=>[l("div",z,[l("div",null,[s(t(c),{class:"flex items-center gap-2"},{default:r(()=>[s(t($),{class:"h-5 w-5"}),e[7]||(e[7]=a(" Jupyter Integration "))]),_:1}),s(t(x),null,{default:r(()=>e[8]||(e[8]=[a(" Connect to Jupyter servers for code execution and data analysis ")])),_:1})]),s(t(m),{onClick:e[0]||(e[0]=o=>p.value=!p.value),variant:"outline",class:"flex items-center gap-2"},{default:r(()=>[s(t(R),{class:"w-4 h-4"}),e[9]||(e[9]=a(" Add Server "))]),_:1})])]),_:1})]),_:1}),p.value?(f(),_(t(v),{key:0},{default:r(()=>[s(t(y),null,{default:r(()=>[s(t(c),null,{default:r(()=>e[10]||(e[10]=[a("Add New Jupyter Server")])),_:1}),s(t(x),null,{default:r(()=>e[11]||(e[11]=[a("Connect to a new Jupyter server for code execution")])),_:1})]),_:1}),s(t(g),null,{default:r(()=>[l("form",{onSubmit:N(P,["prevent"]),class:"space-y-4"},[l("div",H,[s(t(b),{class:"text-sm font-medium"},{default:r(()=>e[12]||(e[12]=[a("Jupyter URL (Optional)")])),_:1}),l("div",W,[s(t(k),{modelValue:n.value.url,"onUpdate:modelValue":e[1]||(e[1]=o=>n.value.url=o),type:"text",placeholder:"https://jupyter-server.example.com:8888/?token=abc123",class:"flex-1"},null,8,["modelValue"]),s(t(m),{type:"button",variant:"outline",onClick:F,class:"flex items-center gap-2"},{default:r(()=>[s(t(I),{class:"w-4 h-4"}),e[13]||(e[13]=a(" Parse URL "))]),_:1})]),e[14]||(e[14]=l("p",{class:"text-xs text-muted-foreground"}," Paste a Jupyter URL (including Kaggle URLs) to automatically fill the fields below ",-1))]),l("div",X,[l("div",Z,[s(t(b),{class:"text-sm font-medium"},{default:r(()=>e[15]||(e[15]=[a("Server IP")])),_:1}),s(t(k),{modelValue:n.value.ip,"onUpdate:modelValue":e[2]||(e[2]=o=>n.value.ip=o),type:"text",placeholder:"localhost",required:""},null,8,["modelValue"])]),l("div",h,[s(t(b),{class:"text-sm font-medium"},{default:r(()=>e[16]||(e[16]=[a("Port")])),_:1}),s(t(k),{modelValue:n.value.port,"onUpdate:modelValue":e[3]||(e[3]=o=>n.value.port=o),type:"text",inputmode:"numeric",pattern:"[0-9]*",placeholder:"8888",required:""},null,8,["modelValue"])])]),l("div",ee,[s(t(b),{class:"text-sm font-medium"},{default:r(()=>e[17]||(e[17]=[a("Token")])),_:1}),s(t(k),{modelValue:n.value.token,"onUpdate:modelValue":e[4]||(e[4]=o=>n.value.token=o),type:"password",placeholder:"Enter your Jupyter token"},null,8,["modelValue"]),e[18]||(e[18]=l("p",{class:"text-xs text-muted-foreground"}," Optional but recommended for secure connections ",-1))]),l("div",te,[s(t(m),{type:"submit",disabled:C.value},{default:r(()=>[a(q(C.value?"Testing...":"Add Server"),1)]),_:1},8,["disabled"]),s(t(m),{type:"button",variant:"outline",onClick:e[5]||(e[5]=o=>p.value=!1)},{default:r(()=>e[19]||(e[19]=[a(" Cancel ")])),_:1})])],32)]),_:1})]),_:1})):V("",!0),t(i).servers&&t(i).servers.length>0?(f(),_(t(v),{key:1},{default:r(()=>[s(t(y),null,{default:r(()=>[s(t(c),null,{default:r(()=>e[20]||(e[20]=[a("Configured Servers")])),_:1}),s(t(x),null,{default:r(()=>e[21]||(e[21]=[a("Manage your existing Jupyter server connections")])),_:1})]),_:1}),s(t(g),null,{default:r(()=>[l("div",se,[(f(!0),J(B,null,M(t(i).servers,o=>(f(),J("div",{key:`${o.ip}:${o.port}`},[s(G,{server:o,kernels:t(i).kernels[`${o.ip}:${o.port}`]||[],onRemove:j,onKernelsUpdated:A},null,8,["server","kernels"])]))),128))])]),_:1})]),_:1})):p.value?V("",!0):(f(),_(t(v),{key:2},{default:r(()=>[s(t(g),{class:"pt-6"},{default:r(()=>[l("div",le,[s(t($),{class:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e[23]||(e[23]=l("h3",{class:"text-lg font-medium mb-2"},"No Jupyter Servers Configured",-1)),e[24]||(e[24]=l("p",{class:"text-muted-foreground mb-4 max-w-md mx-auto"}," Add a Jupyter server to enable code execution and data analysis features. ",-1)),s(t(m),{onClick:e[6]||(e[6]=o=>p.value=!0),class:"flex items-center gap-2"},{default:r(()=>[s(t(R),{class:"w-4 h-4"}),e[22]||(e[22]=a(" Add Your First Server "))]),_:1})])]),_:1})]),_:1})),s(t(v),null,{default:r(()=>[s(t(y),null,{default:r(()=>[s(t(c),null,{default:r(()=>e[25]||(e[25]=[a("Getting Started")])),_:1}),s(t(x),null,{default:r(()=>e[26]||(e[26]=[a("Learn how to set up Jupyter integration")])),_:1})]),_:1}),s(t(g),{class:"space-y-4"},{default:r(()=>e[27]||(e[27]=[l("div",{class:"space-y-3"},[l("div",{class:"flex items-start gap-3"},[l("div",{class:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0 mt-0.5"},[l("span",{class:"text-xs font-medium text-primary"},"1")]),l("div",null,[l("h4",{class:"font-medium"},"Install Jupyter"),l("p",{class:"text-sm text-muted-foreground"},[a("Install Jupyter on your machine using "),l("code",{class:"px-1 py-0.5 bg-muted rounded text-xs"},"pip install jupyter")])])]),l("div",{class:"flex items-start gap-3"},[l("div",{class:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0 mt-0.5"},[l("span",{class:"text-xs font-medium text-primary"},"2")]),l("div",null,[l("h4",{class:"font-medium"},"Start Jupyter Server"),l("p",{class:"text-sm text-muted-foreground"},[a("Run "),l("code",{class:"px-1 py-0.5 bg-muted rounded text-xs"},"jupyter notebook"),a(" or "),l("code",{class:"px-1 py-0.5 bg-muted rounded text-xs"},"jupyter lab"),a(" to start the server")])])]),l("div",{class:"flex items-start gap-3"},[l("div",{class:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0 mt-0.5"},[l("span",{class:"text-xs font-medium text-primary"},"3")]),l("div",null,[l("h4",{class:"font-medium"},"Add Server"),l("p",{class:"text-sm text-muted-foreground"},"Copy the server URL with token and add it using the form above")])])],-1)])),_:1})]),_:1}),s(t(v),null,{default:r(()=>[s(t(y),null,{default:r(()=>[s(t(c),null,{default:r(()=>e[28]||(e[28]=[a("Reset Settings")])),_:1}),s(t(x),null,{default:r(()=>e[29]||(e[29]=[a("Remove all configured Jupyter servers")])),_:1})]),_:1}),s(t(g),null,{default:r(()=>[s(t(m),{variant:"outline",onClick:U,class:"flex items-center gap-2"},{default:r(()=>[s(t(D),{class:"h-4 w-4"}),e[30]||(e[30]=a(" Reset All Servers "))]),_:1})]),_:1})]),_:1})]))}});export{oe as default};
